!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).helportAssistant={})}(this,(function(exports){"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _newArrowCheck(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var r=function t(){if(this instanceof t){var r=[null];return r.push.apply(r,arguments),new(Function.bind.apply(e,r))}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),r}var check=function(t){return t&&t.Math==Math&&t},global$u=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal&&commonjsGlobal)||function(){return this}()||Function("return this")(),objectGetOwnPropertyDescriptor={},fails$z=function(t){try{return!!t()}catch(t){return!0}},fails$y=fails$z,descriptors=!fails$y((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),fails$x=fails$z,functionBindNative=!fails$x((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),NATIVE_BIND$3=functionBindNative,call$o=Function.prototype.call,functionCall=NATIVE_BIND$3?call$o.bind(call$o):function(){return call$o.apply(call$o,arguments)},objectPropertyIsEnumerable={},$propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor$3=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$3&&!$propertyIsEnumerable.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function(t){var e=getOwnPropertyDescriptor$3(this,t);return!!e&&e.enumerable}:$propertyIsEnumerable;var createPropertyDescriptor$6=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},NATIVE_BIND$2=functionBindNative,FunctionPrototype$2=Function.prototype,call$n=FunctionPrototype$2.call,uncurryThisWithBind=NATIVE_BIND$2&&FunctionPrototype$2.bind.bind(call$n,call$n),functionUncurryThis=NATIVE_BIND$2?uncurryThisWithBind:function(t){return function(){return call$n.apply(t,arguments)}},uncurryThis$u=functionUncurryThis,toString$8=uncurryThis$u({}.toString),stringSlice$6=uncurryThis$u("".slice),classofRaw$2=function(t){return stringSlice$6(toString$8(t),8,-1)},uncurryThis$t=functionUncurryThis,fails$w=fails$z,classof$d=classofRaw$2,$Object$4=Object,split$1=uncurryThis$t("".split),indexedObject=fails$w((function(){return!$Object$4("z").propertyIsEnumerable(0)}))?function(t){return"String"==classof$d(t)?split$1(t,""):$Object$4(t)}:$Object$4,isNullOrUndefined$5=function(t){return null==t},isNullOrUndefined$4=isNullOrUndefined$5,$TypeError$h=TypeError,requireObjectCoercible$5=function(t){if(isNullOrUndefined$4(t))throw $TypeError$h("Can't call method on "+t);return t},IndexedObject$4=indexedObject,requireObjectCoercible$4=requireObjectCoercible$5,toIndexedObject$9=function(t){return IndexedObject$4(requireObjectCoercible$4(t))},documentAll$2="object"==typeof document&&document.all,IS_HTMLDDA=void 0===documentAll$2&&void 0!==documentAll$2,documentAll_1={all:documentAll$2,IS_HTMLDDA:IS_HTMLDDA},$documentAll$1=documentAll_1,documentAll$1=$documentAll$1.all,isCallable$p=$documentAll$1.IS_HTMLDDA?function(t){return"function"==typeof t||t===documentAll$1}:function(t){return"function"==typeof t},isCallable$o=isCallable$p,$documentAll=documentAll_1,documentAll=$documentAll.all,isObject$g=$documentAll.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:isCallable$o(t)||t===documentAll}:function(t){return"object"==typeof t?null!==t:isCallable$o(t)},global$t=global$u,isCallable$n=isCallable$p,aFunction=function(t){return isCallable$n(t)?t:void 0},getBuiltIn$7=function(t,e){return arguments.length<2?aFunction(global$t[t]):global$t[t]&&global$t[t][e]},uncurryThis$s=functionUncurryThis,objectIsPrototypeOf=uncurryThis$s({}.isPrototypeOf),engineUserAgent="undefined"!=typeof navigator&&String(navigator.userAgent)||"",global$s=global$u,userAgent$5=engineUserAgent,process$4=global$s.process,Deno$1=global$s.Deno,versions=process$4&&process$4.versions||Deno$1&&Deno$1.version,v8=versions&&versions.v8,match,version;v8&&(match=v8.split("."),version=match[0]>0&&match[0]<4?1:+(match[0]+match[1])),!version&&userAgent$5&&(match=userAgent$5.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent$5.match(/Chrome\/(\d+)/),match&&(version=+match[1])));var engineV8Version=version,V8_VERSION$3=engineV8Version,fails$v=fails$z,symbolConstructorDetection=!!Object.getOwnPropertySymbols&&!fails$v((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&V8_VERSION$3&&V8_VERSION$3<41})),NATIVE_SYMBOL$1=symbolConstructorDetection,useSymbolAsUid=NATIVE_SYMBOL$1&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,getBuiltIn$6=getBuiltIn$7,isCallable$m=isCallable$p,isPrototypeOf$5=objectIsPrototypeOf,USE_SYMBOL_AS_UID$1=useSymbolAsUid,$Object$3=Object,isSymbol$3=USE_SYMBOL_AS_UID$1?function(t){return"symbol"==typeof t}:function(t){var e=getBuiltIn$6("Symbol");return isCallable$m(e)&&isPrototypeOf$5(e.prototype,$Object$3(t))},$String$4=String,tryToString$6=function(t){try{return $String$4(t)}catch(t){return"Object"}},isCallable$l=isCallable$p,tryToString$5=tryToString$6,$TypeError$g=TypeError,aCallable$a=function(t){if(isCallable$l(t))return t;throw $TypeError$g(tryToString$5(t)+" is not a function")},aCallable$9=aCallable$a,isNullOrUndefined$3=isNullOrUndefined$5,getMethod$4=function(t,e){var r=t[e];return isNullOrUndefined$3(r)?void 0:aCallable$9(r)},call$m=functionCall,isCallable$k=isCallable$p,isObject$f=isObject$g,$TypeError$f=TypeError,ordinaryToPrimitive$1=function(t,e){var r,n;if("string"===e&&isCallable$k(r=t.toString)&&!isObject$f(n=call$m(r,t)))return n;if(isCallable$k(r=t.valueOf)&&!isObject$f(n=call$m(r,t)))return n;if("string"!==e&&isCallable$k(r=t.toString)&&!isObject$f(n=call$m(r,t)))return n;throw $TypeError$f("Can't convert object to primitive value")},shared$4={exports:{}},isPure=!1,global$r=global$u,defineProperty$6=Object.defineProperty,defineGlobalProperty$3=function(t,e){try{defineProperty$6(global$r,t,{value:e,configurable:!0,writable:!0})}catch(r){global$r[t]=e}return e},global$q=global$u,defineGlobalProperty$2=defineGlobalProperty$3,SHARED="__core-js_shared__",store$3=global$q[SHARED]||defineGlobalProperty$2(SHARED,{}),sharedStore=store$3,store$2=sharedStore;(shared$4.exports=function(t,e){return store$2[t]||(store$2[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.1",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",source:"https://github.com/zloirock/core-js"});var sharedExports=shared$4.exports,requireObjectCoercible$3=requireObjectCoercible$5,$Object$2=Object,toObject$b=function(t){return $Object$2(requireObjectCoercible$3(t))},uncurryThis$r=functionUncurryThis,toObject$a=toObject$b,hasOwnProperty=uncurryThis$r({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function(t,e){return hasOwnProperty(toObject$a(t),e)},uncurryThis$q=functionUncurryThis,id=0,postfix=Math.random(),toString$7=uncurryThis$q(1..toString),uid$3=function(t){return"Symbol("+(void 0===t?"":t)+")_"+toString$7(++id+postfix,36)},global$p=global$u,shared$3=sharedExports,hasOwn$d=hasOwnProperty_1,uid$2=uid$3,NATIVE_SYMBOL=symbolConstructorDetection,USE_SYMBOL_AS_UID=useSymbolAsUid,Symbol$1=global$p.Symbol,WellKnownSymbolsStore=shared$3("wks"),createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol$1.for||Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid$2,wellKnownSymbol$o=function(t){return hasOwn$d(WellKnownSymbolsStore,t)||(WellKnownSymbolsStore[t]=NATIVE_SYMBOL&&hasOwn$d(Symbol$1,t)?Symbol$1[t]:createWellKnownSymbol("Symbol."+t)),WellKnownSymbolsStore[t]},call$l=functionCall,isObject$e=isObject$g,isSymbol$2=isSymbol$3,getMethod$3=getMethod$4,ordinaryToPrimitive=ordinaryToPrimitive$1,wellKnownSymbol$n=wellKnownSymbol$o,$TypeError$e=TypeError,TO_PRIMITIVE=wellKnownSymbol$n("toPrimitive"),toPrimitive$2=function(t,e){if(!isObject$e(t)||isSymbol$2(t))return t;var r,n=getMethod$3(t,TO_PRIMITIVE);if(n){if(void 0===e&&(e="default"),r=call$l(n,t,e),!isObject$e(r)||isSymbol$2(r))return r;throw $TypeError$e("Can't convert object to primitive value")}return void 0===e&&(e="number"),ordinaryToPrimitive(t,e)},toPrimitive$1=toPrimitive$2,isSymbol$1=isSymbol$3,toPropertyKey$4=function(t){var e=toPrimitive$1(t,"string");return isSymbol$1(e)?e:e+""},global$o=global$u,isObject$d=isObject$g,document$3=global$o.document,EXISTS$1=isObject$d(document$3)&&isObject$d(document$3.createElement),documentCreateElement$2=function(t){return EXISTS$1?document$3.createElement(t):{}},DESCRIPTORS$f=descriptors,fails$u=fails$z,createElement$1=documentCreateElement$2,ie8DomDefine=!DESCRIPTORS$f&&!fails$u((function(){return 7!=Object.defineProperty(createElement$1("div"),"a",{get:function(){return 7}}).a})),DESCRIPTORS$e=descriptors,call$k=functionCall,propertyIsEnumerableModule$1=objectPropertyIsEnumerable,createPropertyDescriptor$5=createPropertyDescriptor$6,toIndexedObject$8=toIndexedObject$9,toPropertyKey$3=toPropertyKey$4,hasOwn$c=hasOwnProperty_1,IE8_DOM_DEFINE$1=ie8DomDefine,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$e?$getOwnPropertyDescriptor$1:function(t,e){if(t=toIndexedObject$8(t),e=toPropertyKey$3(e),IE8_DOM_DEFINE$1)try{return $getOwnPropertyDescriptor$1(t,e)}catch(t){}if(hasOwn$c(t,e))return createPropertyDescriptor$5(!call$k(propertyIsEnumerableModule$1.f,t,e),t[e])};var objectDefineProperty={},DESCRIPTORS$d=descriptors,fails$t=fails$z,v8PrototypeDefineBug=DESCRIPTORS$d&&fails$t((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),isObject$c=isObject$g,$String$3=String,$TypeError$d=TypeError,anObject$f=function(t){if(isObject$c(t))return t;throw $TypeError$d($String$3(t)+" is not an object")},DESCRIPTORS$c=descriptors,IE8_DOM_DEFINE=ie8DomDefine,V8_PROTOTYPE_DEFINE_BUG$1=v8PrototypeDefineBug,anObject$e=anObject$f,toPropertyKey$2=toPropertyKey$4,$TypeError$c=TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable";objectDefineProperty.f=DESCRIPTORS$c?V8_PROTOTYPE_DEFINE_BUG$1?function(t,e,r){if(anObject$e(t),e=toPropertyKey$2(e),anObject$e(r),"function"==typeof t&&"prototype"===e&&"value"in r&&WRITABLE in r&&!r[WRITABLE]){var n=$getOwnPropertyDescriptor(t,e);n&&n[WRITABLE]&&(t[e]=r.value,r={configurable:CONFIGURABLE$1 in r?r[CONFIGURABLE$1]:n[CONFIGURABLE$1],enumerable:ENUMERABLE in r?r[ENUMERABLE]:n[ENUMERABLE],writable:!1})}return $defineProperty(t,e,r)}:$defineProperty:function(t,e,r){if(anObject$e(t),e=toPropertyKey$2(e),anObject$e(r),IE8_DOM_DEFINE)try{return $defineProperty(t,e,r)}catch(t){}if("get"in r||"set"in r)throw $TypeError$c("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var DESCRIPTORS$b=descriptors,definePropertyModule$5=objectDefineProperty,createPropertyDescriptor$4=createPropertyDescriptor$6,createNonEnumerableProperty$8=DESCRIPTORS$b?function(t,e,r){return definePropertyModule$5.f(t,e,createPropertyDescriptor$4(1,r))}:function(t,e,r){return t[e]=r,t},makeBuiltIn$3={exports:{}},DESCRIPTORS$a=descriptors,hasOwn$b=hasOwnProperty_1,FunctionPrototype$1=Function.prototype,getDescriptor=DESCRIPTORS$a&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$b(FunctionPrototype$1,"name"),PROPER=EXISTS&&"something"===function(){}.name,CONFIGURABLE=EXISTS&&(!DESCRIPTORS$a||DESCRIPTORS$a&&getDescriptor(FunctionPrototype$1,"name").configurable),functionName={EXISTS:EXISTS,PROPER:PROPER,CONFIGURABLE:CONFIGURABLE},uncurryThis$p=functionUncurryThis,isCallable$j=isCallable$p,store$1=sharedStore,functionToString=uncurryThis$p(Function.toString);isCallable$j(store$1.inspectSource)||(store$1.inspectSource=function(t){return functionToString(t)});var inspectSource$3=store$1.inspectSource,global$n=global$u,isCallable$i=isCallable$p,WeakMap$1=global$n.WeakMap,weakMapBasicDetection=isCallable$i(WeakMap$1)&&/native code/.test(String(WeakMap$1)),shared$2=sharedExports,uid$1=uid$3,keys$1=shared$2("keys"),sharedKey$3=function(t){return keys$1[t]||(keys$1[t]=uid$1(t))},hiddenKeys$4={},NATIVE_WEAK_MAP=weakMapBasicDetection,global$m=global$u,isObject$b=isObject$g,createNonEnumerableProperty$7=createNonEnumerableProperty$8,hasOwn$a=hasOwnProperty_1,shared$1=sharedStore,sharedKey$2=sharedKey$3,hiddenKeys$3=hiddenKeys$4,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$4=global$m.TypeError,WeakMap=global$m.WeakMap,set$2,get$1,has$1,enforce=function(t){return has$1(t)?get$1(t):set$2(t,{})},getterFor=function(t){return function(e){var r;if(!isObject$b(e)||(r=get$1(e)).type!==t)throw TypeError$4("Incompatible receiver, "+t+" required");return r}};if(NATIVE_WEAK_MAP||shared$1.state){var store=shared$1.state||(shared$1.state=new WeakMap);store.get=store.get,store.has=store.has,store.set=store.set,set$2=function(t,e){if(store.has(t))throw TypeError$4(OBJECT_ALREADY_INITIALIZED);return e.facade=t,store.set(t,e),e},get$1=function(t){return store.get(t)||{}},has$1=function(t){return store.has(t)}}else{var STATE=sharedKey$2("state");hiddenKeys$3[STATE]=!0,set$2=function(t,e){if(hasOwn$a(t,STATE))throw TypeError$4(OBJECT_ALREADY_INITIALIZED);return e.facade=t,createNonEnumerableProperty$7(t,STATE,e),e},get$1=function(t){return hasOwn$a(t,STATE)?t[STATE]:{}},has$1=function(t){return hasOwn$a(t,STATE)}}var internalState={set:set$2,get:get$1,has:has$1,enforce:enforce,getterFor:getterFor},uncurryThis$o=functionUncurryThis,fails$s=fails$z,isCallable$h=isCallable$p,hasOwn$9=hasOwnProperty_1,DESCRIPTORS$9=descriptors,CONFIGURABLE_FUNCTION_NAME$2=functionName.CONFIGURABLE,inspectSource$2=inspectSource$3,InternalStateModule$7=internalState,enforceInternalState$2=InternalStateModule$7.enforce,getInternalState$5=InternalStateModule$7.get,$String$2=String,defineProperty$5=Object.defineProperty,stringSlice$5=uncurryThis$o("".slice),replace$4=uncurryThis$o("".replace),join$3=uncurryThis$o([].join),CONFIGURABLE_LENGTH=DESCRIPTORS$9&&!fails$s((function(){return 8!==defineProperty$5((function(){}),"length",{value:8}).length})),TEMPLATE=String(String).split("String"),makeBuiltIn$2=makeBuiltIn$3.exports=function(t,e,r){"Symbol("===stringSlice$5($String$2(e),0,7)&&(e="["+replace$4($String$2(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!hasOwn$9(t,"name")||CONFIGURABLE_FUNCTION_NAME$2&&t.name!==e)&&(DESCRIPTORS$9?defineProperty$5(t,"name",{value:e,configurable:!0}):t.name=e),CONFIGURABLE_LENGTH&&r&&hasOwn$9(r,"arity")&&t.length!==r.arity&&defineProperty$5(t,"length",{value:r.arity});try{r&&hasOwn$9(r,"constructor")&&r.constructor?DESCRIPTORS$9&&defineProperty$5(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=enforceInternalState$2(t);return hasOwn$9(n,"source")||(n.source=join$3(TEMPLATE,"string"==typeof e?e:"")),t};Function.prototype.toString=makeBuiltIn$2((function(){return isCallable$h(this)&&getInternalState$5(this).source||inspectSource$2(this)}),"toString");var makeBuiltInExports=makeBuiltIn$3.exports,isCallable$g=isCallable$p,definePropertyModule$4=objectDefineProperty,makeBuiltIn$1=makeBuiltInExports,defineGlobalProperty$1=defineGlobalProperty$3,defineBuiltIn$b=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(isCallable$g(r)&&makeBuiltIn$1(r,i,n),n.global)o?t[e]=r:defineGlobalProperty$1(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:definePropertyModule$4.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},objectGetOwnPropertyNames={},ceil=Math.ceil,floor$5=Math.floor,mathTrunc=Math.trunc||function(t){var e=+t;return(e>0?floor$5:ceil)(e)},trunc=mathTrunc,toIntegerOrInfinity$8=function(t){var e=+t;return e!=e||0===e?0:trunc(e)},toIntegerOrInfinity$7=toIntegerOrInfinity$8,max$3=Math.max,min$4=Math.min,toAbsoluteIndex$6=function(t,e){var r=toIntegerOrInfinity$7(t);return r<0?max$3(r+e,0):min$4(r,e)},toIntegerOrInfinity$6=toIntegerOrInfinity$8,min$3=Math.min,toLength$6=function(t){return t>0?min$3(toIntegerOrInfinity$6(t),9007199254740991):0},toLength$5=toLength$6,lengthOfArrayLike$d=function(t){return toLength$5(t.length)},toIndexedObject$7=toIndexedObject$9,toAbsoluteIndex$5=toAbsoluteIndex$6,lengthOfArrayLike$c=lengthOfArrayLike$d,createMethod$4=function(t){return function(e,r,n){var o,i=toIndexedObject$7(e),a=lengthOfArrayLike$c(i),s=toAbsoluteIndex$5(n,a);if(t&&r!=r){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===r)return t||s||0;return!t&&-1}},arrayIncludes={includes:createMethod$4(!0),indexOf:createMethod$4(!1)},uncurryThis$n=functionUncurryThis,hasOwn$8=hasOwnProperty_1,toIndexedObject$6=toIndexedObject$9,indexOf$1=arrayIncludes.indexOf,hiddenKeys$2=hiddenKeys$4,push$3=uncurryThis$n([].push),objectKeysInternal=function(t,e){var r,n=toIndexedObject$6(t),o=0,i=[];for(r in n)!hasOwn$8(hiddenKeys$2,r)&&hasOwn$8(n,r)&&push$3(i,r);for(;e.length>o;)hasOwn$8(n,r=e[o++])&&(~indexOf$1(i,r)||push$3(i,r));return i},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$1=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function(t){return internalObjectKeys$1(t,hiddenKeys$1)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$5=getBuiltIn$7,uncurryThis$m=functionUncurryThis,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertySymbolsModule$1=objectGetOwnPropertySymbols,anObject$d=anObject$f,concat$2=uncurryThis$m([].concat),ownKeys$1=getBuiltIn$5("Reflect","ownKeys")||function(t){var e=getOwnPropertyNamesModule.f(anObject$d(t)),r=getOwnPropertySymbolsModule$1.f;return r?concat$2(e,r(t)):e},hasOwn$7=hasOwnProperty_1,ownKeys=ownKeys$1,getOwnPropertyDescriptorModule$1=objectGetOwnPropertyDescriptor,definePropertyModule$3=objectDefineProperty,copyConstructorProperties$1=function(t,e,r){for(var n=ownKeys(e),o=definePropertyModule$3.f,i=getOwnPropertyDescriptorModule$1.f,a=0;a<n.length;a++){var s=n[a];hasOwn$7(t,s)||r&&hasOwn$7(r,s)||o(t,s,i(e,s))}},fails$r=fails$z,isCallable$f=isCallable$p,replacement=/#|\.prototype\./,isForced$2=function(t,e){var r=data[normalize(t)];return r==POLYFILL||r!=NATIVE&&(isCallable$f(e)?fails$r(e):!!e)},normalize=isForced$2.normalize=function(t){return String(t).replace(replacement,".").toLowerCase()},data=isForced$2.data={},NATIVE=isForced$2.NATIVE="N",POLYFILL=isForced$2.POLYFILL="P",isForced_1=isForced$2,global$l=global$u,getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$6=createNonEnumerableProperty$8,defineBuiltIn$a=defineBuiltIn$b,defineGlobalProperty=defineGlobalProperty$3,copyConstructorProperties=copyConstructorProperties$1,isForced$1=isForced_1,_export=function(t,e){var r,n,o,i,a,s=t.target,c=t.global,u=t.stat;if(r=c?global$l:u?global$l[s]||defineGlobalProperty(s,{}):(global$l[s]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(a=getOwnPropertyDescriptor$2(r,n))&&a.value:r[n],!isForced$1(c?n:s+(u?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;copyConstructorProperties(i,o)}(t.sham||o&&o.sham)&&createNonEnumerableProperty$6(i,"sham",!0),defineBuiltIn$a(r,n,i,t)}},classofRaw$1=classofRaw$2,uncurryThis$l=functionUncurryThis,functionUncurryThisClause=function(t){if("Function"===classofRaw$1(t))return uncurryThis$l(t)},uncurryThis$k=functionUncurryThisClause,aCallable$8=aCallable$a,NATIVE_BIND$1=functionBindNative,bind$7=uncurryThis$k(uncurryThis$k.bind),functionBindContext=function(t,e){return aCallable$8(t),void 0===e?t:NATIVE_BIND$1?bind$7(t,e):function(){return t.apply(e,arguments)}},classof$c=classofRaw$2,isArray$4=Array.isArray||function(t){return"Array"==classof$c(t)},wellKnownSymbol$m=wellKnownSymbol$o,TO_STRING_TAG$4=wellKnownSymbol$m("toStringTag"),test={};test[TO_STRING_TAG$4]="z";var toStringTagSupport="[object z]"===String(test),TO_STRING_TAG_SUPPORT$2=toStringTagSupport,isCallable$e=isCallable$p,classofRaw=classofRaw$2,wellKnownSymbol$l=wellKnownSymbol$o,TO_STRING_TAG$3=wellKnownSymbol$l("toStringTag"),$Object$1=Object,CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(t,e){try{return t[e]}catch(t){}},classof$b=TO_STRING_TAG_SUPPORT$2?classofRaw:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=tryGet(e=$Object$1(t),TO_STRING_TAG$3))?r:CORRECT_ARGUMENTS?classofRaw(e):"Object"==(n=classofRaw(e))&&isCallable$e(e.callee)?"Arguments":n},uncurryThis$j=functionUncurryThis,fails$q=fails$z,isCallable$d=isCallable$p,classof$a=classof$b,getBuiltIn$4=getBuiltIn$7,inspectSource$1=inspectSource$3,noop$1=function(){},empty=[],construct=getBuiltIn$4("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec$1=uncurryThis$j(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop$1),isConstructorModern=function(t){if(!isCallable$d(t))return!1;try{return construct(noop$1,empty,t),!0}catch(t){return!1}},isConstructorLegacy=function(t){if(!isCallable$d(t))return!1;switch(classof$a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec$1(constructorRegExp,inspectSource$1(t))}catch(t){return!0}};isConstructorLegacy.sham=!0;var isConstructor$3=!construct||fails$q((function(){var t;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern((function(){t=!0}))||t}))?isConstructorLegacy:isConstructorModern,isArray$3=isArray$4,isConstructor$2=isConstructor$3,isObject$a=isObject$g,wellKnownSymbol$k=wellKnownSymbol$o,SPECIES$6=wellKnownSymbol$k("species"),$Array$3=Array,arraySpeciesConstructor$1=function(t){var e;return isArray$3(t)&&(e=t.constructor,(isConstructor$2(e)&&(e===$Array$3||isArray$3(e.prototype))||isObject$a(e)&&null===(e=e[SPECIES$6]))&&(e=void 0)),void 0===e?$Array$3:e},arraySpeciesConstructor=arraySpeciesConstructor$1,arraySpeciesCreate$2=function(t,e){return new(arraySpeciesConstructor(t))(0===e?0:e)},bind$6=functionBindContext,uncurryThis$i=functionUncurryThis,IndexedObject$3=indexedObject,toObject$9=toObject$b,lengthOfArrayLike$b=lengthOfArrayLike$d,arraySpeciesCreate$1=arraySpeciesCreate$2,push$2=uncurryThis$i([].push),createMethod$3=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,s=5==t||i;return function(c,u,l,f){for(var p,d,y=toObject$9(c),h=IndexedObject$3(y),$=bind$6(u,l),g=lengthOfArrayLike$b(h),v=0,b=f||arraySpeciesCreate$1,S=e?b(c,g):r||a?b(c,0):void 0;g>v;v++)if((s||v in h)&&(d=$(p=h[v],v,y),t))if(e)S[v]=d;else if(d)switch(t){case 3:return!0;case 5:return p;case 6:return v;case 2:push$2(S,p)}else switch(t){case 4:return!1;case 7:push$2(S,p)}return i?-1:n||o?o:S}},arrayIteration={forEach:createMethod$3(0),map:createMethod$3(1),filter:createMethod$3(2),some:createMethod$3(3),every:createMethod$3(4),find:createMethod$3(5),findIndex:createMethod$3(6),filterReject:createMethod$3(7)},objectDefineProperties={},internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$3,objectKeys$2=Object.keys||function(t){return internalObjectKeys(t,enumBugKeys$1)},DESCRIPTORS$8=descriptors,V8_PROTOTYPE_DEFINE_BUG=v8PrototypeDefineBug,definePropertyModule$2=objectDefineProperty,anObject$c=anObject$f,toIndexedObject$5=toIndexedObject$9,objectKeys$1=objectKeys$2;objectDefineProperties.f=DESCRIPTORS$8&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function(t,e){anObject$c(t);for(var r,n=toIndexedObject$5(e),o=objectKeys$1(e),i=o.length,a=0;i>a;)definePropertyModule$2.f(t,r=o[a++],n[r]);return t};var getBuiltIn$3=getBuiltIn$7,html$2=getBuiltIn$3("document","documentElement"),anObject$b=anObject$f,definePropertiesModule=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys=hiddenKeys$4,html$1=html$2,documentCreateElement$1=documentCreateElement$2,sharedKey$1=sharedKey$3,GT=">",LT="<",PROTOTYPE$1="prototype",SCRIPT="script",IE_PROTO$1=sharedKey$1("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return LT+SCRIPT+GT+t+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(t){t.write(scriptTag("")),t.close();var e=t.parentWindow.Object;return t=null,e},NullProtoObjectViaIFrame=function(){var t,e=documentCreateElement$1("iframe"),r="java"+SCRIPT+":";return e.style.display="none",html$1.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(scriptTag("document.F=Object")),t.close(),t.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch(t){}NullProtoObject="undefined"!=typeof document?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var t=enumBugKeys.length;t--;)delete NullProtoObject[PROTOTYPE$1][enumBugKeys[t]];return NullProtoObject()};hiddenKeys[IE_PROTO$1]=!0;var objectCreate=Object.create||function(t,e){var r;return null!==t?(EmptyConstructor[PROTOTYPE$1]=anObject$b(t),r=new EmptyConstructor,EmptyConstructor[PROTOTYPE$1]=null,r[IE_PROTO$1]=t):r=NullProtoObject(),void 0===e?r:definePropertiesModule.f(r,e)},wellKnownSymbol$j=wellKnownSymbol$o,create$6=objectCreate,defineProperty$4=objectDefineProperty.f,UNSCOPABLES=wellKnownSymbol$j("unscopables"),ArrayPrototype$1=Array.prototype;null==ArrayPrototype$1[UNSCOPABLES]&&defineProperty$4(ArrayPrototype$1,UNSCOPABLES,{configurable:!0,value:create$6(null)});var addToUnscopables$3=function(t){ArrayPrototype$1[UNSCOPABLES][t]=!0},$$l=_export,$find$1=arrayIteration.find,addToUnscopables$2=addToUnscopables$3,FIND="find",SKIPS_HOLES=!0;FIND in[]&&Array(1)[FIND]((function(){SKIPS_HOLES=!1})),$$l({target:"Array",proto:!0,forced:SKIPS_HOLES},{find:function(t){return $find$1(this,t,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables$2(FIND);var TO_STRING_TAG_SUPPORT$1=toStringTagSupport,classof$9=classof$b,objectToString=TO_STRING_TAG_SUPPORT$1?{}.toString:function(){return"[object "+classof$9(this)+"]"},TO_STRING_TAG_SUPPORT=toStringTagSupport,defineBuiltIn$9=defineBuiltIn$b,toString$6=objectToString;TO_STRING_TAG_SUPPORT||defineBuiltIn$9(Object.prototype,"toString",toString$6,{unsafe:!0});var classof$8=classof$b,$String$1=String,toString$5=function(t){if("Symbol"===classof$8(t))throw TypeError("Cannot convert a Symbol value to a string");return $String$1(t)},anObject$a=anObject$f,regexpFlags$1=function(){var t=anObject$a(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},call$j=functionCall,hasOwn$6=hasOwnProperty_1,isPrototypeOf$4=objectIsPrototypeOf,regExpFlags=regexpFlags$1,RegExpPrototype$2=RegExp.prototype,regexpGetFlags=function(t){var e=t.flags;return void 0!==e||"flags"in RegExpPrototype$2||hasOwn$6(t,"flags")||!isPrototypeOf$4(RegExpPrototype$2,t)?e:call$j(regExpFlags,t)},PROPER_FUNCTION_NAME$3=functionName.PROPER,defineBuiltIn$8=defineBuiltIn$b,anObject$9=anObject$f,$toString$1=toString$5,fails$p=fails$z,getRegExpFlags=regexpGetFlags,TO_STRING="toString",RegExpPrototype$1=RegExp.prototype,nativeToString=RegExpPrototype$1[TO_STRING],NOT_GENERIC=fails$p((function(){return"/a/b"!=nativeToString.call({source:"a",flags:"b"})})),INCORRECT_NAME=PROPER_FUNCTION_NAME$3&&nativeToString.name!=TO_STRING;(NOT_GENERIC||INCORRECT_NAME)&&defineBuiltIn$8(RegExp.prototype,TO_STRING,(function(){var t=anObject$9(this);return"/"+$toString$1(t.source)+"/"+$toString$1(getRegExpFlags(t))}),{unsafe:!0});var $TypeError$b=TypeError,MAX_SAFE_INTEGER=9007199254740991,doesNotExceedSafeInteger$1=function(t){if(t>MAX_SAFE_INTEGER)throw $TypeError$b("Maximum allowed index exceeded");return t},toPropertyKey$1=toPropertyKey$4,definePropertyModule$1=objectDefineProperty,createPropertyDescriptor$3=createPropertyDescriptor$6,createProperty$3=function(t,e,r){var n=toPropertyKey$1(e);n in t?definePropertyModule$1.f(t,n,createPropertyDescriptor$3(0,r)):t[n]=r},fails$o=fails$z,wellKnownSymbol$i=wellKnownSymbol$o,V8_VERSION$2=engineV8Version,SPECIES$5=wellKnownSymbol$i("species"),arrayMethodHasSpeciesSupport$4=function(t){return V8_VERSION$2>=51||!fails$o((function(){var e=[];return(e.constructor={})[SPECIES$5]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},$$k=_export,fails$n=fails$z,isArray$2=isArray$4,isObject$9=isObject$g,toObject$8=toObject$b,lengthOfArrayLike$a=lengthOfArrayLike$d,doesNotExceedSafeInteger=doesNotExceedSafeInteger$1,createProperty$2=createProperty$3,arraySpeciesCreate=arraySpeciesCreate$2,arrayMethodHasSpeciesSupport$3=arrayMethodHasSpeciesSupport$4,wellKnownSymbol$h=wellKnownSymbol$o,V8_VERSION$1=engineV8Version,IS_CONCAT_SPREADABLE=wellKnownSymbol$h("isConcatSpreadable"),IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION$1>=51||!fails$n((function(){var t=[];return t[IS_CONCAT_SPREADABLE]=!1,t.concat()[0]!==t})),isConcatSpreadable=function(t){if(!isObject$9(t))return!1;var e=t[IS_CONCAT_SPREADABLE];return void 0!==e?!!e:isArray$2(t)},FORCED$4=!IS_CONCAT_SPREADABLE_SUPPORT||!arrayMethodHasSpeciesSupport$3("concat");$$k({target:"Array",proto:!0,arity:1,forced:FORCED$4},{concat:function(t){var e,r,n,o,i,a=toObject$8(this),s=arraySpeciesCreate(a,0),c=0;for(e=-1,n=arguments.length;e<n;e++)if(isConcatSpreadable(i=-1===e?a:arguments[e]))for(o=lengthOfArrayLike$a(i),doesNotExceedSafeInteger(c+o),r=0;r<o;r++,c++)r in i&&createProperty$2(s,c,i[r]);else doesNotExceedSafeInteger(c+1),createProperty$2(s,c++,i);return s.length=c,s}});var $$j=_export,$includes$1=arrayIncludes.includes,fails$m=fails$z,addToUnscopables$1=addToUnscopables$3,BROKEN_ON_SPARSE=fails$m((function(){return!Array(1).includes()}));$$j({target:"Array",proto:!0,forced:BROKEN_ON_SPARSE},{includes:function(t){return $includes$1(this,t,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables$1("includes");var DESCRIPTORS$7=descriptors,uncurryThis$h=functionUncurryThis,call$i=functionCall,fails$l=fails$z,objectKeys=objectKeys$2,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,propertyIsEnumerableModule=objectPropertyIsEnumerable,toObject$7=toObject$b,IndexedObject$2=indexedObject,$assign=Object.assign,defineProperty$3=Object.defineProperty,concat$1=uncurryThis$h([].concat),objectAssign=!$assign||fails$l((function(){if(DESCRIPTORS$7&&1!==$assign({b:1},$assign(defineProperty$3({},"a",{enumerable:!0,get:function(){defineProperty$3(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach((function(t){e[t]=t})),7!=$assign({},t)[r]||objectKeys($assign({},e)).join("")!=n}))?function(t,e){for(var r=toObject$7(t),n=arguments.length,o=1,i=getOwnPropertySymbolsModule.f,a=propertyIsEnumerableModule.f;n>o;)for(var s,c=IndexedObject$2(arguments[o++]),u=i?concat$1(objectKeys(c),i(c)):objectKeys(c),l=u.length,f=0;l>f;)s=u[f++],DESCRIPTORS$7&&!call$i(a,c,s)||(r[s]=c[s]);return r}:$assign,$$i=_export,assign$5=objectAssign;$$i({target:"Object",stat:!0,arity:2,forced:Object.assign!==assign$5},{assign:assign$5});var runtime={exports:{}};
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
function __rest$1(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function __awaiter(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}!function(t){var e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof $?e:$,i=Object.create(o.prototype),a=new w(n||[]);return i._invoke=function(t,e,r){var n=f;return function(o,i){if(n===d)throw new Error("Generator is already running");if(n===y){if("throw"===o)throw i;return R()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=T(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var c=l(t,e,r);if("normal"===c.type){if(n=r.done?y:p,c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=y,r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",d="executing",y="completed",h={};function $(){}function g(){}function v(){}var b={};c(b,i,(function(){return this}));var S=Object.getPrototypeOf,O=S&&S(S(P([])));O&&O!==r&&n.call(O,i)&&(b=O);var I=v.prototype=$.prototype=Object.create(b);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function T(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=l(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function P(t){if(t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:R}}function R(){return{value:e,done:!0}}return g.prototype=v,c(I,"constructor",v),c(v,"constructor",g),g.displayName=c(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,s,"GeneratorFunction")),t.prototype=Object.create(I),t},t.awrap=function(t){return{__await:t}},m(A.prototype),c(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(I),c(I,s,"Generator"),c(I,i,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(runtime);var eventemitter3={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(t,e,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,i||t,a),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],s]:t._events[c].push(s):(t._events[c]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)e.call(t,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},s.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},s.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},s.prototype.emit=function(t,e,n,o,i,a){var s=r?r+t:t;if(!this._events[s])return!1;var c,u,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,o),!0;case 5:return l.fn.call(l.context,e,n,o,i),!0;case 6:return l.fn.call(l.context,e,n,o,i,a),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,o);break;default:if(!c)for(p=1,c=new Array(f-1);p<f;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(t,e,r){return i(this,t,e,r,!1)},s.prototype.once=function(t,e,r){return i(this,t,e,r,!0)},s.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||o&&!s.once||n&&s.context!==n||a(this,i);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==e||o&&!s[c].once||n&&s[c].context!==n)&&u.push(s[c]);u.length?this._events[i]=1===u.length?u[0]:u:a(this,i)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s}(eventemitter3);var eventemitter3Exports=eventemitter3.exports,EventEmitter$1=getDefaultExportFromCjs(eventemitter3Exports),iterators={},fails$k=fails$z,correctPrototypeGetter=!fails$k((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),hasOwn$5=hasOwnProperty_1,isCallable$c=isCallable$p,toObject$6=toObject$b,sharedKey=sharedKey$3,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,IE_PROTO=sharedKey("IE_PROTO"),$Object=Object,ObjectPrototype$2=$Object.prototype,objectGetPrototypeOf=CORRECT_PROTOTYPE_GETTER?$Object.getPrototypeOf:function(t){var e=toObject$6(t);if(hasOwn$5(e,IE_PROTO))return e[IE_PROTO];var r=e.constructor;return isCallable$c(r)&&e instanceof r?r.prototype:e instanceof $Object?ObjectPrototype$2:null},fails$j=fails$z,isCallable$b=isCallable$p,isObject$8=isObject$g,getPrototypeOf$3=objectGetPrototypeOf,defineBuiltIn$7=defineBuiltIn$b,wellKnownSymbol$g=wellKnownSymbol$o,ITERATOR$8=wellKnownSymbol$g("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf$3(getPrototypeOf$3(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0);var NEW_ITERATOR_PROTOTYPE=!isObject$8(IteratorPrototype$2)||fails$j((function(){var t={};return IteratorPrototype$2[ITERATOR$8].call(t)!==t}));NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={}),isCallable$b(IteratorPrototype$2[ITERATOR$8])||defineBuiltIn$7(IteratorPrototype$2,ITERATOR$8,(function(){return this}));var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},defineProperty$2=objectDefineProperty.f,hasOwn$4=hasOwnProperty_1,wellKnownSymbol$f=wellKnownSymbol$o,TO_STRING_TAG$2=wellKnownSymbol$f("toStringTag"),setToStringTag$5=function(t,e,r){t&&!r&&(t=t.prototype),t&&!hasOwn$4(t,TO_STRING_TAG$2)&&defineProperty$2(t,TO_STRING_TAG$2,{configurable:!0,value:e})},IteratorPrototype$1=iteratorsCore.IteratorPrototype,create$5=objectCreate,createPropertyDescriptor$2=createPropertyDescriptor$6,setToStringTag$4=setToStringTag$5,Iterators$4=iterators,returnThis$1=function(){return this},iteratorCreateConstructor=function(t,e,r,n){var o=e+" Iterator";return t.prototype=create$5(IteratorPrototype$1,{next:createPropertyDescriptor$2(+!n,r)}),setToStringTag$4(t,o,!1),Iterators$4[o]=returnThis$1,t},uncurryThis$g=functionUncurryThis,aCallable$7=aCallable$a,functionUncurryThisAccessor=function(t,e,r){try{return uncurryThis$g(aCallable$7(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}},isCallable$a=isCallable$p,$String=String,$TypeError$a=TypeError,aPossiblePrototype$1=function(t){if("object"==typeof t||isCallable$a(t))return t;throw $TypeError$a("Can't set "+$String(t)+" as a prototype")},uncurryThisAccessor=functionUncurryThisAccessor,anObject$8=anObject$f,aPossiblePrototype=aPossiblePrototype$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=uncurryThisAccessor(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return anObject$8(r),aPossiblePrototype(n),e?t(r,n):r.__proto__=n,r}}():void 0),$$h=_export,call$h=functionCall,FunctionName$1=functionName,isCallable$9=isCallable$p,createIteratorConstructor$1=iteratorCreateConstructor,getPrototypeOf$2=objectGetPrototypeOf,setPrototypeOf$5=objectSetPrototypeOf,setToStringTag$3=setToStringTag$5,createNonEnumerableProperty$5=createNonEnumerableProperty$8,defineBuiltIn$6=defineBuiltIn$b,wellKnownSymbol$e=wellKnownSymbol$o,Iterators$3=iterators,IteratorsCore=iteratorsCore,PROPER_FUNCTION_NAME$2=FunctionName$1.PROPER,CONFIGURABLE_FUNCTION_NAME$1=FunctionName$1.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$7=wellKnownSymbol$e("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},iteratorDefine=function(t,e,r,n,o,i,a){createIteratorConstructor$1(r,e,n);var s,c,u,l=function(t){if(t===o&&h)return h;if(!BUGGY_SAFARI_ITERATORS&&t in d)return d[t];switch(t){case KEYS:case VALUES:case ENTRIES:return function(){return new r(this,t)}}return function(){return new r(this)}},f=e+" Iterator",p=!1,d=t.prototype,y=d[ITERATOR$7]||d["@@iterator"]||o&&d[o],h=!BUGGY_SAFARI_ITERATORS&&y||l(o),$="Array"==e&&d.entries||y;if($&&(s=getPrototypeOf$2($.call(new t)))!==Object.prototype&&s.next&&(getPrototypeOf$2(s)!==IteratorPrototype&&(setPrototypeOf$5?setPrototypeOf$5(s,IteratorPrototype):isCallable$9(s[ITERATOR$7])||defineBuiltIn$6(s,ITERATOR$7,returnThis)),setToStringTag$3(s,f,!0)),PROPER_FUNCTION_NAME$2&&o==VALUES&&y&&y.name!==VALUES&&(CONFIGURABLE_FUNCTION_NAME$1?createNonEnumerableProperty$5(d,"name",VALUES):(p=!0,h=function(){return call$h(y,this)})),o)if(c={values:l(VALUES),keys:i?h:l(KEYS),entries:l(ENTRIES)},a)for(u in c)(BUGGY_SAFARI_ITERATORS||p||!(u in d))&&defineBuiltIn$6(d,u,c[u]);else $$h({target:e,proto:!0,forced:BUGGY_SAFARI_ITERATORS||p},c);return d[ITERATOR$7]!==h&&defineBuiltIn$6(d,ITERATOR$7,h,{name:o}),Iterators$3[e]=h,c},createIterResultObject$2=function(t,e){return{value:t,done:e}},toIndexedObject$4=toIndexedObject$9,addToUnscopables=addToUnscopables$3,Iterators$2=iterators,InternalStateModule$6=internalState,defineProperty$1=objectDefineProperty.f,defineIterator$1=iteratorDefine,createIterResultObject$1=createIterResultObject$2,DESCRIPTORS$6=descriptors,ARRAY_ITERATOR="Array Iterator",setInternalState$5=InternalStateModule$6.set,getInternalState$4=InternalStateModule$6.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator$1(Array,"Array",(function(t,e){setInternalState$5(this,{type:ARRAY_ITERATOR,target:toIndexedObject$4(t),index:0,kind:e})}),(function(){var t=getInternalState$4(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,createIterResultObject$1(void 0,!0)):createIterResultObject$1("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)}),"values"),values=Iterators$2.Arguments=Iterators$2.Array;if(addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries"),DESCRIPTORS$6&&"values"!==values.name)try{defineProperty$1(values,"name",{value:"values"})}catch(error){}var uncurryThis$f=functionUncurryThis,toIntegerOrInfinity$5=toIntegerOrInfinity$8,toString$4=toString$5,requireObjectCoercible$2=requireObjectCoercible$5,charAt$5=uncurryThis$f("".charAt),charCodeAt=uncurryThis$f("".charCodeAt),stringSlice$4=uncurryThis$f("".slice),createMethod$2=function(t){return function(e,r){var n,o,i=toString$4(requireObjectCoercible$2(e)),a=toIntegerOrInfinity$5(r),s=i.length;return a<0||a>=s?t?"":void 0:(n=charCodeAt(i,a))<55296||n>56319||a+1===s||(o=charCodeAt(i,a+1))<56320||o>57343?t?charAt$5(i,a):n:t?stringSlice$4(i,a,a+2):o-56320+(n-55296<<10)+65536}},stringMultibyte={codeAt:createMethod$2(!1),charAt:createMethod$2(!0)},charAt$4=stringMultibyte.charAt,toString$3=toString$5,InternalStateModule$5=internalState,defineIterator=iteratorDefine,createIterResultObject=createIterResultObject$2,STRING_ITERATOR="String Iterator",setInternalState$4=InternalStateModule$5.set,getInternalState$3=InternalStateModule$5.getterFor(STRING_ITERATOR);defineIterator(String,"String",(function(t){setInternalState$4(this,{type:STRING_ITERATOR,string:toString$3(t),index:0})}),(function(){var t,e=getInternalState$3(this),r=e.string,n=e.index;return n>=r.length?createIterResultObject(void 0,!0):(t=charAt$4(r,n),e.index+=t.length,createIterResultObject(t,!1))}));var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},documentCreateElement=documentCreateElement$2,classList=documentCreateElement("span").classList,DOMTokenListPrototype$1=classList&&classList.constructor&&classList.constructor.prototype,domTokenListPrototype=DOMTokenListPrototype$1===Object.prototype?void 0:DOMTokenListPrototype$1,global$k=global$u,DOMIterables=domIterables,DOMTokenListPrototype=domTokenListPrototype,ArrayIteratorMethods=es_array_iterator,createNonEnumerableProperty$4=createNonEnumerableProperty$8,wellKnownSymbol$d=wellKnownSymbol$o,ITERATOR$6=wellKnownSymbol$d("iterator"),TO_STRING_TAG$1=wellKnownSymbol$d("toStringTag"),ArrayValues=ArrayIteratorMethods.values,handlePrototype=function(t,e){if(t){if(t[ITERATOR$6]!==ArrayValues)try{createNonEnumerableProperty$4(t,ITERATOR$6,ArrayValues)}catch(e){t[ITERATOR$6]=ArrayValues}if(t[TO_STRING_TAG$1]||createNonEnumerableProperty$4(t,TO_STRING_TAG$1,e),DOMIterables[e])for(var r in ArrayIteratorMethods)if(t[r]!==ArrayIteratorMethods[r])try{createNonEnumerableProperty$4(t,r,ArrayIteratorMethods[r])}catch(e){t[r]=ArrayIteratorMethods[r]}}};for(var COLLECTION_NAME in DOMIterables)handlePrototype(global$k[COLLECTION_NAME]&&global$k[COLLECTION_NAME].prototype,COLLECTION_NAME);handlePrototype(DOMTokenListPrototype,"DOMTokenList");var fails$i=fails$z,wellKnownSymbol$c=wellKnownSymbol$o,DESCRIPTORS$5=descriptors,IS_PURE=isPure,ITERATOR$5=wellKnownSymbol$c("iterator"),urlConstructorDetection=!fails$i((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,r="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),r+=n+t})),IS_PURE&&!t.toJSON||!e.size&&(IS_PURE||!DESCRIPTORS$5)||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[ITERATOR$5]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),makeBuiltIn=makeBuiltInExports,defineProperty=objectDefineProperty,defineBuiltInAccessor$5=function(t,e,r){return r.get&&makeBuiltIn(r.get,e,{getter:!0}),r.set&&makeBuiltIn(r.set,e,{setter:!0}),defineProperty.f(t,e,r)},defineBuiltIn$5=defineBuiltIn$b,defineBuiltIns$2=function(t,e,r){for(var n in e)defineBuiltIn$5(t,n,e[n],r);return t},isPrototypeOf$3=objectIsPrototypeOf,$TypeError$9=TypeError,anInstance$4=function(t,e){if(isPrototypeOf$3(e,t))return t;throw $TypeError$9("Incorrect invocation")},classof$7=classof$b,getMethod$2=getMethod$4,isNullOrUndefined$2=isNullOrUndefined$5,Iterators$1=iterators,wellKnownSymbol$b=wellKnownSymbol$o,ITERATOR$4=wellKnownSymbol$b("iterator"),getIteratorMethod$4=function(t){if(!isNullOrUndefined$2(t))return getMethod$2(t,ITERATOR$4)||getMethod$2(t,"@@iterator")||Iterators$1[classof$7(t)]},call$g=functionCall,aCallable$6=aCallable$a,anObject$7=anObject$f,tryToString$4=tryToString$6,getIteratorMethod$3=getIteratorMethod$4,$TypeError$8=TypeError,getIterator$3=function(t,e){var r=arguments.length<2?getIteratorMethod$3(t):e;if(aCallable$6(r))return anObject$7(call$g(r,t));throw $TypeError$8(tryToString$4(t)+" is not iterable")},$TypeError$7=TypeError,validateArgumentsLength$2=function(t,e){if(t<e)throw $TypeError$7("Not enough arguments");return t},toAbsoluteIndex$4=toAbsoluteIndex$6,lengthOfArrayLike$9=lengthOfArrayLike$d,createProperty$1=createProperty$3,$Array$2=Array,max$2=Math.max,arraySliceSimple=function(t,e,r){for(var n=lengthOfArrayLike$9(t),o=toAbsoluteIndex$4(e,n),i=toAbsoluteIndex$4(void 0===r?n:r,n),a=$Array$2(max$2(i-o,0)),s=0;o<i;o++,s++)createProperty$1(a,s,t[o]);return a.length=s,a},arraySlice$5=arraySliceSimple,floor$4=Math.floor,mergeSort=function(t,e){var r=t.length,n=floor$4(r/2);return r<8?insertionSort(t,e):merge(t,mergeSort(arraySlice$5(t,0,n),e),mergeSort(arraySlice$5(t,n),e),e)},insertionSort=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},merge=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,s=0;a<o||s<i;)t[a+s]=a<o&&s<i?n(e[a],r[s])<=0?e[a++]:r[s++]:a<o?e[a++]:r[s++];return t},arraySort$1=mergeSort,$$g=_export,global$j=global$u,call$f=functionCall,uncurryThis$e=functionUncurryThis,DESCRIPTORS$4=descriptors,USE_NATIVE_URL=urlConstructorDetection,defineBuiltIn$4=defineBuiltIn$b,defineBuiltInAccessor$4=defineBuiltInAccessor$5,defineBuiltIns$1=defineBuiltIns$2,setToStringTag$2=setToStringTag$5,createIteratorConstructor=iteratorCreateConstructor,InternalStateModule$4=internalState,anInstance$3=anInstance$4,isCallable$8=isCallable$p,hasOwn$3=hasOwnProperty_1,bind$5=functionBindContext,classof$6=classof$b,anObject$6=anObject$f,isObject$7=isObject$g,$toString=toString$5,create$4=objectCreate,createPropertyDescriptor$1=createPropertyDescriptor$6,getIterator$2=getIterator$3,getIteratorMethod$2=getIteratorMethod$4,validateArgumentsLength$1=validateArgumentsLength$2,wellKnownSymbol$a=wellKnownSymbol$o,arraySort=arraySort$1,ITERATOR$3=wellKnownSymbol$a("iterator"),URL_SEARCH_PARAMS="URLSearchParams",URL_SEARCH_PARAMS_ITERATOR=URL_SEARCH_PARAMS+"Iterator",setInternalState$3=InternalStateModule$4.set,getInternalParamsState=InternalStateModule$4.getterFor(URL_SEARCH_PARAMS),getInternalIteratorState=InternalStateModule$4.getterFor(URL_SEARCH_PARAMS_ITERATOR),getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,safeGetBuiltIn=function(t){if(!DESCRIPTORS$4)return global$j[t];var e=getOwnPropertyDescriptor$1(global$j,t);return e&&e.value},nativeFetch=safeGetBuiltIn("fetch"),NativeRequest=safeGetBuiltIn("Request"),Headers=safeGetBuiltIn("Headers"),RequestPrototype=NativeRequest&&NativeRequest.prototype,HeadersPrototype=Headers&&Headers.prototype,RegExp$1=global$j.RegExp,TypeError$3=global$j.TypeError,decodeURIComponent=global$j.decodeURIComponent,encodeURIComponent=global$j.encodeURIComponent,charAt$3=uncurryThis$e("".charAt),join$2=uncurryThis$e([].join),push$1=uncurryThis$e([].push),replace$3=uncurryThis$e("".replace),shift=uncurryThis$e([].shift),splice=uncurryThis$e([].splice),split=uncurryThis$e("".split),stringSlice$3=uncurryThis$e("".slice),plus=/\+/g,sequences=Array(4),percentSequence=function(t){return sequences[t-1]||(sequences[t-1]=RegExp$1("((?:%[\\da-f]{2}){"+t+"})","gi"))},percentDecode=function(t){try{return decodeURIComponent(t)}catch(e){return t}},deserialize=function(t){var e=replace$3(t,plus," "),r=4;try{return decodeURIComponent(e)}catch(t){for(;r;)e=replace$3(e,percentSequence(r--),percentDecode);return e}},find=/[!'()~]|%20/g,replacements={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(t){return replacements[t]},serialize=function(t){return replace$3(encodeURIComponent(t),find,replacer)},URLSearchParamsIterator=createIteratorConstructor((function(t,e){setInternalState$3(this,{type:URL_SEARCH_PARAMS_ITERATOR,iterator:getIterator$2(getInternalParamsState(t).entries),kind:e})}),"Iterator",(function(){var t=getInternalIteratorState(this),e=t.kind,r=t.iterator.next(),n=r.value;return r.done||(r.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),r}),!0),URLSearchParamsState=function(t){this.entries=[],this.url=null,void 0!==t&&(isObject$7(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===charAt$3(t,0)?stringSlice$3(t,1):t:$toString(t)))};URLSearchParamsState.prototype={type:URL_SEARCH_PARAMS,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,n,o,i,a,s,c=getIteratorMethod$2(t);if(c)for(r=(e=getIterator$2(t,c)).next;!(n=call$f(r,e)).done;){if(i=(o=getIterator$2(anObject$6(n.value))).next,(a=call$f(i,o)).done||(s=call$f(i,o)).done||!call$f(i,o).done)throw TypeError$3("Expected sequence with length 2");push$1(this.entries,{key:$toString(a.value),value:$toString(s.value)})}else for(var u in t)hasOwn$3(t,u)&&push$1(this.entries,{key:u,value:$toString(t[u])})},parseQuery:function(t){if(t)for(var e,r,n=split(t,"&"),o=0;o<n.length;)(e=n[o++]).length&&(r=split(e,"="),push$1(this.entries,{key:deserialize(shift(r)),value:deserialize(join$2(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],n=0;n<e.length;)t=e[n++],push$1(r,serialize(t.key)+"="+serialize(t.value));return join$2(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var URLSearchParamsConstructor=function(){anInstance$3(this,URLSearchParamsPrototype);var t=setInternalState$3(this,new URLSearchParamsState(arguments.length>0?arguments[0]:void 0));DESCRIPTORS$4||(this.length=t.entries.length)},URLSearchParamsPrototype=URLSearchParamsConstructor.prototype;if(defineBuiltIns$1(URLSearchParamsPrototype,{append:function(t,e){validateArgumentsLength$1(arguments.length,2);var r=getInternalParamsState(this);push$1(r.entries,{key:$toString(t),value:$toString(e)}),DESCRIPTORS$4||this.length++,r.updateURL()},delete:function(t){validateArgumentsLength$1(arguments.length,1);for(var e=getInternalParamsState(this),r=e.entries,n=$toString(t),o=0;o<r.length;)r[o].key===n?splice(r,o,1):o++;DESCRIPTORS$4||(this.length=r.length),e.updateURL()},get:function(t){validateArgumentsLength$1(arguments.length,1);for(var e=getInternalParamsState(this).entries,r=$toString(t),n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){validateArgumentsLength$1(arguments.length,1);for(var e=getInternalParamsState(this).entries,r=$toString(t),n=[],o=0;o<e.length;o++)e[o].key===r&&push$1(n,e[o].value);return n},has:function(t){validateArgumentsLength$1(arguments.length,1);for(var e=getInternalParamsState(this).entries,r=$toString(t),n=0;n<e.length;)if(e[n++].key===r)return!0;return!1},set:function(t,e){validateArgumentsLength$1(arguments.length,1);for(var r,n=getInternalParamsState(this),o=n.entries,i=!1,a=$toString(t),s=$toString(e),c=0;c<o.length;c++)(r=o[c]).key===a&&(i?splice(o,c--,1):(i=!0,r.value=s));i||push$1(o,{key:a,value:s}),DESCRIPTORS$4||(this.length=o.length),n.updateURL()},sort:function(){var t=getInternalParamsState(this);arraySort(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,r=getInternalParamsState(this).entries,n=bind$5(t,arguments.length>1?arguments[1]:void 0),o=0;o<r.length;)n((e=r[o++]).value,e.key,this)},keys:function(){return new URLSearchParamsIterator(this,"keys")},values:function(){return new URLSearchParamsIterator(this,"values")},entries:function(){return new URLSearchParamsIterator(this,"entries")}},{enumerable:!0}),defineBuiltIn$4(URLSearchParamsPrototype,ITERATOR$3,URLSearchParamsPrototype.entries,{name:"entries"}),defineBuiltIn$4(URLSearchParamsPrototype,"toString",(function(){return getInternalParamsState(this).serialize()}),{enumerable:!0}),DESCRIPTORS$4&&defineBuiltInAccessor$4(URLSearchParamsPrototype,"size",{get:function(){return getInternalParamsState(this).entries.length},configurable:!0,enumerable:!0}),setToStringTag$2(URLSearchParamsConstructor,URL_SEARCH_PARAMS),$$g({global:!0,constructor:!0,forced:!USE_NATIVE_URL},{URLSearchParams:URLSearchParamsConstructor}),!USE_NATIVE_URL&&isCallable$8(Headers)){var headersHas=uncurryThis$e(HeadersPrototype.has),headersSet=uncurryThis$e(HeadersPrototype.set),wrapRequestOptions=function(t){if(isObject$7(t)){var e,r=t.body;if(classof$6(r)===URL_SEARCH_PARAMS)return e=t.headers?new Headers(t.headers):new Headers,headersHas(e,"content-type")||headersSet(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),create$4(t,{body:createPropertyDescriptor$1(0,$toString(r)),headers:createPropertyDescriptor$1(0,e)})}return t};if(isCallable$8(nativeFetch)&&$$g({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return nativeFetch(t,arguments.length>1?wrapRequestOptions(arguments[1]):{})}}),isCallable$8(NativeRequest)){var RequestConstructor=function(t){return anInstance$3(this,RequestPrototype),new NativeRequest(t,arguments.length>1?wrapRequestOptions(arguments[1]):{})};RequestPrototype.constructor=RequestConstructor,RequestConstructor.prototype=RequestPrototype,$$g({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:RequestConstructor})}}var classof$5=classofRaw$2,engineIsNode="undefined"!=typeof process&&"process"==classof$5(process),getBuiltIn$2=getBuiltIn$7,defineBuiltInAccessor$3=defineBuiltInAccessor$5,wellKnownSymbol$9=wellKnownSymbol$o,DESCRIPTORS$3=descriptors,SPECIES$4=wellKnownSymbol$9("species"),setSpecies$3=function(t){var e=getBuiltIn$2(t);DESCRIPTORS$3&&e&&!e[SPECIES$4]&&defineBuiltInAccessor$3(e,SPECIES$4,{configurable:!0,get:function(){return this}})},isConstructor$1=isConstructor$3,tryToString$3=tryToString$6,$TypeError$6=TypeError,aConstructor$2=function(t){if(isConstructor$1(t))return t;throw $TypeError$6(tryToString$3(t)+" is not a constructor")},anObject$5=anObject$f,aConstructor$1=aConstructor$2,isNullOrUndefined$1=isNullOrUndefined$5,wellKnownSymbol$8=wellKnownSymbol$o,SPECIES$3=wellKnownSymbol$8("species"),speciesConstructor$2=function(t,e){var r,n=anObject$5(t).constructor;return void 0===n||isNullOrUndefined$1(r=anObject$5(n)[SPECIES$3])?e:aConstructor$1(r)},NATIVE_BIND=functionBindNative,FunctionPrototype=Function.prototype,apply$5=FunctionPrototype.apply,call$e=FunctionPrototype.call,functionApply="object"==typeof Reflect&&Reflect.apply||(NATIVE_BIND?call$e.bind(apply$5):function(){return call$e.apply(apply$5,arguments)}),uncurryThis$d=functionUncurryThis,arraySlice$4=uncurryThis$d([].slice),userAgent$4=engineUserAgent,engineIsIos=/(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent$4),global$i=global$u,apply$4=functionApply,bind$4=functionBindContext,isCallable$7=isCallable$p,hasOwn$2=hasOwnProperty_1,fails$h=fails$z,html=html$2,arraySlice$3=arraySlice$4,createElement=documentCreateElement$2,validateArgumentsLength=validateArgumentsLength$2,IS_IOS$1=engineIsIos,IS_NODE$3=engineIsNode,set$1=global$i.setImmediate,clear=global$i.clearImmediate,process$3=global$i.process,Dispatch=global$i.Dispatch,Function$1=global$i.Function,MessageChannel=global$i.MessageChannel,String$1=global$i.String,counter=0,queue$2={},ONREADYSTATECHANGE="onreadystatechange",$location,defer,channel,port;fails$h((function(){$location=global$i.location}));var run=function(t){if(hasOwn$2(queue$2,t)){var e=queue$2[t];delete queue$2[t],e()}},runner=function(t){return function(){run(t)}},eventListener=function(t){run(t.data)},globalPostMessageDefer=function(t){global$i.postMessage(String$1(t),$location.protocol+"//"+$location.host)};set$1&&clear||(set$1=function(t){validateArgumentsLength(arguments.length,1);var e=isCallable$7(t)?t:Function$1(t),r=arraySlice$3(arguments,1);return queue$2[++counter]=function(){apply$4(e,void 0,r)},defer(counter),counter},clear=function(t){delete queue$2[t]},IS_NODE$3?defer=function(t){process$3.nextTick(runner(t))}:Dispatch&&Dispatch.now?defer=function(t){Dispatch.now(runner(t))}:MessageChannel&&!IS_IOS$1?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=eventListener,defer=bind$4(port.postMessage,port)):global$i.addEventListener&&isCallable$7(global$i.postMessage)&&!global$i.importScripts&&$location&&"file:"!==$location.protocol&&!fails$h(globalPostMessageDefer)?(defer=globalPostMessageDefer,global$i.addEventListener("message",eventListener,!1)):defer=ONREADYSTATECHANGE in createElement("script")?function(t){html.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(t)}}:function(t){setTimeout(runner(t),0)});var task$1={set:set$1,clear:clear},Queue$2=function(){this.head=null,this.tail=null};Queue$2.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var queue$1=Queue$2,userAgent$3=engineUserAgent,engineIsIosPebble=/ipad|iphone|ipod/i.test(userAgent$3)&&"undefined"!=typeof Pebble,userAgent$2=engineUserAgent,engineIsWebosWebkit=/web0s(?!.*chrome)/i.test(userAgent$2),global$h=global$u,bind$3=functionBindContext,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,macrotask=task$1.set,Queue$1=queue$1,IS_IOS=engineIsIos,IS_IOS_PEBBLE=engineIsIosPebble,IS_WEBOS_WEBKIT=engineIsWebosWebkit,IS_NODE$2=engineIsNode,MutationObserver=global$h.MutationObserver||global$h.WebKitMutationObserver,document$2=global$h.document,process$2=global$h.process,Promise$1=global$h.Promise,queueMicrotaskDescriptor=getOwnPropertyDescriptor(global$h,"queueMicrotask"),microtask$1=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,notify$1,toggle,node,promise,then;if(!microtask$1){var queue=new Queue$1,flush=function(){var t,e;for(IS_NODE$2&&(t=process$2.domain)&&t.exit();e=queue.get();)try{e()}catch(t){throw queue.head&&notify$1(),t}t&&t.enter()};IS_IOS||IS_NODE$2||IS_WEBOS_WEBKIT||!MutationObserver||!document$2?!IS_IOS_PEBBLE&&Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),promise.constructor=Promise$1,then=bind$3(promise.then,promise),notify$1=function(){then(flush)}):IS_NODE$2?notify$1=function(){process$2.nextTick(flush)}:(macrotask=bind$3(macrotask,global$h),notify$1=function(){macrotask(flush)}):(toggle=!0,node=document$2.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),notify$1=function(){node.data=toggle=!toggle}),microtask$1=function(t){queue.head||notify$1(),queue.add(t)}}var microtask_1=microtask$1,hostReportErrors$1=function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}},perform$3=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},global$g=global$u,promiseNativeConstructor=global$g.Promise,engineIsDeno="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,IS_DENO$1=engineIsDeno,IS_NODE$1=engineIsNode,engineIsBrowser=!IS_DENO$1&&!IS_NODE$1&&"object"==typeof window&&"object"==typeof document,global$f=global$u,NativePromiseConstructor$3=promiseNativeConstructor,isCallable$6=isCallable$p,isForced=isForced_1,inspectSource=inspectSource$3,wellKnownSymbol$7=wellKnownSymbol$o,IS_BROWSER=engineIsBrowser,IS_DENO=engineIsDeno,V8_VERSION=engineV8Version;NativePromiseConstructor$3&&NativePromiseConstructor$3.prototype;var SPECIES$2=wellKnownSymbol$7("species"),SUBCLASSING=!1,NATIVE_PROMISE_REJECTION_EVENT$1=isCallable$6(global$f.PromiseRejectionEvent),FORCED_PROMISE_CONSTRUCTOR$5=isForced("Promise",(function(){var t=inspectSource(NativePromiseConstructor$3),e=t!==String(NativePromiseConstructor$3);if(!e&&66===V8_VERSION)return!0;if(!V8_VERSION||V8_VERSION<51||!/native code/.test(t)){var r=new NativePromiseConstructor$3((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[SPECIES$2]=n,!(SUBCLASSING=r.then((function(){}))instanceof n))return!0}return!e&&(IS_BROWSER||IS_DENO)&&!NATIVE_PROMISE_REJECTION_EVENT$1})),promiseConstructorDetection={CONSTRUCTOR:FORCED_PROMISE_CONSTRUCTOR$5,REJECTION_EVENT:NATIVE_PROMISE_REJECTION_EVENT$1,SUBCLASSING:SUBCLASSING},newPromiseCapability$2={},aCallable$5=aCallable$a,$TypeError$5=TypeError,PromiseCapability=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw $TypeError$5("Bad Promise constructor");e=t,r=n})),this.resolve=aCallable$5(e),this.reject=aCallable$5(r)};newPromiseCapability$2.f=function(t){return new PromiseCapability(t)};var $$f=_export,IS_NODE=engineIsNode,global$e=global$u,call$d=functionCall,defineBuiltIn$3=defineBuiltIn$b,setPrototypeOf$4=objectSetPrototypeOf,setToStringTag$1=setToStringTag$5,setSpecies$2=setSpecies$3,aCallable$4=aCallable$a,isCallable$5=isCallable$p,isObject$6=isObject$g,anInstance$2=anInstance$4,speciesConstructor$1=speciesConstructor$2,task=task$1.set,microtask=microtask_1,hostReportErrors=hostReportErrors$1,perform$2=perform$3,Queue=queue$1,InternalStateModule$3=internalState,NativePromiseConstructor$2=promiseNativeConstructor,PromiseConstructorDetection=promiseConstructorDetection,newPromiseCapabilityModule$3=newPromiseCapability$2,PROMISE="Promise",FORCED_PROMISE_CONSTRUCTOR$4=PromiseConstructorDetection.CONSTRUCTOR,NATIVE_PROMISE_REJECTION_EVENT=PromiseConstructorDetection.REJECTION_EVENT,NATIVE_PROMISE_SUBCLASSING=PromiseConstructorDetection.SUBCLASSING,getInternalPromiseState=InternalStateModule$3.getterFor(PROMISE),setInternalState$2=InternalStateModule$3.set,NativePromisePrototype$1=NativePromiseConstructor$2&&NativePromiseConstructor$2.prototype,PromiseConstructor=NativePromiseConstructor$2,PromisePrototype=NativePromisePrototype$1,TypeError$2=global$e.TypeError,document$1=global$e.document,process$1=global$e.process,newPromiseCapability$1=newPromiseCapabilityModule$3.f,newGenericPromiseCapability=newPromiseCapability$1,DISPATCH_EVENT=!!(document$1&&document$1.createEvent&&global$e.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,isThenable=function(t){var e;return!(!isObject$6(t)||!isCallable$5(e=t.then))&&e},callReaction=function(t,e){var r,n,o,i=e.value,a=e.state==FULFILLED,s=a?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(a||(e.rejection===UNHANDLED&&onHandleUnhandled(e),e.rejection=HANDLED),!0===s?r=i:(l&&l.enter(),r=s(i),l&&(l.exit(),o=!0)),r===t.promise?u(TypeError$2("Promise-chain cycle")):(n=isThenable(r))?call$d(n,r,c,u):c(r)):u(i)}catch(t){l&&!o&&l.exit(),u(t)}},notify=function(t,e){t.notified||(t.notified=!0,microtask((function(){for(var r,n=t.reactions;r=n.get();)callReaction(r,t);t.notified=!1,e&&!t.rejection&&onUnhandled(t)})))},dispatchEvent=function(t,e,r){var n,o;DISPATCH_EVENT?((n=document$1.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),global$e.dispatchEvent(n)):n={promise:e,reason:r},!NATIVE_PROMISE_REJECTION_EVENT&&(o=global$e["on"+t])?o(n):t===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",r)},onUnhandled=function(t){call$d(task,global$e,(function(){var e,r=t.facade,n=t.value;if(isUnhandled(t)&&(e=perform$2((function(){IS_NODE?process$1.emit("unhandledRejection",n,r):dispatchEvent(UNHANDLED_REJECTION,r,n)})),t.rejection=IS_NODE||isUnhandled(t)?UNHANDLED:HANDLED,e.error))throw e.value}))},isUnhandled=function(t){return t.rejection!==HANDLED&&!t.parent},onHandleUnhandled=function(t){call$d(task,global$e,(function(){var e=t.facade;IS_NODE?process$1.emit("rejectionHandled",e):dispatchEvent(REJECTION_HANDLED,e,t.value)}))},bind$2=function(t,e,r){return function(n){t(e,n,r)}},internalReject=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=REJECTED,notify(t,!0))},internalResolve=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw TypeError$2("Promise can't be resolved itself");var n=isThenable(e);n?microtask((function(){var r={done:!1};try{call$d(n,e,bind$2(internalResolve,r,t),bind$2(internalReject,r,t))}catch(e){internalReject(r,e,t)}})):(t.value=e,t.state=FULFILLED,notify(t,!1))}catch(e){internalReject({done:!1},e,t)}}};if(FORCED_PROMISE_CONSTRUCTOR$4&&(PromiseConstructor=function(t){anInstance$2(this,PromisePrototype),aCallable$4(t),call$d(Internal,this);var e=getInternalPromiseState(this);try{t(bind$2(internalResolve,e),bind$2(internalReject,e))}catch(t){internalReject(e,t)}},PromisePrototype=PromiseConstructor.prototype,Internal=function(t){setInternalState$2(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:new Queue,rejection:!1,state:PENDING,value:void 0})},Internal.prototype=defineBuiltIn$3(PromisePrototype,"then",(function(t,e){var r=getInternalPromiseState(this),n=newPromiseCapability$1(speciesConstructor$1(this,PromiseConstructor));return r.parent=!0,n.ok=!isCallable$5(t)||t,n.fail=isCallable$5(e)&&e,n.domain=IS_NODE?process$1.domain:void 0,r.state==PENDING?r.reactions.add(n):microtask((function(){callReaction(n,r)})),n.promise})),OwnPromiseCapability=function(){var t=new Internal,e=getInternalPromiseState(t);this.promise=t,this.resolve=bind$2(internalResolve,e),this.reject=bind$2(internalReject,e)},newPromiseCapabilityModule$3.f=newPromiseCapability$1=function(t){return t===PromiseConstructor||t===PromiseWrapper?new OwnPromiseCapability(t):newGenericPromiseCapability(t)},isCallable$5(NativePromiseConstructor$2)&&NativePromisePrototype$1!==Object.prototype)){nativeThen=NativePromisePrototype$1.then,NATIVE_PROMISE_SUBCLASSING||defineBuiltIn$3(NativePromisePrototype$1,"then",(function(t,e){var r=this;return new PromiseConstructor((function(t,e){call$d(nativeThen,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete NativePromisePrototype$1.constructor}catch(error){}setPrototypeOf$4&&setPrototypeOf$4(NativePromisePrototype$1,PromisePrototype)}$$f({global:!0,constructor:!0,wrap:!0,forced:FORCED_PROMISE_CONSTRUCTOR$4},{Promise:PromiseConstructor}),setToStringTag$1(PromiseConstructor,PROMISE,!1),setSpecies$2(PROMISE);var wellKnownSymbol$6=wellKnownSymbol$o,Iterators=iterators,ITERATOR$2=wellKnownSymbol$6("iterator"),ArrayPrototype=Array.prototype,isArrayIteratorMethod$2=function(t){return void 0!==t&&(Iterators.Array===t||ArrayPrototype[ITERATOR$2]===t)},call$c=functionCall,anObject$4=anObject$f,getMethod$1=getMethod$4,iteratorClose$1=function(t,e,r){var n,o;anObject$4(t);try{if(!(n=getMethod$1(t,"return"))){if("throw"===e)throw r;return r}n=call$c(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return anObject$4(n),r},bind$1=functionBindContext,call$b=functionCall,anObject$3=anObject$f,tryToString$2=tryToString$6,isArrayIteratorMethod$1=isArrayIteratorMethod$2,lengthOfArrayLike$8=lengthOfArrayLike$d,isPrototypeOf$2=objectIsPrototypeOf,getIterator$1=getIterator$3,getIteratorMethod$1=getIteratorMethod$4,iteratorClose=iteratorClose$1,$TypeError$4=TypeError,Result=function(t,e){this.stopped=t,this.result=e},ResultPrototype=Result.prototype,iterate$2=function(t,e,r){var n,o,i,a,s,c,u,l=r&&r.that,f=!(!r||!r.AS_ENTRIES),p=!(!r||!r.IS_RECORD),d=!(!r||!r.IS_ITERATOR),y=!(!r||!r.INTERRUPTED),h=bind$1(e,l),$=function(t){return n&&iteratorClose(n,"normal",t),new Result(!0,t)},g=function(t){return f?(anObject$3(t),y?h(t[0],t[1],$):h(t[0],t[1])):y?h(t,$):h(t)};if(p)n=t.iterator;else if(d)n=t;else{if(!(o=getIteratorMethod$1(t)))throw $TypeError$4(tryToString$2(t)+" is not iterable");if(isArrayIteratorMethod$1(o)){for(i=0,a=lengthOfArrayLike$8(t);a>i;i++)if((s=g(t[i]))&&isPrototypeOf$2(ResultPrototype,s))return s;return new Result(!1)}n=getIterator$1(t,o)}for(c=p?t.next:n.next;!(u=call$b(c,n)).done;){try{s=g(u.value)}catch(t){iteratorClose(n,"throw",t)}if("object"==typeof s&&s&&isPrototypeOf$2(ResultPrototype,s))return s}return new Result(!1)},wellKnownSymbol$5=wellKnownSymbol$o,ITERATOR$1=wellKnownSymbol$5("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$1]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(error){}var checkCorrectnessOfIteration$2=function(t,e){if(!e&&!SAFE_CLOSING)return!1;var r=!1;try{var n={};n[ITERATOR$1]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},NativePromiseConstructor$1=promiseNativeConstructor,checkCorrectnessOfIteration$1=checkCorrectnessOfIteration$2,FORCED_PROMISE_CONSTRUCTOR$3=promiseConstructorDetection.CONSTRUCTOR,promiseStaticsIncorrectIteration=FORCED_PROMISE_CONSTRUCTOR$3||!checkCorrectnessOfIteration$1((function(t){NativePromiseConstructor$1.all(t).then(void 0,(function(){}))})),$$e=_export,call$a=functionCall,aCallable$3=aCallable$a,newPromiseCapabilityModule$2=newPromiseCapability$2,perform$1=perform$3,iterate$1=iterate$2,PROMISE_STATICS_INCORRECT_ITERATION$1=promiseStaticsIncorrectIteration;$$e({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION$1},{all:function(t){var e=this,r=newPromiseCapabilityModule$2.f(e),n=r.resolve,o=r.reject,i=perform$1((function(){var r=aCallable$3(e.resolve),i=[],a=0,s=1;iterate$1(t,(function(t){var c=a++,u=!1;s++,call$a(r,e,t).then((function(t){u||(u=!0,i[c]=t,--s||n(i))}),o)})),--s||n(i)}));return i.error&&o(i.value),r.promise}});var $$d=_export,FORCED_PROMISE_CONSTRUCTOR$2=promiseConstructorDetection.CONSTRUCTOR,NativePromiseConstructor=promiseNativeConstructor,getBuiltIn$1=getBuiltIn$7,isCallable$4=isCallable$p,defineBuiltIn$2=defineBuiltIn$b,NativePromisePrototype=NativePromiseConstructor&&NativePromiseConstructor.prototype;if($$d({target:"Promise",proto:!0,forced:FORCED_PROMISE_CONSTRUCTOR$2,real:!0},{catch:function(t){return this.then(void 0,t)}}),isCallable$4(NativePromiseConstructor)){var method=getBuiltIn$1("Promise").prototype.catch;NativePromisePrototype.catch!==method&&defineBuiltIn$2(NativePromisePrototype,"catch",method,{unsafe:!0})}var $$c=_export,call$9=functionCall,aCallable$2=aCallable$a,newPromiseCapabilityModule$1=newPromiseCapability$2,perform=perform$3,iterate=iterate$2,PROMISE_STATICS_INCORRECT_ITERATION=promiseStaticsIncorrectIteration;$$c({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION},{race:function(t){var e=this,r=newPromiseCapabilityModule$1.f(e),n=r.reject,o=perform((function(){var o=aCallable$2(e.resolve);iterate(t,(function(t){call$9(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}});var $$b=_export,call$8=functionCall,newPromiseCapabilityModule=newPromiseCapability$2,FORCED_PROMISE_CONSTRUCTOR$1=promiseConstructorDetection.CONSTRUCTOR;$$b({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR$1},{reject:function(t){var e=newPromiseCapabilityModule.f(this);return call$8(e.reject,void 0,t),e.promise}});var anObject$2=anObject$f,isObject$5=isObject$g,newPromiseCapability=newPromiseCapability$2,promiseResolve$1=function(t,e){if(anObject$2(t),isObject$5(e)&&e.constructor===t)return e;var r=newPromiseCapability.f(t);return(0,r.resolve)(e),r.promise},$$a=_export,getBuiltIn=getBuiltIn$7,FORCED_PROMISE_CONSTRUCTOR=promiseConstructorDetection.CONSTRUCTOR,promiseResolve=promiseResolve$1;getBuiltIn("Promise"),$$a({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR},{resolve:function(t){return promiseResolve(this,t)}});var fails$g=fails$z,arrayMethodIsStrict$2=function(t,e){var r=[][t];return!!r&&fails$g((function(){r.call(null,e||function(){return 1},1)}))},$$9=_export,uncurryThis$c=functionUncurryThis,IndexedObject$1=indexedObject,toIndexedObject$3=toIndexedObject$9,arrayMethodIsStrict$1=arrayMethodIsStrict$2,nativeJoin=uncurryThis$c([].join),ES3_STRINGS=IndexedObject$1!=Object,FORCED$3=ES3_STRINGS||!arrayMethodIsStrict$1("join",",");$$9({target:"Array",proto:!0,forced:FORCED$3},{join:function(t){return nativeJoin(toIndexedObject$3(this),void 0===t?",":t)}});var $$8=_export,$filter$1=arrayIteration.filter,arrayMethodHasSpeciesSupport$2=arrayMethodHasSpeciesSupport$4,HAS_SPECIES_SUPPORT$2=arrayMethodHasSpeciesSupport$2("filter");$$8({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$2},{filter:function(t){return $filter$1(this,t,arguments.length>1?arguments[1]:void 0)}});var $$7=_export,$map$1=arrayIteration.map,arrayMethodHasSpeciesSupport$1=arrayMethodHasSpeciesSupport$4,HAS_SPECIES_SUPPORT$1=arrayMethodHasSpeciesSupport$1("map");$$7({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$1},{map:function(t){return $map$1(this,t,arguments.length>1?arguments[1]:void 0)}});var fails$f=fails$z,global$d=global$u,$RegExp$2=global$d.RegExp,UNSUPPORTED_Y$1=fails$f((function(){var t=$RegExp$2("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),MISSED_STICKY=UNSUPPORTED_Y$1||fails$f((function(){return!$RegExp$2("a","y").sticky})),BROKEN_CARET=UNSUPPORTED_Y$1||fails$f((function(){var t=$RegExp$2("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),regexpStickyHelpers={BROKEN_CARET:BROKEN_CARET,MISSED_STICKY:MISSED_STICKY,UNSUPPORTED_Y:UNSUPPORTED_Y$1},fails$e=fails$z,global$c=global$u,$RegExp$1=global$c.RegExp,regexpUnsupportedDotAll=fails$e((function(){var t=$RegExp$1(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),fails$d=fails$z,global$b=global$u,$RegExp=global$b.RegExp,regexpUnsupportedNcg=fails$d((function(){var t=$RegExp("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),call$7=functionCall,uncurryThis$b=functionUncurryThis,toString$2=toString$5,regexpFlags=regexpFlags$1,stickyHelpers=regexpStickyHelpers,shared=sharedExports,create$3=objectCreate,getInternalState$2=internalState.get,UNSUPPORTED_DOT_ALL=regexpUnsupportedDotAll,UNSUPPORTED_NCG=regexpUnsupportedNcg,nativeReplace=shared("native-string-replace",String.prototype.replace),nativeExec=RegExp.prototype.exec,patchedExec=nativeExec,charAt$2=uncurryThis$b("".charAt),indexOf=uncurryThis$b("".indexOf),replace$2=uncurryThis$b("".replace),stringSlice$2=uncurryThis$b("".slice),UPDATES_LAST_INDEX_WRONG=(re1=/a/,re2=/b*/g,call$7(nativeExec,re1,"a"),call$7(nativeExec,re2,"a"),0!==re1.lastIndex||0!==re2.lastIndex),re1,re2,UNSUPPORTED_Y=stickyHelpers.BROKEN_CARET,NPCG_INCLUDED=void 0!==/()??/.exec("")[1],PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG;PATCH&&(patchedExec=function(t){var e,r,n,o,i,a,s,c=this,u=getInternalState$2(c),l=toString$2(t),f=u.raw;if(f)return f.lastIndex=c.lastIndex,e=call$7(patchedExec,f,l),c.lastIndex=f.lastIndex,e;var p=u.groups,d=UNSUPPORTED_Y&&c.sticky,y=call$7(regexpFlags,c),h=c.source,$=0,g=l;if(d&&(y=replace$2(y,"y",""),-1===indexOf(y,"g")&&(y+="g"),g=stringSlice$2(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==charAt$2(l,c.lastIndex-1))&&(h="(?: "+h+")",g=" "+g,$++),r=new RegExp("^(?:"+h+")",y)),NPCG_INCLUDED&&(r=new RegExp("^"+h+"$(?!\\s)",y)),UPDATES_LAST_INDEX_WRONG&&(n=c.lastIndex),o=call$7(nativeExec,d?r:c,g),d?o?(o.input=stringSlice$2(o.input,$),o[0]=stringSlice$2(o[0],$),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&o&&(c.lastIndex=c.global?o.index+o[0].length:n),NPCG_INCLUDED&&o&&o.length>1&&call$7(nativeReplace,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&p)for(o.groups=a=create$3(null),i=0;i<p.length;i++)a[(s=p[i])[0]]=o[s[1]];return o});var regexpExec$2=patchedExec,$$6=_export,exec=regexpExec$2;$$6({target:"RegExp",proto:!0,forced:/./.exec!==exec},{exec:exec});var uncurryThis$a=functionUncurryThisClause,defineBuiltIn$1=defineBuiltIn$b,regexpExec$1=regexpExec$2,fails$c=fails$z,wellKnownSymbol$4=wellKnownSymbol$o,createNonEnumerableProperty$3=createNonEnumerableProperty$8,SPECIES$1=wellKnownSymbol$4("species"),RegExpPrototype=RegExp.prototype,fixRegexpWellKnownSymbolLogic=function(t,e,r,n){var o=wellKnownSymbol$4(t),i=!fails$c((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!fails$c((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[SPECIES$1]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!a||r){var s=uncurryThis$a(/./[o]),c=e(o,""[t],(function(t,e,r,n,o){var a=uncurryThis$a(t),c=e.exec;return c===regexpExec$1||c===RegExpPrototype.exec?i&&!o?{done:!0,value:s(e,r,n)}:{done:!0,value:a(r,e,n)}:{done:!1}}));defineBuiltIn$1(String.prototype,t,c[0]),defineBuiltIn$1(RegExpPrototype,o,c[1])}n&&createNonEnumerableProperty$3(RegExpPrototype[o],"sham",!0)},charAt$1=stringMultibyte.charAt,advanceStringIndex$1=function(t,e,r){return e+(r?charAt$1(t,e).length:1)},uncurryThis$9=functionUncurryThis,toObject$5=toObject$b,floor$3=Math.floor,charAt=uncurryThis$9("".charAt),replace$1=uncurryThis$9("".replace),stringSlice$1=uncurryThis$9("".slice),SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g,getSubstitution$1=function(t,e,r,n,o,i){var a=r+t.length,s=n.length,c=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==o&&(o=toObject$5(o),c=SUBSTITUTION_SYMBOLS),replace$1(i,c,(function(i,c){var u;switch(charAt(c,0)){case"$":return"$";case"&":return t;case"`":return stringSlice$1(e,0,r);case"'":return stringSlice$1(e,a);case"<":u=o[stringSlice$1(c,1,-1)];break;default:var l=+c;if(0===l)return i;if(l>s){var f=floor$3(l/10);return 0===f?i:f<=s?void 0===n[f-1]?charAt(c,1):n[f-1]+charAt(c,1):i}u=n[l-1]}return void 0===u?"":u}))},call$6=functionCall,anObject$1=anObject$f,isCallable$3=isCallable$p,classof$4=classofRaw$2,regexpExec=regexpExec$2,$TypeError$3=TypeError,regexpExecAbstract=function(t,e){var r=t.exec;if(isCallable$3(r)){var n=call$6(r,t,e);return null!==n&&anObject$1(n),n}if("RegExp"===classof$4(t))return call$6(regexpExec,t,e);throw $TypeError$3("RegExp#exec called on incompatible receiver")},apply$3=functionApply,call$5=functionCall,uncurryThis$8=functionUncurryThis,fixRegExpWellKnownSymbolLogic=fixRegexpWellKnownSymbolLogic,fails$b=fails$z,anObject=anObject$f,isCallable$2=isCallable$p,isNullOrUndefined=isNullOrUndefined$5,toIntegerOrInfinity$4=toIntegerOrInfinity$8,toLength$4=toLength$6,toString$1=toString$5,requireObjectCoercible$1=requireObjectCoercible$5,advanceStringIndex=advanceStringIndex$1,getMethod=getMethod$4,getSubstitution=getSubstitution$1,regExpExec=regexpExecAbstract,wellKnownSymbol$3=wellKnownSymbol$o,REPLACE=wellKnownSymbol$3("replace"),max$1=Math.max,min$2=Math.min,concat=uncurryThis$8([].concat),push=uncurryThis$8([].push),stringIndexOf=uncurryThis$8("".indexOf),stringSlice=uncurryThis$8("".slice),maybeToString=function(t){return void 0===t?t:String(t)},REPLACE_KEEPS_$0="$0"==="a".replace(/./,"$0"),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=!!/./[REPLACE]&&""===/./[REPLACE]("a","$0"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails$b((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));fixRegExpWellKnownSymbolLogic("replace",(function(t,e,r){var n=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function(t,r){var n=requireObjectCoercible$1(this),o=isNullOrUndefined(t)?void 0:getMethod(t,REPLACE);return o?call$5(o,t,n,r):call$5(e,toString$1(n),t,r)},function(t,o){var i=anObject(this),a=toString$1(t);if("string"==typeof o&&-1===stringIndexOf(o,n)&&-1===stringIndexOf(o,"$<")){var s=r(e,i,a,o);if(s.done)return s.value}var c=isCallable$2(o);c||(o=toString$1(o));var u=i.global;if(u){var l=i.unicode;i.lastIndex=0}for(var f=[];;){var p=regExpExec(i,a);if(null===p)break;if(push(f,p),!u)break;""===toString$1(p[0])&&(i.lastIndex=advanceStringIndex(a,toLength$4(i.lastIndex),l))}for(var d="",y=0,h=0;h<f.length;h++){for(var $=toString$1((p=f[h])[0]),g=max$1(min$2(toIntegerOrInfinity$4(p.index),a.length),0),v=[],b=1;b<p.length;b++)push(v,maybeToString(p[b]));var S=p.groups;if(c){var O=concat([$],v,g,a);void 0!==S&&push(O,S);var I=toString$1(apply$3(o,void 0,O))}else I=getSubstitution($,a,g,v,S,o);g>=y&&(d+=stringSlice(a,y,g)+I,y=g+$.length)}return d+stringSlice(a,y)}]}),!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);var whitespaces$2="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",uncurryThis$7=functionUncurryThis,requireObjectCoercible=requireObjectCoercible$5,toString=toString$5,whitespaces$1=whitespaces$2,replace=uncurryThis$7("".replace),ltrim=RegExp("^["+whitespaces$1+"]+"),rtrim=RegExp("(^|[^"+whitespaces$1+"])["+whitespaces$1+"]+$"),createMethod$1=function(t){return function(e){var r=toString(requireObjectCoercible(e));return 1&t&&(r=replace(r,ltrim,"")),2&t&&(r=replace(r,rtrim,"$1")),r}},stringTrim={start:createMethod$1(1),end:createMethod$1(2),trim:createMethod$1(3)},PROPER_FUNCTION_NAME$1=functionName.PROPER,fails$a=fails$z,whitespaces=whitespaces$2,non="âÂá ",stringTrimForced=function(t){return fails$a((function(){return!!whitespaces[t]()||non[t]()!==non||PROPER_FUNCTION_NAME$1&&whitespaces[t].name!==t}))},$$5=_export,$trim=stringTrim.trim,forcedStringTrimMethod=stringTrimForced;function join$1(){for(var t=this,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.map(function(e,r){return _newArrowCheck(this,t),0===r?e.trim().replace(/[\/]*$/g,""):e.trim().replace(/(^[\/]*|[\/]*$)/g,"")}.bind(this)).filter(function(e){return _newArrowCheck(this,t),e.length}.bind(this)).join("/")}function http2ws(t){return t.replace(/^http/,"ws")}$$5({target:"String",proto:!0,forced:forcedStringTrimMethod("trim")},{trim:function(){return $trim(this)}});var API=function(){function t(e){_classCallCheck(this,t),this.options=e}return _createClass(t,[{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.headers,o=r.body,i=r.query,a=__rest$1(r,["headers","body","query"]),s=i?"".concat(t,"?").concat(new URLSearchParams(i)):t;return fetch(join$1(this.options.origin,s),Object.assign({body:o?JSON.stringify(o):void 0,headers:Object.assign({Authorization:this.options.token,token:this.options.token},n)},a)).then(function(t){return _newArrowCheck(this,e),t.json()}.bind(this))}))},{key:"getUser",value:function(){return this.fetch("/api/auth/getUserDetailByToken",{method:"POST",body:{token:this.options.token},headers:{clientId:"dolphin-sdk"}})}},{key:"getProducts",value:function(){return this.fetch("/system/ufin/api/common/v1/getSceneByBusinessId",{method:"GET",query:{businessId:this.options.bizID}})}},{key:"postCallEvent",value:function(t){return this.fetch("/api/dolphin-ai/session/stats/event",{body:t,method:"POST"})}}]),t}();function generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function uuid(){return window.crypto&&"function"==typeof window.crypto.randomUUID?window.crypto.randomUUID():generateUUID()}var ClientCnt=function(t){_inherits(r,t);var e=_createSuper(r);function r(){var t;return _classCallCheck(this,r),(t=e.call(this)).url="ws://127.0.0.1:12311/assistant",t.reconnectCount=1,t}return _createClass(r,[{key:"connect",value:function(){var t=this;return new Promise(function(e,r){var n=this;_newArrowCheck(this,t),this.ws=new WebSocket(this.url),this.ws.onopen=function(){_newArrowCheck(this,n),e(!0)}.bind(this),this.ws.onclose=function(){return _newArrowCheck(this,n),__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.reconnectCount>=2)){t.next=3;break}return r(new Error("Connection failed after 2 attempts.")),t.abrupt("return");case 3:return this.reconnectCount++,t.prev=4,t.next=7,this.connect();case 7:e(!0),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),r(t.t0);case 13:case"end":return t.stop()}}),t,this,[[4,10]])})))}.bind(this)}.bind(this))}},{key:"send",value:function(t){var e,r=Object.assign(Object.assign({},t),{reqid:uuid(),version:"v2"});r.reqid="".concat(t.cmd,"-").concat(r.reqid),"object"===_typeof(r.param)&&(r.param=JSON.stringify(r.param));var n=JSON.stringify(r);null===(e=this.ws)||void 0===e||e.send(n)}},{key:"disconnect",value:function(){var t;this.removeAllListeners(),this.reconnectCount=1,this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.onerror=null),null===(t=this.ws)||void 0===t||t.close()}}]),r}(EventEmitter$1),AISocket=function(t){_inherits(r,t);var e=_createSuper(r);function r(){var t;return _classCallCheck(this,r),(t=e.apply(this,arguments)).reconnectCount=1,t}return _createClass(r,[{key:"connect",value:function(t){var e=this;return new Promise(function(r,n){var o=this;_newArrowCheck(this,e),this.ws=new WebSocket(t),this.ws.onopen=function(){_newArrowCheck(this,o),this.send({header:{messageID:uuid(),name:"Subscribe"},payload:{scopes:["Started","SentenceBegin","TranscriptionResultChanged","SentenceEnd","Completed","SkillResult.nlp","SkillResult.quality"]}}),r(!0)}.bind(this),this.ws.onmessage=function(t){if(_newArrowCheck(this,o),"string"==typeof t.data){var e=JSON.parse(t.data);this.emit("message",e)}}.bind(this),this.ws.onclose=function(){return _newArrowCheck(this,o),__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.reconnectCount>=5)){e.next=3;break}return n(new Error("Connection failed after 5 attempts.")),e.abrupt("return");case 3:return this.reconnectCount++,e.prev=4,e.next=7,this.connect(t);case 7:r(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),n(e.t0);case 13:case"end":return e.stop()}}),e,this,[[4,10]])})))}.bind(this)}.bind(this))}},{key:"send",value:function(t){var e,r=JSON.stringify(t);null===(e=this.ws)||void 0===e||e.send(r)}},{key:"disconnect",value:function(){var t;this.removeAllListeners(),this.reconnectCount=1,this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.onerror=null),null===(t=this.ws)||void 0===t||t.close()}}]),r}(EventEmitter$1),callService={},__assign$1=function(){return __assign$1=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},__assign$1.apply(this,arguments)},ActionTypes,SpecialTargets;function __rest(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function __values(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function __spreadArray(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}!function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"}(ActionTypes||(ActionTypes={})),function(t){t.Parent="#_parent",t.Internal="#_internal"}(SpecialTargets||(SpecialTargets={}));var start$3=ActionTypes.Start,stop$3=ActionTypes.Stop,raise$3=ActionTypes.Raise,send$4=ActionTypes.Send,cancel$3=ActionTypes.Cancel,nullEvent$1=ActionTypes.NullEvent,assign$4=ActionTypes.Assign,after$3=ActionTypes.After,doneState$1=ActionTypes.DoneState,log$5=ActionTypes.Log,init$1=ActionTypes.Init,invoke$1=ActionTypes.Invoke,errorExecution$1=ActionTypes.ErrorExecution,errorPlatform$1=ActionTypes.ErrorPlatform,error$3=ActionTypes.ErrorCustom,update$1=ActionTypes.Update,choose$3=ActionTypes.Choose,pure$3=ActionTypes.Pure,actionTypes$2=Object.freeze({__proto__:null,after:after$3,assign:assign$4,cancel:cancel$3,choose:choose$3,doneState:doneState$1,error:error$3,errorExecution:errorExecution$1,errorPlatform:errorPlatform$1,init:init$1,invoke:invoke$1,log:log$5,nullEvent:nullEvent$1,pure:pure$3,raise:raise$3,send:send$4,start:start$3,stop:stop$3,update:update$1}),STATE_DELIMITER$1=".",EMPTY_ACTIVITY_MAP$1={},DEFAULT_GUARD_TYPE$1="xstate.guard",TARGETLESS_KEY$1="",_a;function matchesState(t,e,r){void 0===r&&(r=STATE_DELIMITER$1);var n=toStateValue(t,r),o=toStateValue(e,r);return isString(o)?!!isString(n)&&o===n:isString(n)?n in o:Object.keys(n).every((function(t){return t in o&&matchesState(n[t],o[t])}))}function getEventType(t){try{return isString(t)||"number"==typeof t?"".concat(t):t.type}catch(t){throw new Error("Events must be strings or objects with a string event.type property.")}}function toStatePath(t,e){try{return isArray$1(t)?t:t.toString().split(e)}catch(e){throw new Error("'".concat(t,"' is not a valid state path."))}}function isStateLike(t){return"object"==typeof t&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function toStateValue(t,e){return isStateLike(t)?t.value:isArray$1(t)?pathToStateValue(t):"string"!=typeof t?t:pathToStateValue(toStatePath(t,e))}function pathToStateValue(t){if(1===t.length)return t[0];for(var e={},r=e,n=0;n<t.length-1;n++)n===t.length-2?r[t[n]]=t[n+1]:(r[t[n]]={},r=r[t[n]]);return e}function mapValues(t,e){for(var r={},n=Object.keys(t),o=0;o<n.length;o++){var i=n[o];r[i]=e(t[i],i,t,o)}return r}function mapFilterValues(t,e,r){var n,o,i={};try{for(var a=__values(Object.keys(t)),s=a.next();!s.done;s=a.next()){var c=s.value,u=t[c];r(u)&&(i[c]=e(u,c,t))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i}var path=function(t){return function(e){var r,n,o=e;try{for(var i=__values(t),a=i.next();!a.done;a=i.next()){o=o[a.value]}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o}};function nestedPath(t,e){return function(r){var n,o,i=r;try{for(var a=__values(t),s=a.next();!s.done;s=a.next()){var c=s.value;i=i[e][c]}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i}}function toStatePaths(t){if(!t)return[[]];if(isString(t))return[[t]];var e=flatten(Object.keys(t).map((function(e){var r=t[e];return"string"==typeof r||r&&Object.keys(r).length?toStatePaths(t[e]).map((function(t){return[e].concat(t)})):[[e]]})));return e}function flatten(t){var e;return(e=[]).concat.apply(e,__spreadArray([],__read(t),!1))}function toArrayStrict(t){return isArray$1(t)?t:[t]}function toArray(t){return void 0===t?[]:toArrayStrict(t)}function mapContext(t,e,r){var n,o;if(isFunction(t))return t(e,r.data);var i={};try{for(var a=__values(Object.keys(t)),s=a.next();!s.done;s=a.next()){var c=s.value,u=t[c];isFunction(u)?i[c]=u(e,r.data):i[c]=u}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i}function isBuiltInEvent(t){return/^(done|error)\./.test(t)}function isPromiseLike(t){return t instanceof Promise||!(null===t||!isFunction(t)&&"object"!=typeof t||!isFunction(t.then))}function isBehavior(t){return null!==t&&"object"==typeof t&&"transition"in t&&"function"==typeof t.transition}function partition(t,e){var r,n,o=__read([[],[]],2),i=o[0],a=o[1];try{for(var s=__values(t),c=s.next();!c.done;c=s.next()){var u=c.value;e(u)?i.push(u):a.push(u)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return[i,a]}function updateHistoryStates(t,e){return mapValues(t.states,(function(t,r){if(t){var n=(isString(e)?void 0:e[r])||(t?t.current:void 0);if(n)return{current:n,states:updateHistoryStates(t,n)}}}))}function updateHistoryValue(t,e){return{current:e,states:updateHistoryStates(t,e)}}function updateContext(t,e,r,n){var o=t?r.reduce((function(t,r){var o,i,a=r.assignment,s={state:n,action:r,_event:e},c={};if(isFunction(a))c=a(t,e.data,s);else try{for(var u=__values(Object.keys(a)),l=u.next();!l.done;l=u.next()){var f=l.value,p=a[f];c[f]=isFunction(p)?p(t,e.data,s):p}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return Object.assign({},t,c)}),t):t;return o}var warn=function(){};function isArray$1(t){return Array.isArray(t)}function isFunction(t){return"function"==typeof t}function isString(t){return"string"==typeof t}function toGuard(t,e){if(t)return isString(t)?{type:DEFAULT_GUARD_TYPE$1,name:t,predicate:e?e[t]:void 0}:isFunction(t)?{type:DEFAULT_GUARD_TYPE$1,name:t.name,predicate:t}:t}function isObservable(t){try{return"subscribe"in t&&isFunction(t.subscribe)}catch(t){return!1}}var symbolObservable=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function isMachine(t){return!!t&&"__xstatenode"in t}function isActor$1(t){return!!t&&"function"==typeof t.send}_a={},_a[symbolObservable]=function(){return this},_a[Symbol.observable]=function(){return this};var uniqueId=function(){var t=0;return function(){return(++t).toString(16)}}();function toEventObject(t,e){return isString(t)||"number"==typeof t?__assign$1({type:t},e):t}function toSCXMLEvent(t,e){if(!isString(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var r=toEventObject(t);return __assign$1({name:r.type,data:r,$$type:"scxml",type:"external"},e)}function toTransitionConfigArray(t,e){return toArrayStrict(e).map((function(e){return void 0===e||"string"==typeof e||isMachine(e)?{target:e,event:t}:__assign$1(__assign$1({},e),{event:t})}))}function normalizeTarget(t){if(void 0!==t&&t!==TARGETLESS_KEY$1)return toArray(t)}function evaluateGuard(t,e,r,n,o){var i=t.options.guards,a={state:o,cond:e,_event:n};if(e.type===DEFAULT_GUARD_TYPE$1)return((null==i?void 0:i[e.name])||e.predicate)(r,n.data,a);var s=null==i?void 0:i[e.type];if(!s)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return s(r,n.data,a)}function toInvokeSource$1(t){return"string"==typeof t?{type:t}:t}function toObserver(t,e,r){if("object"==typeof t)return t;var n=function(){};return{next:t,error:e||n,complete:r||n}}function createInvokeId(t,e){return"".concat(t,":invocation[").concat(e,"]")}var initEvent$1=toSCXMLEvent({type:init$1});function getActionFunction$1(t,e){return e&&e[t]||void 0}function toActionObject$1(t,e){var r;if(isString(t)||"number"==typeof t)r=isFunction(n=getActionFunction$1(t,e))?{type:t,exec:n}:n||{type:t,exec:void 0};else if(isFunction(t))r={type:t.name||t.toString(),exec:t};else{var n;if(isFunction(n=getActionFunction$1(t.type,e)))r=__assign$1(__assign$1({},t),{exec:n});else if(n){var o=n.type||t.type;r=__assign$1(__assign$1(__assign$1({},n),t),{type:o})}else r=t}return r}var toActionObjects$1=function(t,e){return t?(isArray$1(t)?t:[t]).map((function(t){return toActionObject$1(t,e)})):[]};function toActivityDefinition$1(t){var e=toActionObject$1(t);return __assign$1(__assign$1({id:isString(t)?t:e.id},e),{type:e.type})}function raise$2(t){return isString(t)?{type:raise$3,event:t}:send$3(t,{to:SpecialTargets.Internal})}function resolveRaise$1(t){return{type:raise$3,_event:toSCXMLEvent(t.event)}}function send$3(t,e){return{to:e?e.to:void 0,type:send$4,event:isFunction(t)?t:toEventObject(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:isFunction(t)?t.name:getEventType(t)}}function resolveSend$1(t,e,r,n){var o,i={_event:r},a=toSCXMLEvent(isFunction(t.event)?t.event(e,r.data,i):t.event);if(isString(t.delay)){var s=n&&n[t.delay];o=isFunction(s)?s(e,r.data,i):s}else o=isFunction(t.delay)?t.delay(e,r.data,i):t.delay;var c=isFunction(t.to)?t.to(e,r.data,i):t.to;return __assign$1(__assign$1({},t),{to:c,_event:a,event:a.data,delay:o})}function sendParent$2(t,e){return send$3(t,__assign$1(__assign$1({},e),{to:SpecialTargets.Parent}))}function sendTo$1(t,e,r){return send$3(e,__assign$1(__assign$1({},r),{to:t}))}function sendUpdate$2(){return sendParent$2(update$1)}function respond$1(t,e){return send$3(t,__assign$1(__assign$1({},e),{to:function(t,e,r){return r._event.origin}}))}var defaultLogExpr$1=function(t,e){return{context:t,event:e}};function log$4(t,e){return void 0===t&&(t=defaultLogExpr$1),{type:log$5,label:e,expr:t}}var resolveLog$1=function(t,e,r){return __assign$1(__assign$1({},t),{value:isString(t.expr)?t.expr:t.expr(e,r.data,{_event:r})})},cancel$2=function(t){return{type:cancel$3,sendId:t}};function start$2(t){var e=toActivityDefinition$1(t);return{type:ActionTypes.Start,activity:e,exec:void 0}}function stop$2(t){var e=isFunction(t)?t:toActivityDefinition$1(t);return{type:ActionTypes.Stop,activity:e,exec:void 0}}function resolveStop$1(t,e,r){var n=isFunction(t.activity)?t.activity(e,r.data):t.activity,o="string"==typeof n?{id:n}:n;return{type:ActionTypes.Stop,activity:o}}var assign$3=function(t){return{type:assign$4,assignment:t}};function isActionObject$1(t){return"object"==typeof t&&"type"in t}function after$2(t,e){var r=e?"#".concat(e):"";return"".concat(ActionTypes.After,"(").concat(t,")").concat(r)}function done$1(t,e){var r="".concat(ActionTypes.DoneState,".").concat(t),n={type:r,data:e,toString:function(){return r}};return n}function doneInvoke$2(t,e){var r="".concat(ActionTypes.DoneInvoke,".").concat(t),n={type:r,data:e,toString:function(){return r}};return n}function error$2(t,e){var r="".concat(ActionTypes.ErrorPlatform,".").concat(t),n={type:r,data:e,toString:function(){return r}};return n}function pure$2(t){return{type:ActionTypes.Pure,get:t}}function forwardTo$2(t,e){return send$3((function(t,e){return e}),__assign$1(__assign$1({},e),{to:t}))}function escalate$1(t,e){return sendParent$2((function(e,r,n){return{type:error$3,data:isFunction(t)?t(e,r,n):t}}),__assign$1(__assign$1({},e),{to:SpecialTargets.Parent}))}function choose$2(t){return{type:ActionTypes.Choose,conds:t}}function resolveActions$1(t,e,r,n,o,i){void 0===i&&(i=!1);var a=__read(i?[[],o]:partition(o,(function(t){return t.type===assign$4})),2),s=a[0],c=a[1],u=s.length?updateContext(r,n,s,e):r,l=i?[r]:void 0,f=flatten(c.map((function(r){var o;switch(r.type){case raise$3:return resolveRaise$1(r);case send$4:return resolveSend$1(r,u,n,t.options.delays);case log$5:return resolveLog$1(r,u,n);case choose$3:if(!(f=null===(o=r.conds.find((function(r){var o=toGuard(r.cond,t.options.guards);return!o||evaluateGuard(t,o,u,n,e)})))||void 0===o?void 0:o.actions))return[];var a=__read(resolveActions$1(t,e,u,n,toActionObjects$1(toArray(f),t.options.actions),i),2),s=a[0],c=a[1];return u=c,null==l||l.push(u),s;case pure$3:var f;if(!(f=r.get(u,n.data)))return[];var p=__read(resolveActions$1(t,e,u,n,toActionObjects$1(toArray(f),t.options.actions),i),2),d=p[0],y=p[1];return u=y,null==l||l.push(u),d;case stop$3:return resolveStop$1(r,u,n);case assign$4:u=updateContext(u,n,[r],e),null==l||l.push(u);break;default:var h=toActionObject$1(r,t.options.actions),$=h.exec;if($&&l){var g=l.length-1;h=__assign$1(__assign$1({},h),{exec:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];$.apply(void 0,__spreadArray([l[g]],__read(e),!1))}})}return h}})).filter((function(t){return!!t})));return[f,u]}var actions$1=Object.freeze({__proto__:null,actionTypes:actionTypes$2,after:after$2,assign:assign$3,cancel:cancel$2,choose:choose$2,done:done$1,doneInvoke:doneInvoke$2,error:error$2,escalate:escalate$1,forwardTo:forwardTo$2,getActionFunction:getActionFunction$1,initEvent:initEvent$1,isActionObject:isActionObject$1,log:log$4,pure:pure$2,raise:raise$2,resolveActions:resolveActions$1,resolveLog:resolveLog$1,resolveRaise:resolveRaise$1,resolveSend:resolveSend$1,resolveStop:resolveStop$1,respond:respond$1,send:send$3,sendParent:sendParent$2,sendTo:sendTo$1,sendUpdate:sendUpdate$2,start:start$2,stop:stop$2,toActionObject:toActionObject$1,toActionObjects:toActionObjects$1,toActivityDefinition:toActivityDefinition$1}),serviceStack=[],provide=function(t,e){serviceStack.push(t);var r=e(t);return serviceStack.pop(),r},consume=function(t){return t(serviceStack[serviceStack.length-1])};function createNullActor(t){var e;return(e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}})[symbolObservable]=function(){return this},e}function createInvocableActor(t,e,r,n){var o,i=toInvokeSource$1(t.src),a=null===(o=null==e?void 0:e.options.services)||void 0===o?void 0:o[i.type],s=t.data?mapContext(t.data,r,n):void 0,c=a?createDeferredActor(a,t.id,s):createNullActor(t.id);return c.meta=t,c}function createDeferredActor(t,e,r){var n=createNullActor(e);if(n.deferred=!0,isMachine(t)){var o=n.state=provide(void 0,(function(){return(r?t.withContext(r):t).initialState}));n.getSnapshot=function(){return o}}return n}function isActor(t){try{return"function"==typeof t.send}catch(t){return!1}}function isSpawnedActor(t){return isActor(t)&&"id"in t}function toActorRef(t){var e;return __assign$1(((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}})[symbolObservable]=function(){return this},e),t)}var isLeafNode=function(t){return"atomic"===t.type||"final"===t.type};function getChildren(t){return Object.keys(t.states).map((function(e){return t.states[e]})).filter((function(t){return"history"!==t.type}))}function getAllStateNodes(t){var e=[t];return isLeafNode(t)?e:e.concat(flatten(getChildren(t).map(getAllStateNodes)))}function getConfiguration(t,e){var r,n,o,i,a,s,c,u,l=getAdjList(new Set(t)),f=new Set(e);try{for(var p=__values(f),d=p.next();!d.done;d=p.next())for(var y=(m=d.value).parent;y&&!f.has(y);)f.add(y),y=y.parent}catch(t){r={error:t}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}var h=getAdjList(f);try{for(var $=__values(f),g=$.next();!g.done;g=$.next()){if("compound"!==(m=g.value).type||h.get(m)&&h.get(m).length){if("parallel"===m.type)try{for(var v=(a=void 0,__values(getChildren(m))),b=v.next();!b.done;b=v.next()){var S=b.value;f.has(S)||(f.add(S),l.get(S)?l.get(S).forEach((function(t){return f.add(t)})):S.initialStateNodes.forEach((function(t){return f.add(t)})))}}catch(t){a={error:t}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}}else l.get(m)?l.get(m).forEach((function(t){return f.add(t)})):m.initialStateNodes.forEach((function(t){return f.add(t)}))}}catch(t){o={error:t}}finally{try{g&&!g.done&&(i=$.return)&&i.call($)}finally{if(o)throw o.error}}try{for(var O=__values(f),I=O.next();!I.done;I=O.next()){var m;for(y=(m=I.value).parent;y&&!f.has(y);)f.add(y),y=y.parent}}catch(t){c={error:t}}finally{try{I&&!I.done&&(u=O.return)&&u.call(O)}finally{if(c)throw c.error}}return f}function getValueFromAdj(t,e){var r=e.get(t);if(!r)return{};if("compound"===t.type){var n=r[0];if(!n)return{};if(isLeafNode(n))return n.key}var o={};return r.forEach((function(t){o[t.key]=getValueFromAdj(t,e)})),o}function getAdjList(t){var e,r,n=new Map;try{for(var o=__values(t),i=o.next();!i.done;i=o.next()){var a=i.value;n.has(a)||n.set(a,[]),a.parent&&(n.has(a.parent)||n.set(a.parent,[]),n.get(a.parent).push(a))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n}function getValue(t,e){return getValueFromAdj(t,getAdjList(getConfiguration([t],e)))}function has(t,e){return Array.isArray(t)?t.some((function(t){return t===e})):t instanceof Set&&t.has(e)}function nextEvents(t){return __spreadArray([],__read(new Set(flatten(__spreadArray([],__read(t.map((function(t){return t.ownEvents}))),!1)))),!1)}function isInFinalState(t,e){return"compound"===e.type?getChildren(e).some((function(e){return"final"===e.type&&has(t,e)})):"parallel"===e.type&&getChildren(e).every((function(e){return isInFinalState(t,e)}))}function getMeta(t){return void 0===t&&(t=[]),t.reduce((function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t}),{})}function getTagsFromConfiguration(t){return new Set(flatten(t.map((function(t){return t.tags}))))}function stateValuesEqual(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;if(isString(t)||isString(e))return t===e;var r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every((function(r){return stateValuesEqual(t[r],e[r])}))}function isStateConfig(t){return"object"==typeof t&&null!==t&&("value"in t&&"_event"in t)}function bindActionToState(t,e){var r=t.exec;return __assign$1(__assign$1({},t),{exec:void 0!==r?function(){return r(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0})}var State$1=function(){function t(t){var e,r=this;this.actions=[],this.activities=EMPTY_ACTIVITY_MAP$1,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||EMPTY_ACTIVITY_MAP$1,this.meta=getMeta(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=null!==(e=Array.isArray(t.tags)?new Set(t.tags):t.tags)&&void 0!==e?e:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return nextEvents(r.configuration)}})}return t.from=function(e,r){return e instanceof t?e.context!==r?new t({value:e.value,context:r,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e:new t({value:e,context:r,_event:initEvent$1,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,r){if(e instanceof t){if(!e.actions.length)return e;var n=initEvent$1;return new t({value:e.value,context:r,_event:n,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,r)},t.prototype.toStrings=function(t,e){var r=this;if(void 0===t&&(t=this.value),void 0===e&&(e="."),isString(t))return[t];var n=Object.keys(t);return n.concat.apply(n,__spreadArray([],__read(n.map((function(n){return r.toStrings(t[n],e).map((function(t){return n+e+t}))}))),!1))},t.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var e=t.tags;t.machine;var r=__rest(t,["configuration","transitions","tags","machine"]);return __assign$1(__assign$1({},r),{tags:Array.from(e)})},t.prototype.matches=function(t){return matchesState(t,this.value)},t.prototype.hasTag=function(t){return this.tags.has(t)},t.prototype.can=function(t){var e;warn(!!this.machine);var r=null===(e=this.machine)||void 0===e?void 0:e.getTransitionData(this,t);return!!(null==r?void 0:r.transitions.length)&&r.transitions.some((function(t){return void 0!==t.target||t.actions.length}))},t}(),defaultOptions={deferEvents:!1},Scheduler=function(){function t(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=__assign$1(__assign$1({},defaultOptions),t)}return t.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents)return void this.schedule(t);this.process(t)}this.flushEvents()},t.prototype.schedule=function(t){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()}else this.queue.push(t)},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},t.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(t){throw this.clear(),t}finally{this.processingEvent=!1}},t}(),children=new Map,sessionIdIndex=0,registry={bookId:function(){return"x:".concat(sessionIdIndex++)},register:function(t,e){return children.set(t,e),t},get:function(t){return children.get(t)},free:function(t){children.delete(t)}};function getGlobal(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0}function getDevTools(){var t=getGlobal();if(t&&"__xstate__"in t)return t.__xstate__}function registerService(t){if(getGlobal()){var e=getDevTools();e&&e.register(t)}}function spawnBehavior(t,e){void 0===e&&(e={});var r=t.initialState,n=new Set,o=[],i=!1,a=toActorRef({id:e.id,send:function(e){o.push(e),function(){if(!i){for(i=!0;o.length>0;){var e=o.shift();r=t.transition(r,e,s),n.forEach((function(t){return t.next(r)}))}i=!1}}()},getSnapshot:function(){return r},subscribe:function(t,e,o){var i=toObserver(t,e,o);return n.add(i),i.next(r),{unsubscribe:function(){n.delete(i)}}}}),s={parent:e.parent,self:a,id:e.id||"anonymous",observers:n};return r=t.start?t.start(s):r,a}var DEFAULT_SPAWN_OPTIONS={sync:!1,autoForward:!1},InterpreterStatus;!function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(InterpreterStatus||(InterpreterStatus={}));var Interpreter=function(){function t(e,r){var n=this;void 0===r&&(r=t.defaultOptions),this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(t,e){if(isArray$1(t))return n.batch(t),n.state;var r=toSCXMLEvent(toEventObject(t,e));if(n.status===InterpreterStatus.Stopped)return n.state;if(n.status!==InterpreterStatus.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(r.name,'" was sent to uninitialized service "').concat(n.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(r.data)));return n.scheduler.schedule((function(){n.forward(r);var t=n.nextState(r);n.update(t,r)})),n._state},this.sendTo=function(t,e){var r=n.parent&&(e===SpecialTargets.Parent||n.parent.id===e),o=r?n.parent:isString(e)?n.children.get(e)||registry.get(e):isActor$1(e)?e:void 0;if(o)"machine"in o?o.send(__assign$1(__assign$1({},t),{name:t.name===error$3?"".concat(error$2(n.id)):t.name,origin:n.sessionId})):o.send(t.data);else if(!r)throw new Error("Unable to send event to child '".concat(e,"' from service '").concat(n.id,"'."))};var o=__assign$1(__assign$1({},t.defaultOptions),r),i=o.clock,a=o.logger,s=o.parent,c=o.id,u=void 0!==c?c:e.id;this.id=u,this.logger=a,this.clock=i,this.parent=s,this.options=o,this.scheduler=new Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=registry.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:provide(this,(function(){return t._initialState=t.machine.initialState,t._initialState}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(t,e){var r,n;try{for(var o=__values(t.actions),i=o.next();!i.done;i=o.next()){var a=i.value;this.exec(a,t,e)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.update=function(t,e){var r,n,o,i,a,s,c,u,l=this;if(t._sessionid=this.sessionId,this._state=t,this.options.execute&&this.execute(this.state),this.children.forEach((function(t){l.state.children[t.id]=t})),this.devTools&&this.devTools.send(e.data,t),t.event)try{for(var f=__values(this.eventListeners),p=f.next();!p.done;p=f.next()){(0,p.value)(t.event)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}try{for(var d=__values(this.listeners),y=d.next();!y.done;y=d.next()){(0,y.value)(t,t.event)}}catch(t){o={error:t}}finally{try{y&&!y.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}try{for(var h=__values(this.contextListeners),$=h.next();!$.done;$=h.next()){(0,$.value)(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(t){a={error:t}}finally{try{$&&!$.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}var g=isInFinalState(t.configuration||[],this.machine);if(this.state.configuration&&g){var v=t.configuration.find((function(t){return"final"===t.type&&t.parent===l.machine})),b=v&&v.doneData?mapContext(v.doneData,t.context,e):void 0;try{for(var S=__values(this.doneListeners),O=S.next();!O.done;O=S.next()){(0,O.value)(doneInvoke$2(this.id,b))}}catch(t){c={error:t}}finally{try{O&&!O.done&&(u=S.return)&&u.call(S)}finally{if(c)throw c.error}}this.stop()}},t.prototype.onTransition=function(t){return this.listeners.add(t),this.status===InterpreterStatus.Running&&t(this.state,this.state.event),this},t.prototype.subscribe=function(t,e,r){var n,o=this;if(!t)return{unsubscribe:function(){}};var i=r;return"function"==typeof t?n=t:(n=t.next.bind(t),i=t.complete.bind(t)),this.listeners.add(n),this.status!==InterpreterStatus.NotStarted&&n(this.state),i&&(this.status===InterpreterStatus.Stopped?i():this.onDone(i)),{unsubscribe:function(){n&&o.listeners.delete(n),i&&o.doneListeners.delete(i)}}},t.prototype.onEvent=function(t){return this.eventListeners.add(t),this},t.prototype.onSend=function(t){return this.sendListeners.add(t),this},t.prototype.onChange=function(t){return this.contextListeners.add(t),this},t.prototype.onStop=function(t){return this.stopListeners.add(t),this},t.prototype.onDone=function(t){return this.doneListeners.add(t),this},t.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},t.prototype.start=function(t){var e=this;if(this.status===InterpreterStatus.Running)return this;this.machine._init(),registry.register(this.sessionId,this),this.initialized=!0,this.status=InterpreterStatus.Running;var r=void 0===t?this.initialState:provide(this,(function(){return isStateConfig(t)?e.machine.resolveState(t):e.machine.resolveState(State$1.from(t,e.machine.context))}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){e.update(r,initEvent$1)})),this},t.prototype.stop=function(){var t,e,r,n,o,i,a,s,c,u,l=this;try{for(var f=__values(this.listeners),p=f.next();!p.done;p=f.next()){var d=p.value;this.listeners.delete(d)}}catch(e){t={error:e}}finally{try{p&&!p.done&&(e=f.return)&&e.call(f)}finally{if(t)throw t.error}}try{for(var y=__values(this.stopListeners),h=y.next();!h.done;h=y.next()){(d=h.value)(),this.stopListeners.delete(d)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(n=y.return)&&n.call(y)}finally{if(r)throw r.error}}try{for(var $=__values(this.contextListeners),g=$.next();!g.done;g=$.next()){d=g.value;this.contextListeners.delete(d)}}catch(t){o={error:t}}finally{try{g&&!g.done&&(i=$.return)&&i.call($)}finally{if(o)throw o.error}}try{for(var v=__values(this.doneListeners),b=v.next();!b.done;b=v.next()){d=b.value;this.doneListeners.delete(d)}}catch(t){a={error:t}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}if(!this.initialized)return this;__spreadArray([],__read(this.state.configuration),!1).sort((function(t,e){return e.order-t.order})).forEach((function(t){var e,r;try{for(var n=__values(t.definition.exit),o=n.next();!o.done;o=n.next()){var i=o.value;l.exec(i,l.state)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}})),this.children.forEach((function(t){isFunction(t.stop)&&t.stop()})),this.children.clear();try{for(var S=__values(Object.keys(this.delayedEventsMap)),O=S.next();!O.done;O=S.next()){var I=O.value;this.clock.clearTimeout(this.delayedEventsMap[I])}}catch(t){c={error:t}}finally{try{O&&!O.done&&(u=S.return)&&u.call(S)}finally{if(c)throw c.error}}return this.scheduler.clear(),this.scheduler=new Scheduler({deferEvents:this.options.deferEvents}),this.initialized=!1,this.status=InterpreterStatus.Stopped,this._initialState=void 0,registry.free(this.sessionId),this},t.prototype.batch=function(t){var e=this;if(this.status===InterpreterStatus.NotStarted&&this.options.deferEvents);else if(this.status!==InterpreterStatus.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));this.scheduler.schedule((function(){var r,n,o=e.state,i=!1,a=[],s=function(t){var r=toSCXMLEvent(t);e.forward(r),o=provide(e,(function(){return e.machine.transition(o,r)})),a.push.apply(a,__spreadArray([],__read(o.actions.map((function(t){return bindActionToState(t,o)}))),!1)),i=i||!!o.changed};try{for(var c=__values(t),u=c.next();!u.done;u=c.next()){s(u.value)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}o.changed=i,o.actions=a,e.update(o,toSCXMLEvent(t[t.length-1]))}))},t.prototype.sender=function(t){return this.send.bind(this,t)},t.prototype.nextState=function(t){var e=this,r=toSCXMLEvent(t);if(0===r.name.indexOf(errorPlatform$1)&&!this.state.nextEvents.some((function(t){return 0===t.indexOf(errorPlatform$1)})))throw r.data.data;return provide(this,(function(){return e.machine.transition(e.state,r)}))},t.prototype.forward=function(t){var e,r;try{for(var n=__values(this.forwardTo),o=n.next();!o.done;o=n.next()){var i=o.value,a=this.children.get(i);if(!a)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(i,"'."));a.send(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.defer=function(t){var e=this;this.delayedEventsMap[t.id]=this.clock.setTimeout((function(){t.to?e.sendTo(t._event,t.to):e.send(t._event)}),t.delay)},t.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},t.prototype.exec=function(t,e,r){void 0===r&&(r=this.machine.options.actions);var n=e.context,o=e._event,i=t.exec||getActionFunction$1(t.type,r),a=isFunction(i)?i:i?i.exec:t.exec;if(a)try{return a(n,o.data,{action:t,state:this.state,_event:o})}catch(t){throw this.parent&&this.parent.send({type:"xstate.error",data:t}),t}switch(t.type){case send$4:var s=t;if("number"==typeof s.delay)return void this.defer(s);s.to?this.sendTo(s._event,s.to):this.send(s._event);break;case cancel$3:this.cancel(t.sendId);break;case start$3:if(this.status!==InterpreterStatus.Running)return;var c=t.activity;if(!this.state.activities[c.id||c.type])break;if(c.type===ActionTypes.Invoke){var u=toInvokeSource$1(c.src),l=this.machine.options.services?this.machine.options.services[u.type]:void 0,f=c.id,p=c.data,d="autoForward"in c?c.autoForward:!!c.forward;if(!l)return;var y=p?mapContext(p,n,o):void 0;if("string"==typeof l)return;var h=isFunction(l)?l(n,o.data,{data:y,src:u,meta:c.meta}):l;if(!h)return;var $=void 0;isMachine(h)&&(h=y?h.withContext(y):h,$={autoForward:d}),this.spawn(h,f,$)}else this.spawnActivity(c);break;case stop$3:this.stopChild(t.activity.id);break;case log$5:var g=t.label,v=t.value;g?this.logger(g,v):this.logger(v)}},t.prototype.removeChild=function(t){var e;this.children.delete(t),this.forwardTo.delete(t),null===(e=this.state)||void 0===e||delete e.children[t]},t.prototype.stopChild=function(t){var e=this.children.get(t);e&&(this.removeChild(t),isFunction(e.stop)&&e.stop())},t.prototype.spawn=function(t,e,r){if(isPromiseLike(t))return this.spawnPromise(Promise.resolve(t),e);if(isFunction(t))return this.spawnCallback(t,e);if(isSpawnedActor(t))return this.spawnActor(t,e);if(isObservable(t))return this.spawnObservable(t,e);if(isMachine(t))return this.spawnMachine(t,__assign$1(__assign$1({},r),{id:e}));if(isBehavior(t))return this.spawnBehavior(t,e);throw new Error('Unable to spawn entity "'.concat(e,'" of type "').concat(typeof t,'".'))},t.prototype.spawnMachine=function(e,r){var n=this;void 0===r&&(r={});var o=new t(e,__assign$1(__assign$1({},this.options),{parent:this,id:r.id||e.id})),i=__assign$1(__assign$1({},DEFAULT_SPAWN_OPTIONS),r);i.sync&&o.onTransition((function(t){n.send(update$1,{state:t,id:o.id})}));var a=o;return this.children.set(o.id,a),i.autoForward&&this.forwardTo.add(o.id),o.onDone((function(t){n.removeChild(o.id),n.send(toSCXMLEvent(t,{origin:o.id}))})).start(),a},t.prototype.spawnBehavior=function(t,e){var r=spawnBehavior(t,{id:e,parent:this});return this.children.set(e,r),r},t.prototype.spawnPromise=function(t,e){var r,n,o=this,i=!1;t.then((function(t){i||(n=t,o.removeChild(e),o.send(toSCXMLEvent(doneInvoke$2(e,t),{origin:e})))}),(function(t){if(!i){o.removeChild(e);var r=error$2(e,t);try{o.send(toSCXMLEvent(r,{origin:e}))}catch(t){o.devTools&&o.devTools.send(r,o.state),o.machine.strict&&o.stop()}}}));var a=((r={id:e,send:function(){},subscribe:function(e,r,n){var o=toObserver(e,r,n),i=!1;return t.then((function(t){i||(o.next(t),i||o.complete())}),(function(t){i||o.error(t)})),{unsubscribe:function(){return i=!0}}},stop:function(){i=!0},toJSON:function(){return{id:e}},getSnapshot:function(){return n}})[symbolObservable]=function(){return this},r);return this.children.set(e,a),a},t.prototype.spawnCallback=function(t,e){var r,n,o,i=this,a=!1,s=new Set,c=new Set;try{o=t((function(t){n=t,c.forEach((function(e){return e(t)})),a||i.send(toSCXMLEvent(t,{origin:e}))}),(function(t){s.add(t)}))}catch(t){this.send(error$2(e,t))}if(isPromiseLike(o))return this.spawnPromise(o,e);var u=((r={id:e,send:function(t){return s.forEach((function(e){return e(t)}))},subscribe:function(t){var e=toObserver(t);return c.add(e.next),{unsubscribe:function(){c.delete(e.next)}}},stop:function(){a=!0,isFunction(o)&&o()},toJSON:function(){return{id:e}},getSnapshot:function(){return n}})[symbolObservable]=function(){return this},r);return this.children.set(e,u),u},t.prototype.spawnObservable=function(t,e){var r,n,o=this,i=t.subscribe((function(t){n=t,o.send(toSCXMLEvent(t,{origin:e}))}),(function(t){o.removeChild(e),o.send(toSCXMLEvent(error$2(e,t),{origin:e}))}),(function(){o.removeChild(e),o.send(toSCXMLEvent(doneInvoke$2(e),{origin:e}))})),a=((r={id:e,send:function(){},subscribe:function(e,r,n){return t.subscribe(e,r,n)},stop:function(){return i.unsubscribe()},getSnapshot:function(){return n},toJSON:function(){return{id:e}}})[symbolObservable]=function(){return this},r);return this.children.set(e,a),a},t.prototype.spawnActor=function(t,e){return this.children.set(e,t),t},t.prototype.spawnActivity=function(t){var e=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(e){var r=e(this.state.context,t);this.spawnEffect(t.id,r)}},t.prototype.spawnEffect=function(t,e){var r;this.children.set(t,((r={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:e||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}})[symbolObservable]=function(){return this},r))},t.prototype.attachDev=function(){var t=getGlobal();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var e="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign$1(__assign$1({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},e),{features:__assign$1({jump:!1,skip:!1},e?e.features:void 0)}),this.machine),this.devTools.init(this.state)}registerService(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[symbolObservable]=function(){return this},t.prototype.getSnapshot=function(){return this.status===InterpreterStatus.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,e){return setTimeout(t,e)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},t.interpret=interpret,t}(),resolveSpawnOptions=function(t){return isString(t)?__assign$1(__assign$1({},DEFAULT_SPAWN_OPTIONS),{name:t}):__assign$1(__assign$1(__assign$1({},DEFAULT_SPAWN_OPTIONS),{name:uniqueId()}),t)};function spawn(t,e){var r=resolveSpawnOptions(e);return consume((function(e){return e?e.spawn(t,r.name,r):createDeferredActor(t,r.name)}))}function interpret(t,e){return new Interpreter(t,e)}function toInvokeSource(t){if("string"==typeof t){var e={type:t,toString:function(){return t}};return e}return t}function toInvokeDefinition(t){return __assign$1(__assign$1({type:invoke$1},t),{toJSON:function(){t.onDone,t.onError;var e=__rest(t,["onDone","onError"]);return __assign$1(__assign$1({},e),{type:invoke$1,src:toInvokeSource(t.src)})}})}var NULL_EVENT="",STATE_IDENTIFIER="#",WILDCARD="*",EMPTY_OBJECT={},isStateId=function(t){return t[0]===STATE_IDENTIFIER},createDefaultOptions=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},StateNode=function(){function t(e,r,n,o){var i,a=this;void 0===n&&(n="context"in e?e.context:void 0),this.config=e,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(createDefaultOptions(),r),this.parent=null==o?void 0:o.parent,this.key=this.config.key||(null==o?void 0:o.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:STATE_DELIMITER$1),this.id=this.config.id||__spreadArray([this.machine.key],__read(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(i=this.config.schema)&&void 0!==i?i:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?mapValues(this.config.states,(function(e,r){var n,o=new t(e,{},void 0,{parent:a,key:r});return Object.assign(a.idMap,__assign$1(((n={})[o.id]=o,n),o.idMap)),o})):EMPTY_OBJECT;var s=0;!function t(e){var r,n;e.order=s++;try{for(var o=__values(getChildren(e)),i=o.next();!i.done;i=o.next()){t(i.value)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(t){return t.event===NULL_EVENT})):NULL_EVENT in this.config.on),this.strict=!!this.config.strict,this.onEntry=toArray(this.config.entry||this.config.onEntry).map((function(t){return toActionObject$1(t)})),this.onExit=toArray(this.config.exit||this.config.onExit).map((function(t){return toActionObject$1(t)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=toArray(this.config.invoke).map((function(t,e){var r,n;if(isMachine(t)){var o=createInvokeId(a.id,e);return a.machine.options.services=__assign$1(((r={})[o]=t,r),a.machine.options.services),toInvokeDefinition({src:o,id:o})}if(isString(t.src)){o=t.id||createInvokeId(a.id,e);return toInvokeDefinition(__assign$1(__assign$1({},t),{id:o,src:t.src}))}if(isMachine(t.src)||isFunction(t.src)){o=t.id||createInvokeId(a.id,e);return a.machine.options.services=__assign$1(((n={})[o]=t.src,n),a.machine.options.services),toInvokeDefinition(__assign$1(__assign$1({id:o},t),{src:o}))}var i=t.src;return toInvokeDefinition(__assign$1(__assign$1({id:createInvokeId(a.id,e)},t),{src:i}))})),this.activities=toArray(this.config.activities).concat(this.invoke).map((function(t){return toActivityDefinition$1(t)})),this.transition=this.transition.bind(this),this.tags=toArray(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||getAllStateNodes(this).forEach((function(t){return t.on}))},t.prototype.withConfig=function(e,r){var n=this.options,o=n.actions,i=n.activities,a=n.guards,s=n.services,c=n.delays;return new t(this.config,{actions:__assign$1(__assign$1({},o),e.actions),activities:__assign$1(__assign$1({},i),e.activities),guards:__assign$1(__assign$1({},a),e.guards),services:__assign$1(__assign$1({},s),e.services),delays:__assign$1(__assign$1({},c),e.delays)},null!=r?r:this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return isFunction(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:mapValues(this.states,(function(t){return t.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce((function(t,e){return t[e.eventType]=t[e.eventType]||[],t[e.eventType].push(e),t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var e=t===NULL_EVENT,r=this.transitions.filter((function(r){var n=r.eventType===t;return e?n:n||r.eventType===WILDCARD}));return this.__cache.candidates[t]=r,r},t.prototype.getDelayedTransitions=function(){var t=this,e=this.config.after;if(!e)return[];var r=function(e,r){var n=after$2(isFunction(e)?"".concat(t.id,":delay[").concat(r,"]"):e,t.id);return t.onEntry.push(send$3(n,{delay:e})),t.onExit.push(cancel$2(n)),n};return(isArray$1(e)?e.map((function(t,e){var n=r(t.delay,e);return __assign$1(__assign$1({},t),{event:n})})):flatten(Object.keys(e).map((function(t,n){var o=e[t],i=isString(o)?{target:o}:o,a=isNaN(+t)?t:+t,s=r(a,n);return toArray(i).map((function(t){return __assign$1(__assign$1({},t),{event:s,delay:a})}))})))).map((function(e){var r=e.delay;return __assign$1(__assign$1({},t.formatTransition(e)),{delay:r})}))},t.prototype.getStateNodes=function(t){var e,r=this;if(!t)return[];var n=t instanceof State$1?t.value:toStateValue(t,this.delimiter);if(isString(n)){var o=this.getStateNode(n).initial;return void 0!==o?this.getStateNodes(((e={})[n]=o,e)):[this,this.states[n]]}var i=Object.keys(n),a=[this];return a.push.apply(a,__spreadArray([],__read(flatten(i.map((function(t){return r.getStateNode(t).getStateNodes(n[t])})))),!1)),a},t.prototype.handles=function(t){var e=getEventType(t);return this.events.includes(e)},t.prototype.resolveState=function(t){var e=t instanceof State$1?t:State$1.create(t),r=Array.from(getConfiguration([],this.getStateNodes(e.value)));return new State$1(__assign$1(__assign$1({},e),{value:this.resolve(e.value),configuration:r,done:isInFinalState(r,this),tags:getTagsFromConfiguration(r),machine:this.machine}))},t.prototype.transitionLeafNode=function(t,e,r){var n=this.getStateNode(t).next(e,r);return n&&n.transitions.length?n:this.next(e,r)},t.prototype.transitionCompoundNode=function(t,e,r){var n=Object.keys(t),o=this.getStateNode(n[0])._transition(t[n[0]],e,r);return o&&o.transitions.length?o:this.next(e,r)},t.prototype.transitionParallelNode=function(t,e,r){var n,o,i={};try{for(var a=__values(Object.keys(t)),s=a.next();!s.done;s=a.next()){var c=s.value,u=t[c];if(u){var l=this.getStateNode(c)._transition(u,e,r);l&&(i[c]=l)}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}var f=Object.keys(i).map((function(t){return i[t]})),p=flatten(f.map((function(t){return t.transitions})));if(!f.some((function(t){return t.transitions.length>0})))return this.next(e,r);var d=flatten(f.map((function(t){return t.entrySet}))),y=flatten(Object.keys(i).map((function(t){return i[t].configuration})));return{transitions:p,entrySet:d,exitSet:flatten(f.map((function(t){return t.exitSet}))),configuration:y,source:e,actions:flatten(Object.keys(i).map((function(t){return i[t].actions})))}},t.prototype._transition=function(t,e,r){return isString(t)?this.transitionLeafNode(t,e,r):1===Object.keys(t).length?this.transitionCompoundNode(t,e,r):this.transitionParallelNode(t,e,r)},t.prototype.getTransitionData=function(t,e){return this._transition(t.value,t,toSCXMLEvent(e))},t.prototype.next=function(t,e){var r,n,o,i=this,a=e.name,s=[],c=[];try{for(var u=__values(this.getCandidates(a)),l=u.next();!l.done;l=u.next()){var f=l.value,p=f.cond,d=f.in,y=t.context,h=!d||(isString(d)&&isStateId(d)?t.matches(toStateValue(this.getStateNodeById(d).path,this.delimiter)):matchesState(toStateValue(d,this.delimiter),path(this.path.slice(0,-2))(t.value))),$=!1;try{$=!p||evaluateGuard(this.machine,p,y,e,t)}catch(t){throw new Error("Unable to evaluate guard '".concat(p.name||p.type,"' in transition for event '").concat(a,"' in state node '").concat(this.id,"':\n").concat(t.message))}if($&&h){void 0!==f.target&&(c=f.target),s.push.apply(s,__spreadArray([],__read(f.actions),!1)),o=f;break}}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(o){if(!c.length)return{transitions:[o],entrySet:[],exitSet:[],configuration:t.value?[this]:[],source:t,actions:s};var g=flatten(c.map((function(e){return i.getRelativeStateNodes(e,t.historyValue)}))),v=!!o.internal;return{transitions:[o],entrySet:v?[]:flatten(g.map((function(t){return i.nodesFromChild(t)}))),exitSet:v?[]:[this],configuration:g,source:t,actions:s}}},t.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var e=[],r=t;r&&r!==this;)e.push(r),r=r.parent;return e.push(this),e},t.prototype.escapes=function(t){if(this===t)return!1;for(var e=this.parent;e;){if(e===t)return!1;e=e.parent}return!0},t.prototype.getActions=function(t,e,r,n){var o,i,a,s,c=getConfiguration([],n?this.getStateNodes(n.value):[this]),u=t.configuration.length?getConfiguration(c,t.configuration):c;try{for(var l=__values(u),f=l.next();!f.done;f=l.next()){has(c,y=f.value)||t.entrySet.push(y)}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}try{for(var p=__values(c),d=p.next();!d.done;d=p.next()){var y;has(u,y=d.value)&&!has(t.exitSet,y.parent)||t.exitSet.push(y)}}catch(t){a={error:t}}finally{try{d&&!d.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}var h=flatten(t.entrySet.map((function(n){var o=[];if("final"!==n.type)return o;var i=n.parent;if(!i.parent)return o;o.push(done$1(n.id,n.doneData),done$1(i.id,n.doneData?mapContext(n.doneData,e,r):void 0));var a=i.parent;return"parallel"===a.type&&getChildren(a).every((function(e){return isInFinalState(t.configuration,e)}))&&o.push(done$1(a.id)),o})));t.exitSet.sort((function(t,e){return e.order-t.order})),t.entrySet.sort((function(t,e){return t.order-e.order}));var $=new Set(t.entrySet),g=new Set(t.exitSet),v=__read([flatten(Array.from($).map((function(t){return __spreadArray(__spreadArray([],__read(t.activities.map((function(t){return start$2(t)}))),!1),__read(t.onEntry),!1)}))).concat(h.map(raise$2)),flatten(Array.from(g).map((function(t){return __spreadArray(__spreadArray([],__read(t.onExit),!1),__read(t.activities.map((function(t){return stop$2(t)}))),!1)})))],2),b=v[0],S=v[1];return toActionObjects$1(S.concat(t.actions).concat(b),this.machine.options.actions)},t.prototype.transition=function(t,e,r){void 0===t&&(t=this.initialState);var n,o=toSCXMLEvent(e);if(t instanceof State$1)n=void 0===r?t:this.resolveState(State$1.from(t,r));else{var i=isString(t)?this.resolve(pathToStateValue(this.getResolvedPath(t))):this.resolve(t),a=null!=r?r:this.machine.context;n=this.resolveState(State$1.from(i,a))}if(this.strict&&!this.events.includes(o.name)&&!isBuiltInEvent(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var s=this._transition(n.value,n,o)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:n,actions:[]},c=getConfiguration([],this.getStateNodes(n.value)),u=s.configuration.length?getConfiguration(c,s.configuration):c;return s.configuration=__spreadArray([],__read(u),!1),this.resolveTransition(s,n,n.context,o)},t.prototype.resolveRaisedTransition=function(t,e,r){var n,o=t.actions;return(t=this.transition(t,e))._event=r,t.event=r.data,(n=t.actions).unshift.apply(n,__spreadArray([],__read(o),!1)),t},t.prototype.resolveTransition=function(t,e,r,n){var o,i,a=this;void 0===n&&(n=initEvent$1);var s=t.configuration,c=!e||t.transitions.length>0,u=c?getValue(this.machine,s):void 0,l=e?e.historyValue?e.historyValue:t.source?this.machine.historyValue(e.value):void 0:void 0,f=this.getActions(t,r,n,e),p=e?__assign$1({},e.activities):{};try{for(var d=__values(f),y=d.next();!y.done;y=d.next()){var h=y.value;h.type===start$3?p[h.activity.id||h.activity.type]=h:h.type===stop$3&&(p[h.activity.id||h.activity.type]=!1)}}catch(t){o={error:t}}finally{try{y&&!y.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}var $=__read(resolveActions$1(this,e,r,n,f,this.machine.config.preserveActionOrder),2),g=$[0],v=$[1],b=__read(partition(g,(function(t){return t.type===raise$3||t.type===send$4&&t.to===SpecialTargets.Internal})),2),S=b[0],O=b[1],I=g.filter((function(t){var e;return t.type===start$3&&(null===(e=t.activity)||void 0===e?void 0:e.type)===invoke$1})),m=I.reduce((function(t,e){return t[e.activity.id]=createInvocableActor(e.activity,a.machine,v,n),t}),e?__assign$1({},e.children):{}),A=c?t.configuration:e?e.configuration:[],T=isInFinalState(A,this),_=new State$1({value:u||e.value,context:v,_event:n,_sessionid:e?e._sessionid:null,historyValue:u?l?updateHistoryValue(l,u):void 0:e?e.historyValue:void 0,history:!u||t.source?e:void 0,actions:u?O:[],activities:u?p:e?e.activities:{},events:[],configuration:A,transitions:t.transitions,children:m,done:T,tags:getTagsFromConfiguration(A),machine:this}),E=r!==v;_.changed=n.name===update$1||E;var w=_.history;w&&delete w.history;var P=!T&&(this._transient||s.some((function(t){return t._transient})));if(!(c||P&&n.name!==NULL_EVENT))return _;var R=_;if(!T)for(P&&(R=this.resolveRaisedTransition(R,{type:nullEvent$1},n));S.length;){var C=S.shift();R=this.resolveRaisedTransition(R,C._event,n)}var x=R.changed||(w?!!R.actions.length||E||typeof w.value!=typeof R.value||!stateValuesEqual(R.value,w.value):void 0);return R.changed=x,R.history=w,R},t.prototype.getStateNode=function(t){if(isStateId(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var e=this.states[t];if(!e)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return e},t.prototype.getStateNodeById=function(t){var e=isStateId(t)?t.slice(STATE_IDENTIFIER.length):t;if(e===this.id)return this;var r=this.machine.idMap[e];if(!r)throw new Error("Child state node '#".concat(e,"' does not exist on machine '").concat(this.id,"'"));return r},t.prototype.getStateNodeByPath=function(t){if("string"==typeof t&&isStateId(t))try{return this.getStateNodeById(t.slice(1))}catch(t){}for(var e=toStatePath(t,this.delimiter).slice(),r=this;e.length;){var n=e.shift();if(!n.length)break;r=r.getStateNode(n)}return r},t.prototype.resolve=function(t){var e,r=this;if(!t)return this.initialStateValue||EMPTY_OBJECT;switch(this.type){case"parallel":return mapValues(this.initialStateValue,(function(e,n){return e?r.getStateNode(n).resolve(t[n]||e):EMPTY_OBJECT}));case"compound":if(isString(t)){var n=this.getStateNode(t);return"parallel"===n.type||"compound"===n.type?((e={})[t]=n.initialStateValue,e):t}return Object.keys(t).length?mapValues(t,(function(t,e){return t?r.getStateNode(e).resolve(t):EMPTY_OBJECT})):this.initialStateValue||{};default:return t||EMPTY_OBJECT}},t.prototype.getResolvedPath=function(t){if(isStateId(t)){var e=this.machine.idMap[t.slice(STATE_IDENTIFIER.length)];if(!e)throw new Error("Unable to find state node '".concat(t,"'"));return e.path}return toStatePath(t,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var t,e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)e=mapFilterValues(this.states,(function(t){return t.initialStateValue||EMPTY_OBJECT}),(function(t){return!("history"===t.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));e=isLeafNode(this.states[this.initial])?this.initial:((t={})[this.initial]=this.states[this.initial].initialStateValue,t)}else e={};return this.__cache.initialStateValue=e,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(t,e){this._init();var r=this.getStateNodes(t);return this.resolveTransition({configuration:r,entrySet:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!=e?e:this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=isString(e.target)&&isStateId(e.target)?pathToStateValue(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(t,e,r){return void 0===r&&(r=!0),r?"history"===t.type?t.resolveHistory(e):t.initialStateNodes:[t]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var t=this;return isLeafNode(this)?[this]:"compound"!==this.type||this.initial?flatten(toStatePaths(this.initialStateValue).map((function(e){return t.getFromRelativePath(e)}))):[this]},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var e=__read(t),r=e[0],n=e.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var o=this.getStateNode(r);if("history"===o.type)return o.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(n)},t.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:mapFilterValues(this.states,(function(e,r){if(!t)return e.historyValue();var n=isString(t)?void 0:t[r];return e.historyValue(n||e.initialStateValue)}),(function(t){return!t.history}))}},t.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var r=this.parent;if(!t){var n=this.target;return n?flatten(toStatePaths(n).map((function(t){return r.getFromRelativePath(t)}))):r.initialStateNodes}var o=nestedPath(r.path,"states")(t).current;return isString(o)?[r.getStateNode(o)]:flatten(toStatePaths(o).map((function(t){return"deep"===e.history?r.getFromRelativePath(t):[r.states[t[0]]]})))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var t=this,e=flatten(Object.keys(this.states).map((function(e){return t.states[e].stateIds})));return[this.id].concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var t,e,r,n;if(this.__cache.events)return this.__cache.events;var o=this.states,i=new Set(this.ownEvents);if(o)try{for(var a=__values(Object.keys(o)),s=a.next();!s.done;s=a.next()){var c=o[s.value];if(c.states)try{for(var u=(r=void 0,__values(c.events)),l=u.next();!l.done;l=u.next()){var f=l.value;i.add("".concat(f))}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter((function(t){return!(!t.target&&!t.actions.length&&t.internal)})).map((function(t){return t.eventType})));return Array.from(t)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(t){var e=this;if(void 0!==t)return t.map((function(t){if(!isString(t))return t;var r=t[0]===e.delimiter;if(r&&!e.parent)return e.getStateNodeByPath(t.slice(1));var n=r?e.key+t:t;if(!e.parent)return e.getStateNodeByPath(n);try{return e.parent.getStateNodeByPath(n)}catch(t){throw new Error("Invalid transition definition for state node '".concat(e.id,"':\n").concat(t.message))}}))},t.prototype.formatTransition=function(t){var e=this,r=normalizeTarget(t.target),n="internal"in t?t.internal:!r||r.some((function(t){return isString(t)&&t[0]===e.delimiter})),o=this.machine.options.guards,i=this.resolveTarget(r),a=__assign$1(__assign$1({},t),{actions:toActionObjects$1(toArray(t.actions)),cond:toGuard(t.cond,o),target:i,source:this,internal:n,eventType:t.event,toJSON:function(){return __assign$1(__assign$1({},a),{target:a.target?a.target.map((function(t){return"#".concat(t.id)})):void 0,source:"#".concat(e.id)})}});return a},t.prototype.formatTransitions=function(){var t,e,r,n=this;if(this.config.on)if(Array.isArray(this.config.on))r=this.config.on;else{var o=this.config.on,i=WILDCARD,a=o[i],s=void 0===a?[]:a,c=__rest(o,["symbol"==typeof i?i:i+""]);r=flatten(Object.keys(c).map((function(t){return toTransitionConfigArray(t,c[t])})).concat(toTransitionConfigArray(WILDCARD,s)))}else r=[];var u=this.config.always?toTransitionConfigArray("",this.config.always):[],l=this.config.onDone?toTransitionConfigArray(String(done$1(this.id)),this.config.onDone):[],f=flatten(this.invoke.map((function(t){var e=[];return t.onDone&&e.push.apply(e,__spreadArray([],__read(toTransitionConfigArray(String(doneInvoke$2(t.id)),t.onDone)),!1)),t.onError&&e.push.apply(e,__spreadArray([],__read(toTransitionConfigArray(String(error$2(t.id)),t.onError)),!1)),e}))),p=this.after,d=flatten(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],__read(l),!1),__read(f),!1),__read(r),!1),__read(u),!1).map((function(t){return toArray(t).map((function(t){return n.formatTransition(t)}))})));try{for(var y=__values(p),h=y.next();!h.done;h=y.next()){var $=h.value;d.push($)}}catch(e){t={error:e}}finally{try{h&&!h.done&&(e=y.return)&&e.call(y)}finally{if(t)throw t.error}}return d},t}();function Machine(t,e,r){return void 0===r&&(r=t.context),new StateNode(t,e,r)}function createMachine(t,e){return new StateNode(t,e)}function mapState(t,e){var r,n,o;try{for(var i=__values(Object.keys(t)),a=i.next();!a.done;a=i.next()){var s=a.value;matchesState(s,e)&&(!o||e.length>o.length)&&(o=s)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return t[o]}function matchState(t,e,r){var n,o,i=State$1.from(t,t instanceof State$1?t.context:void 0);try{for(var a=__values(e),s=a.next();!s.done;s=a.next()){var c=__read(s.value,2),u=c[0],l=c[1];if(i.matches(u))return l(i)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return r(i)}function createSchema(t){return t}var t=createSchema,assign$2=assign$3,send$2=send$3,sendParent$1=sendParent$2,sendUpdate$1=sendUpdate$2,forwardTo$1=forwardTo$2,doneInvoke$1=doneInvoke$2,es=Object.freeze({__proto__:null,get ActionTypes(){return ActionTypes},Interpreter:Interpreter,get InterpreterStatus(){return InterpreterStatus},Machine:Machine,get SpecialTargets(){return SpecialTargets},State:State$1,StateNode:StateNode,actions:actions$1,assign:assign$2,createMachine:createMachine,createSchema:createSchema,doneInvoke:doneInvoke$1,forwardTo:forwardTo$1,interpret:interpret,mapState:mapState,matchState:matchState,matchesState:matchesState,send:send$2,sendParent:sendParent$1,sendUpdate:sendUpdate$1,spawn:spawn,spawnBehavior:spawnBehavior,t:t,toActorRef:toActorRef,toEventObject:toEventObject,toObserver:toObserver,toSCXMLEvent:toSCXMLEvent}),require$$0=getAugmentedNamespace(es),callStateMachine={},actions={},_tslib$1={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),
/*! *****************************************************************************
  	Copyright (c) Microsoft Corporation.

  	Permission to use, copy, modify, and/or distribute this software for any
  	purpose with or without fee is hereby granted.

  	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  	PERFORMANCE OF THIS SOFTWARE.
  	***************************************************************************** */
t.__assign=function(){return t.__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},t.__assign.apply(this,arguments)},t.__read=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},t.__rest=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},t.__spreadArray=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},t.__values=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}}(_tslib$1);var types$3={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"}(t.ActionTypes||(t.ActionTypes={})),t.SpecialTargets=void 0,function(t){t.Parent="#_parent",t.Internal="#_internal"}(t.SpecialTargets||(t.SpecialTargets={}))}(types$3);var actionTypes$1={};Object.defineProperty(actionTypes$1,"__esModule",{value:!0});var types$2=types$3,start$1=types$2.ActionTypes.Start,stop$1=types$2.ActionTypes.Stop,raise$1=types$2.ActionTypes.Raise,send$1=types$2.ActionTypes.Send,cancel$1=types$2.ActionTypes.Cancel,nullEvent=types$2.ActionTypes.NullEvent,assign$1=types$2.ActionTypes.Assign,after$1=types$2.ActionTypes.After,doneState=types$2.ActionTypes.DoneState,log$3=types$2.ActionTypes.Log,init=types$2.ActionTypes.Init,invoke=types$2.ActionTypes.Invoke,errorExecution=types$2.ActionTypes.ErrorExecution,errorPlatform=types$2.ActionTypes.ErrorPlatform,error$1=types$2.ActionTypes.ErrorCustom,update=types$2.ActionTypes.Update,choose$1=types$2.ActionTypes.Choose,pure$1=types$2.ActionTypes.Pure;actionTypes$1.after=after$1,actionTypes$1.assign=assign$1,actionTypes$1.cancel=cancel$1,actionTypes$1.choose=choose$1,actionTypes$1.doneState=doneState,actionTypes$1.error=error$1,actionTypes$1.errorExecution=errorExecution,actionTypes$1.errorPlatform=errorPlatform,actionTypes$1.init=init,actionTypes$1.invoke=invoke,actionTypes$1.log=log$3,actionTypes$1.nullEvent=nullEvent,actionTypes$1.pure=pure$1,actionTypes$1.raise=raise$1,actionTypes$1.send=send$1,actionTypes$1.start=start$1,actionTypes$1.stop=stop$1,actionTypes$1.update=update;var utils$1={},constants={};Object.defineProperty(constants,"__esModule",{value:!0});var STATE_DELIMITER=".",EMPTY_ACTIVITY_MAP={},DEFAULT_GUARD_TYPE="xstate.guard",TARGETLESS_KEY="";constants.DEFAULT_GUARD_TYPE=DEFAULT_GUARD_TYPE,constants.EMPTY_ACTIVITY_MAP=EMPTY_ACTIVITY_MAP,constants.STATE_DELIMITER=STATE_DELIMITER,constants.TARGETLESS_KEY=TARGETLESS_KEY;var environment$1={};Object.defineProperty(environment$1,"__esModule",{value:!0});var IS_PRODUCTION=!0;environment$1.IS_PRODUCTION=IS_PRODUCTION,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e,r=_tslib$1,n=constants,o=environment$1;function i(t,e){try{return y(t)?t:t.toString().split(e)}catch(e){throw new Error("'".concat(t,"' is not a valid state path."))}}function a(t){return"object"==typeof t&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function s(t,e){return a(t)?t.value:y(t)?c(t):"string"!=typeof t?t:c(i(t,e))}function c(t){if(1===t.length)return t[0];for(var e={},r=e,n=0;n<t.length-1;n++)n===t.length-2?r[t[n]]=t[n+1]:(r[t[n]]={},r=r[t[n]]);return e}function u(t,e){for(var r={},n=Object.keys(t),o=0;o<n.length;o++){var i=n[o];r[i]=e(t[i],i,t,o)}return r}function l(t){var e;return(e=[]).concat.apply(e,r.__spreadArray([],r.__read(t),!1))}function f(t){return y(t)?t:[t]}function p(t){return void 0===t?[]:f(t)}function d(t,e){return u(t.states,(function(t,r){if(t){var n=($(e)?void 0:e[r])||(t?t.current:void 0);if(n)return{current:n,states:d(t,n)}}}))}function y(t){return Array.isArray(t)}function h(t){return"function"==typeof t}function $(t){return"string"==typeof t}t.warn=function(){},o.IS_PRODUCTION||(t.warn=function(t,e){var r=t instanceof Error?t:void 0;if((r||!t)&&void 0!==console){var n=["Warning: ".concat(e)];r&&n.push(r),console.warn.apply(console,n)}});var g=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}(),v=((e={})[g]=function(){return this},e[Symbol.observable]=function(){return this},e);function b(t){return!!t&&"__xstatenode"in t}var S=function(){var t=0;return function(){return(++t).toString(16)}}();function O(t,e){return $(t)||"number"==typeof t?r.__assign({type:t},e):t}t.createInvokeId=function(t,e){return"".concat(t,":invocation[").concat(e,"]")},t.evaluateGuard=function(t,e,r,o,i){var a=t.options.guards,s={state:i,cond:e,_event:o};if(e.type===n.DEFAULT_GUARD_TYPE)return((null==a?void 0:a[e.name])||e.predicate)(r,o.data,s);var c=null==a?void 0:a[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(r,o.data,s)},t.flatten=l,t.getActionType=function(t){try{return $(t)||"number"==typeof t?"".concat(t):h(t)?t.name:t.type}catch(t){throw new Error("Actions must be strings or objects with a string action.type property.")}},t.getEventType=function(t){try{return $(t)||"number"==typeof t?"".concat(t):t.type}catch(t){throw new Error("Events must be strings or objects with a string event.type property.")}},t.interopSymbols=v,t.isActor=function(t){return!!t&&"function"==typeof t.send},t.isArray=y,t.isBehavior=function(t){return null!==t&&"object"==typeof t&&"transition"in t&&"function"==typeof t.transition},t.isBuiltInEvent=function(t){return/^(done|error)\./.test(t)},t.isFunction=h,t.isMachine=b,t.isObservable=function(t){try{return"subscribe"in t&&h(t.subscribe)}catch(t){return!1}},t.isPromiseLike=function(t){return t instanceof Promise||!(null===t||!h(t)&&"object"!=typeof t||!h(t.then))},t.isStateLike=a,t.isString=$,t.keys=function(t){return Object.keys(t)},t.mapContext=function(t,e,n){var o,i;if(h(t))return t(e,n.data);var a={};try{for(var s=r.__values(Object.keys(t)),c=s.next();!c.done;c=s.next()){var u=c.value,l=t[u];h(l)?a[u]=l(e,n.data):a[u]=l}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return a},t.mapFilterValues=function(t,e,n){var o,i,a={};try{for(var s=r.__values(Object.keys(t)),c=s.next();!c.done;c=s.next()){var u=c.value,l=t[u];n(l)&&(a[u]=e(l,u,t))}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return a},t.mapValues=u,t.matchesState=function t(e,r,o){void 0===o&&(o=n.STATE_DELIMITER);var i=s(e,o),a=s(r,o);return $(a)?!!$(i)&&a===i:$(i)?i in a:Object.keys(i).every((function(e){return e in a&&t(i[e],a[e])}))},t.nestedPath=function(t,e){return function(n){var o,i,a=n;try{for(var s=r.__values(t),c=s.next();!c.done;c=s.next()){var u=c.value;a=a[e][u]}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return a}},t.normalizeTarget=function(t){if(void 0!==t&&t!==n.TARGETLESS_KEY)return p(t)},t.partition=function(t,e){var n,o,i=r.__read([[],[]],2),a=i[0],s=i[1];try{for(var c=r.__values(t),u=c.next();!u.done;u=c.next()){var l=u.value;e(l)?a.push(l):s.push(l)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}return[a,s]},t.path=function(t){return function(e){var n,o,i=e;try{for(var a=r.__values(t),s=a.next();!s.done;s=a.next()){i=i[s.value]}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i}},t.pathToStateValue=c,t.pathsToStateValue=function(t){var e,n,o={};if(t&&1===t.length&&1===t[0].length)return t[0][0];try{for(var i=r.__values(t),a=i.next();!a.done;a=i.next())for(var s=a.value,c=o,u=0;u<s.length;u++){var l=s[u];if(u===s.length-2){c[l]=s[u+1];break}c[l]=c[l]||{},c=c[l]}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return o},t.reportUnhandledExceptionOnInvocation=function(t,e,r){if(!o.IS_PRODUCTION){var n=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";if(t===e)console.error("Missing onError handler for invocation '".concat(r,"', error was '").concat(t,"'.").concat(n));else{var i=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(r,"'. ")+"Original error: '".concat(t,"'. ").concat(n," Current error is '").concat(e,"'.").concat(i))}}},t.symbolObservable=g,t.toArray=p,t.toArrayStrict=f,t.toEventObject=O,t.toGuard=function(t,e){if(t)return $(t)?{type:n.DEFAULT_GUARD_TYPE,name:t,predicate:e?e[t]:void 0}:h(t)?{type:n.DEFAULT_GUARD_TYPE,name:t.name,predicate:t}:t},t.toInvokeSource=function(t){return"string"==typeof t?{type:t}:t},t.toObserver=function(t,e,r){if("object"==typeof t)return t;var n=function(){};return{next:t,error:e||n,complete:r||n}},t.toSCXMLEvent=function(t,e){if(!$(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var n=O(t);return r.__assign({name:n.type,data:n,$$type:"scxml",type:"external"},e)},t.toStatePath=i,t.toStatePaths=function t(e){if(!e)return[[]];if($(e))return[[e]];var r=l(Object.keys(e).map((function(r){var n=e[r];return"string"==typeof n||n&&Object.keys(n).length?t(e[r]).map((function(t){return[r].concat(t)})):[[r]]})));return r},t.toStateValue=s,t.toTransitionConfigArray=function(t,e){return f(e).map((function(e){return void 0===e||"string"==typeof e||b(e)?{target:e,event:t}:r.__assign(r.__assign({},e),{event:t})}))},t.uniqueId=S,t.updateContext=function(e,n,i,a){o.IS_PRODUCTION||t.warn(!!e,"Attempting to update undefined context");var s=e?i.reduce((function(t,e){var o,i,s=e.assignment,c={state:a,action:e,_event:n},u={};if(h(s))u=s(t,n.data,c);else try{for(var l=r.__values(Object.keys(s)),f=l.next();!f.done;f=l.next()){var p=f.value,d=s[p];u[p]=h(d)?d(t,n.data,c):d}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}return Object.assign({},t,u)}),e):e;return s},t.updateHistoryStates=d,t.updateHistoryValue=function(t,e){return{current:e,states:d(t,e)}}}(utils$1),Object.defineProperty(actions,"__esModule",{value:!0});var _tslib=_tslib$1,types$1=types$3,actionTypes=actionTypes$1,utils=utils$1,environment=environment$1,initEvent=utils.toSCXMLEvent({type:actionTypes.init});function getActionFunction(t,e){return e&&e[t]||void 0}function toActionObject(t,e){var r;if(utils.isString(t)||"number"==typeof t){var n=getActionFunction(t,e);r=utils.isFunction(n)?{type:t,exec:n}:n||{type:t,exec:void 0}}else if(utils.isFunction(t))r={type:t.name||t.toString(),exec:t};else{n=getActionFunction(t.type,e);if(utils.isFunction(n))r=_tslib.__assign(_tslib.__assign({},t),{exec:n});else if(n){var o=n.type||t.type;r=_tslib.__assign(_tslib.__assign(_tslib.__assign({},n),t),{type:o})}else r=t}return r}var toActionObjects=function(t,e){return t?(utils.isArray(t)?t:[t]).map((function(t){return toActionObject(t,e)})):[]};function toActivityDefinition(t){var e=toActionObject(t);return _tslib.__assign(_tslib.__assign({id:utils.isString(t)?t:e.id},e),{type:e.type})}function raise(t){return utils.isString(t)?{type:actionTypes.raise,event:t}:send(t,{to:types$1.SpecialTargets.Internal})}function resolveRaise(t){return{type:actionTypes.raise,_event:utils.toSCXMLEvent(t.event)}}function send(t,e){return{to:e?e.to:void 0,type:actionTypes.send,event:utils.isFunction(t)?t:utils.toEventObject(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:utils.isFunction(t)?t.name:utils.getEventType(t)}}function resolveSend(t,e,r,n){var o,i={_event:r},a=utils.toSCXMLEvent(utils.isFunction(t.event)?t.event(e,r.data,i):t.event);if(utils.isString(t.delay)){var s=n&&n[t.delay];o=utils.isFunction(s)?s(e,r.data,i):s}else o=utils.isFunction(t.delay)?t.delay(e,r.data,i):t.delay;var c=utils.isFunction(t.to)?t.to(e,r.data,i):t.to;return _tslib.__assign(_tslib.__assign({},t),{to:c,_event:a,event:a.data,delay:o})}function sendParent(t,e){return send(t,_tslib.__assign(_tslib.__assign({},e),{to:types$1.SpecialTargets.Parent}))}function sendTo(t,e,r){return send(e,_tslib.__assign(_tslib.__assign({},r),{to:t}))}function sendUpdate(){return sendParent(actionTypes.update)}function respond(t,e){return send(t,_tslib.__assign(_tslib.__assign({},e),{to:function(t,e,r){return r._event.origin}}))}var defaultLogExpr=function(t,e){return{context:t,event:e}};function log$2(t,e){return void 0===t&&(t=defaultLogExpr),{type:actionTypes.log,label:e,expr:t}}var resolveLog=function(t,e,r){return _tslib.__assign(_tslib.__assign({},t),{value:utils.isString(t.expr)?t.expr:t.expr(e,r.data,{_event:r})})},cancel=function(t){return{type:actionTypes.cancel,sendId:t}};function start(t){var e=toActivityDefinition(t);return{type:types$1.ActionTypes.Start,activity:e,exec:void 0}}function stop(t){var e=utils.isFunction(t)?t:toActivityDefinition(t);return{type:types$1.ActionTypes.Stop,activity:e,exec:void 0}}function resolveStop(t,e,r){var n=utils.isFunction(t.activity)?t.activity(e,r.data):t.activity,o="string"==typeof n?{id:n}:n;return{type:types$1.ActionTypes.Stop,activity:o}}var assign=function(t){return{type:actionTypes.assign,assignment:t}};function isActionObject(t){return"object"==typeof t&&"type"in t}function after(t,e){var r=e?"#".concat(e):"";return"".concat(types$1.ActionTypes.After,"(").concat(t,")").concat(r)}function done(t,e){var r="".concat(types$1.ActionTypes.DoneState,".").concat(t),n={type:r,data:e,toString:function(){return r}};return n}function doneInvoke(t,e){var r="".concat(types$1.ActionTypes.DoneInvoke,".").concat(t),n={type:r,data:e,toString:function(){return r}};return n}function error(t,e){var r="".concat(types$1.ActionTypes.ErrorPlatform,".").concat(t),n={type:r,data:e,toString:function(){return r}};return n}function pure(t){return{type:types$1.ActionTypes.Pure,get:t}}function forwardTo(t,e){return send((function(t,e){return e}),_tslib.__assign(_tslib.__assign({},e),{to:t}))}function escalate(t,e){return sendParent((function(e,r,n){return{type:actionTypes.error,data:utils.isFunction(t)?t(e,r,n):t}}),_tslib.__assign(_tslib.__assign({},e),{to:types$1.SpecialTargets.Parent}))}function choose(t){return{type:types$1.ActionTypes.Choose,conds:t}}function resolveActions(t,e,r,n,o,i){void 0===i&&(i=!1);var a=_tslib.__read(i?[[],o]:utils.partition(o,(function(t){return t.type===actionTypes.assign})),2),s=a[0],c=a[1],u=s.length?utils.updateContext(r,n,s,e):r,l=i?[r]:void 0,f=utils.flatten(c.map((function(r){var o;switch(r.type){case actionTypes.raise:return resolveRaise(r);case actionTypes.send:var a=resolveSend(r,u,n,t.options.delays);return environment.IS_PRODUCTION||utils.warn(!utils.isString(r.delay)||"number"==typeof a.delay,"No delay reference for delay expression '".concat(r.delay,"' was found on machine '").concat(t.id,"'")),a;case actionTypes.log:return resolveLog(r,u,n);case actionTypes.choose:if(!(p=null===(o=r.conds.find((function(r){var o=utils.toGuard(r.cond,t.options.guards);return!o||utils.evaluateGuard(t,o,u,n,e)})))||void 0===o?void 0:o.actions))return[];var s=_tslib.__read(resolveActions(t,e,u,n,toActionObjects(utils.toArray(p),t.options.actions),i),2),c=s[0],f=s[1];return u=f,null==l||l.push(u),c;case actionTypes.pure:var p;if(!(p=r.get(u,n.data)))return[];var d=_tslib.__read(resolveActions(t,e,u,n,toActionObjects(utils.toArray(p),t.options.actions),i),2),y=d[0],h=d[1];return u=h,null==l||l.push(u),y;case actionTypes.stop:return resolveStop(r,u,n);case actionTypes.assign:u=utils.updateContext(u,n,[r],e),null==l||l.push(u);break;default:var $=toActionObject(r,t.options.actions),g=$.exec;if(g&&l){var v=l.length-1;$=_tslib.__assign(_tslib.__assign({},$),{exec:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];g.apply(void 0,_tslib.__spreadArray([l[v]],_tslib.__read(e),!1))}})}return $}})).filter((function(t){return!!t})));return[f,u]}actions.actionTypes=actionTypes,actions.after=after,actions.assign=assign,actions.cancel=cancel,actions.choose=choose,actions.done=done,actions.doneInvoke=doneInvoke,actions.error=error,actions.escalate=escalate,actions.forwardTo=forwardTo,actions.getActionFunction=getActionFunction,actions.initEvent=initEvent,actions.isActionObject=isActionObject,actions.log=log$2,actions.pure=pure,actions.raise=raise,actions.resolveActions=resolveActions,actions.resolveLog=resolveLog,actions.resolveRaise=resolveRaise,actions.resolveSend=resolveSend,actions.resolveStop=resolveStop,actions.respond=respond,actions.send=send,actions.sendParent=sendParent,actions.sendTo=sendTo,actions.sendUpdate=sendUpdate,actions.start=start,actions.stop=stop,actions.toActionObject=toActionObject,actions.toActionObjects=toActionObjects,actions.toActivityDefinition=toActivityDefinition;var log$1={};Object.defineProperty(log$1,"__esModule",{value:!0}),log$1.EventAcceptedPrefix=log$1.EventRejectedPrefix=void 0,log$1.EventRejectedPrefix="ð[Event Rejected]: ",log$1.EventAcceptedPrefix="ð[Event Accepted]: ";var types={};!function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.CallState=void 0,(e=t.CallState||(t.CallState={})).Idle="idle",e.Ringing="ringing",e.Calling="calling"}(types),function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCallContext=void 0;var r=require$$0,n=actions,o=log$1,i=types;t.defaultCallContext={chatId:"",customerInfo:"",callId:""};var a=(0,r.createMachine)({id:"call",initial:i.CallState.Idle,context:t.defaultCallContext,states:(e={},e[i.CallState.Idle]={on:{onCall:{target:i.CallState.Ringing,actions:[(0,n.assign)({chatId:function(t,e){return""},customerInfo:function(t,e){return""},callId:function(t,e){return""},params:function(t,e){}}),(0,n.assign)({chatId:function(t,e){return e.chatId},customerInfo:function(t,e){return e.customerInfo?e.customerInfo:t.customerInfo},params:function(t,e){return e.params?e.params:t.params}}),(0,n.log)((function(t,e){return"event: ".concat(e.type,", chatId: ").concat(t.chatId,", customerInfo:").concat(t.customerInfo)}),"".concat(o.EventAcceptedPrefix))]}}},e[i.CallState.Ringing]={on:{onTalkBegin:{target:i.CallState.Calling,actions:[(0,n.assign)({callId:function(t,e){return e.callId?e.callId:t.callId}}),(0,n.log)((function(t,e){return"event: ".concat(e.type,", chatId: ").concat(t.chatId)}),"".concat(o.EventAcceptedPrefix))]},onClosed:{target:i.CallState.Idle,actions:[(0,n.log)((function(t,e){return"event: ".concat(e.type,", chatId: ").concat(t.chatId)}),"".concat(o.EventAcceptedPrefix))]},onDataUpdate:{actions:[(0,n.assign)({customerInfo:function(t,e){return e.customerInfo?e.customerInfo:t.customerInfo},params:function(t,e){return e.params?e.params:t.params}}),(0,n.log)((function(t,e){return"event: ".concat(e.type,", chatId: ").concat(t.chatId,", customerInfo:").concat(t.customerInfo)}),"".concat(o.EventAcceptedPrefix))]}}},e[i.CallState.Calling]={on:{onClosed:{target:i.CallState.Idle,actions:[(0,n.log)((function(t,e){return"event: ".concat(e.type,", chatId: ").concat(t.chatId)}),"".concat(o.EventAcceptedPrefix))]},onDataUpdate:{actions:[(0,n.assign)({customerInfo:function(t,e){return e.customerInfo?e.customerInfo:t.customerInfo}}),(0,n.log)((function(t,e){return"event: ".concat(e.type,", chatId: ").concat(t.chatId,", customerInfo:").concat(t.customerInfo)}),"".concat(o.EventAcceptedPrefix))]}}},e)});t.default=a}(callStateMachine);var __assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},__assign.apply(this,arguments)},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(callService,"__esModule",{value:!0});var xstate_1=require$$0,callStateMachine_1=__importStar(callStateMachine),createCallService=function(t,e){void 0===t&&(t={});var r=callStateMachine_1.defaultCallContext;e&&(r=__assign(__assign({},callStateMachine_1.defaultCallContext),e));var n=callStateMachine_1.default.withContext(r);return(0,xstate_1.interpret)(n,t)},_default=callService.default=createCallService,LIB_VERSION="0.0.9",typedArrayConstructor={exports:{}},arrayBufferBasicDetection="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,NATIVE_ARRAY_BUFFER$1=arrayBufferBasicDetection,DESCRIPTORS$2=descriptors,global$a=global$u,isCallable$1=isCallable$p,isObject$4=isObject$g,hasOwn$1=hasOwnProperty_1,classof$3=classof$b,tryToString$1=tryToString$6,createNonEnumerableProperty$2=createNonEnumerableProperty$8,defineBuiltIn=defineBuiltIn$b,defineBuiltInAccessor$2=defineBuiltInAccessor$5,isPrototypeOf$1=objectIsPrototypeOf,getPrototypeOf$1=objectGetPrototypeOf,setPrototypeOf$3=objectSetPrototypeOf,wellKnownSymbol$2=wellKnownSymbol$o,uid=uid$3,InternalStateModule$2=internalState,enforceInternalState$1=InternalStateModule$2.enforce,getInternalState$1=InternalStateModule$2.get,Int8Array$4=global$a.Int8Array,Int8ArrayPrototype$1=Int8Array$4&&Int8Array$4.prototype,Uint8ClampedArray$1=global$a.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray$1&&Uint8ClampedArray$1.prototype,TypedArray$1=Int8Array$4&&getPrototypeOf$1(Int8Array$4),TypedArrayPrototype$2=Int8ArrayPrototype$1&&getPrototypeOf$1(Int8ArrayPrototype$1),ObjectPrototype$1=Object.prototype,TypeError$1=global$a.TypeError,TO_STRING_TAG=wellKnownSymbol$2("toStringTag"),TYPED_ARRAY_TAG$1=uid("TYPED_ARRAY_TAG"),TYPED_ARRAY_CONSTRUCTOR="TypedArrayConstructor",NATIVE_ARRAY_BUFFER_VIEWS$2=NATIVE_ARRAY_BUFFER$1&&!!setPrototypeOf$3&&"Opera"!==classof$3(global$a.opera),TYPED_ARRAY_TAG_REQUIRED=!1,NAME,Constructor,Prototype,TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BigIntArrayConstructorsList={BigInt64Array:8,BigUint64Array:8},isView=function(t){if(!isObject$4(t))return!1;var e=classof$3(t);return"DataView"===e||hasOwn$1(TypedArrayConstructorsList,e)||hasOwn$1(BigIntArrayConstructorsList,e)},getTypedArrayConstructor$1=function(t){var e=getPrototypeOf$1(t);if(isObject$4(e)){var r=getInternalState$1(e);return r&&hasOwn$1(r,TYPED_ARRAY_CONSTRUCTOR)?r[TYPED_ARRAY_CONSTRUCTOR]:getTypedArrayConstructor$1(e)}},isTypedArray$1=function(t){if(!isObject$4(t))return!1;var e=classof$3(t);return hasOwn$1(TypedArrayConstructorsList,e)||hasOwn$1(BigIntArrayConstructorsList,e)},aTypedArray$m=function(t){if(isTypedArray$1(t))return t;throw TypeError$1("Target is not a typed array")},aTypedArrayConstructor$3=function(t){if(isCallable$1(t)&&(!setPrototypeOf$3||isPrototypeOf$1(TypedArray$1,t)))return t;throw TypeError$1(tryToString$1(t)+" is not a typed array constructor")},exportTypedArrayMethod$n=function(t,e,r,n){if(DESCRIPTORS$2){if(r)for(var o in TypedArrayConstructorsList){var i=global$a[o];if(i&&hasOwn$1(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}TypedArrayPrototype$2[t]&&!r||defineBuiltIn(TypedArrayPrototype$2,t,r?e:NATIVE_ARRAY_BUFFER_VIEWS$2&&Int8ArrayPrototype$1[t]||e,n)}},exportTypedArrayStaticMethod=function(t,e,r){var n,o;if(DESCRIPTORS$2){if(setPrototypeOf$3){if(r)for(n in TypedArrayConstructorsList)if((o=global$a[n])&&hasOwn$1(o,t))try{delete o[t]}catch(t){}if(TypedArray$1[t]&&!r)return;try{return defineBuiltIn(TypedArray$1,t,r?e:NATIVE_ARRAY_BUFFER_VIEWS$2&&TypedArray$1[t]||e)}catch(t){}}for(n in TypedArrayConstructorsList)!(o=global$a[n])||o[t]&&!r||defineBuiltIn(o,t,e)}};for(NAME in TypedArrayConstructorsList)Constructor=global$a[NAME],Prototype=Constructor&&Constructor.prototype,Prototype?enforceInternalState$1(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor:NATIVE_ARRAY_BUFFER_VIEWS$2=!1;for(NAME in BigIntArrayConstructorsList)Constructor=global$a[NAME],Prototype=Constructor&&Constructor.prototype,Prototype&&(enforceInternalState$1(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor);if((!NATIVE_ARRAY_BUFFER_VIEWS$2||!isCallable$1(TypedArray$1)||TypedArray$1===Function.prototype)&&(TypedArray$1=function(){throw TypeError$1("Incorrect invocation")},NATIVE_ARRAY_BUFFER_VIEWS$2))for(NAME in TypedArrayConstructorsList)global$a[NAME]&&setPrototypeOf$3(global$a[NAME],TypedArray$1);if((!NATIVE_ARRAY_BUFFER_VIEWS$2||!TypedArrayPrototype$2||TypedArrayPrototype$2===ObjectPrototype$1)&&(TypedArrayPrototype$2=TypedArray$1.prototype,NATIVE_ARRAY_BUFFER_VIEWS$2))for(NAME in TypedArrayConstructorsList)global$a[NAME]&&setPrototypeOf$3(global$a[NAME].prototype,TypedArrayPrototype$2);if(NATIVE_ARRAY_BUFFER_VIEWS$2&&getPrototypeOf$1(Uint8ClampedArrayPrototype)!==TypedArrayPrototype$2&&setPrototypeOf$3(Uint8ClampedArrayPrototype,TypedArrayPrototype$2),DESCRIPTORS$2&&!hasOwn$1(TypedArrayPrototype$2,TO_STRING_TAG))for(NAME in TYPED_ARRAY_TAG_REQUIRED=!0,defineBuiltInAccessor$2(TypedArrayPrototype$2,TO_STRING_TAG,{configurable:!0,get:function(){return isObject$4(this)?this[TYPED_ARRAY_TAG$1]:void 0}}),TypedArrayConstructorsList)global$a[NAME]&&createNonEnumerableProperty$2(global$a[NAME],TYPED_ARRAY_TAG$1,NAME);var arrayBufferViewCore={NATIVE_ARRAY_BUFFER_VIEWS:NATIVE_ARRAY_BUFFER_VIEWS$2,TYPED_ARRAY_TAG:TYPED_ARRAY_TAG_REQUIRED&&TYPED_ARRAY_TAG$1,aTypedArray:aTypedArray$m,aTypedArrayConstructor:aTypedArrayConstructor$3,exportTypedArrayMethod:exportTypedArrayMethod$n,exportTypedArrayStaticMethod:exportTypedArrayStaticMethod,getTypedArrayConstructor:getTypedArrayConstructor$1,isView:isView,isTypedArray:isTypedArray$1,TypedArray:TypedArray$1,TypedArrayPrototype:TypedArrayPrototype$2},global$9=global$u,fails$9=fails$z,checkCorrectnessOfIteration=checkCorrectnessOfIteration$2,NATIVE_ARRAY_BUFFER_VIEWS$1=arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS,ArrayBuffer$3=global$9.ArrayBuffer,Int8Array$3=global$9.Int8Array,typedArrayConstructorsRequireWrappers=!NATIVE_ARRAY_BUFFER_VIEWS$1||!fails$9((function(){Int8Array$3(1)}))||!fails$9((function(){new Int8Array$3(-1)}))||!checkCorrectnessOfIteration((function(t){new Int8Array$3,new Int8Array$3(null),new Int8Array$3(1.5),new Int8Array$3(t)}),!0)||fails$9((function(){return 1!==new Int8Array$3(new ArrayBuffer$3(2),1,void 0).length})),toIntegerOrInfinity$3=toIntegerOrInfinity$8,toLength$3=toLength$6,$RangeError$2=RangeError,toIndex$2=function(t){if(void 0===t)return 0;var e=toIntegerOrInfinity$3(t),r=toLength$3(e);if(e!==r)throw $RangeError$2("Wrong length or index");return r},$Array$1=Array,abs=Math.abs,pow=Math.pow,floor$2=Math.floor,log=Math.log,LN2=Math.LN2,pack=function(t,e,r){var n,o,i,a=$Array$1(r),s=8*r-e-1,c=(1<<s)-1,u=c>>1,l=23===e?pow(2,-24)-pow(2,-77):0,f=t<0||0===t&&1/t<0?1:0,p=0;for((t=abs(t))!=t||t===1/0?(o=t!=t?1:0,n=c):(n=floor$2(log(t)/LN2),t*(i=pow(2,-n))<1&&(n--,i*=2),(t+=n+u>=1?l/i:l*pow(2,1-u))*i>=2&&(n++,i/=2),n+u>=c?(o=0,n=c):n+u>=1?(o=(t*i-1)*pow(2,e),n+=u):(o=t*pow(2,u-1)*pow(2,e),n=0));e>=8;)a[p++]=255&o,o/=256,e-=8;for(n=n<<e|o,s+=e;s>0;)a[p++]=255&n,n/=256,s-=8;return a[--p]|=128*f,a},unpack=function(t,e){var r,n=t.length,o=8*n-e-1,i=(1<<o)-1,a=i>>1,s=o-7,c=n-1,u=t[c--],l=127&u;for(u>>=7;s>0;)l=256*l+t[c--],s-=8;for(r=l&(1<<-s)-1,l>>=-s,s+=e;s>0;)r=256*r+t[c--],s-=8;if(0===l)l=1-a;else{if(l===i)return r?NaN:u?-1/0:1/0;r+=pow(2,e),l-=a}return(u?-1:1)*r*pow(2,l-e)},ieee754={pack:pack,unpack:unpack},toObject$4=toObject$b,toAbsoluteIndex$3=toAbsoluteIndex$6,lengthOfArrayLike$7=lengthOfArrayLike$d,arrayFill$1=function(t){for(var e=toObject$4(this),r=lengthOfArrayLike$7(e),n=arguments.length,o=toAbsoluteIndex$3(n>1?arguments[1]:void 0,r),i=n>2?arguments[2]:void 0,a=void 0===i?r:toAbsoluteIndex$3(i,r);a>o;)e[o++]=t;return e},global$8=global$u,uncurryThis$6=functionUncurryThis,DESCRIPTORS$1=descriptors,NATIVE_ARRAY_BUFFER=arrayBufferBasicDetection,FunctionName=functionName,createNonEnumerableProperty$1=createNonEnumerableProperty$8,defineBuiltInAccessor$1=defineBuiltInAccessor$5,defineBuiltIns=defineBuiltIns$2,fails$8=fails$z,anInstance$1=anInstance$4,toIntegerOrInfinity$2=toIntegerOrInfinity$8,toLength$2=toLength$6,toIndex$1=toIndex$2,IEEE754=ieee754,getPrototypeOf=objectGetPrototypeOf,setPrototypeOf$2=objectSetPrototypeOf,getOwnPropertyNames$1=objectGetOwnPropertyNames.f,arrayFill=arrayFill$1,arraySlice$2=arraySliceSimple,setToStringTag=setToStringTag$5,InternalStateModule$1=internalState,PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,ARRAY_BUFFER$1="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH$1="Wrong length",WRONG_INDEX="Wrong index",getInternalArrayBufferState=InternalStateModule$1.getterFor(ARRAY_BUFFER$1),getInternalDataViewState=InternalStateModule$1.getterFor(DATA_VIEW),setInternalState$1=InternalStateModule$1.set,NativeArrayBuffer$1=global$8[ARRAY_BUFFER$1],$ArrayBuffer=NativeArrayBuffer$1,ArrayBufferPrototype$1=$ArrayBuffer&&$ArrayBuffer[PROTOTYPE],$DataView=global$8[DATA_VIEW],DataViewPrototype=$DataView&&$DataView[PROTOTYPE],ObjectPrototype=Object.prototype,Array$1=global$8.Array,RangeError$3=global$8.RangeError,fill=uncurryThis$6(arrayFill),reverse=uncurryThis$6([].reverse),packIEEE754=IEEE754.pack,unpackIEEE754=IEEE754.unpack,packInt8=function(t){return[255&t]},packInt16=function(t){return[255&t,t>>8&255]},packInt32=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},unpackInt32=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},packFloat32=function(t){return packIEEE754(t,23,4)},packFloat64=function(t){return packIEEE754(t,52,8)},addGetter$1=function(t,e,r){defineBuiltInAccessor$1(t[PROTOTYPE],e,{configurable:!0,get:function(){return r(this)[e]}})},get=function(t,e,r,n){var o=toIndex$1(r),i=getInternalDataViewState(t);if(o+e>i.byteLength)throw RangeError$3(WRONG_INDEX);var a=i.bytes,s=o+i.byteOffset,c=arraySlice$2(a,s,s+e);return n?c:reverse(c)},set=function(t,e,r,n,o,i){var a=toIndex$1(r),s=getInternalDataViewState(t);if(a+e>s.byteLength)throw RangeError$3(WRONG_INDEX);for(var c=s.bytes,u=a+s.byteOffset,l=n(+o),f=0;f<e;f++)c[u+f]=l[i?f:e-f-1]};if(NATIVE_ARRAY_BUFFER){var INCORRECT_ARRAY_BUFFER_NAME=PROPER_FUNCTION_NAME&&NativeArrayBuffer$1.name!==ARRAY_BUFFER$1;if(fails$8((function(){NativeArrayBuffer$1(1)}))&&fails$8((function(){new NativeArrayBuffer$1(-1)}))&&!fails$8((function(){return new NativeArrayBuffer$1,new NativeArrayBuffer$1(1.5),new NativeArrayBuffer$1(NaN),1!=NativeArrayBuffer$1.length||INCORRECT_ARRAY_BUFFER_NAME&&!CONFIGURABLE_FUNCTION_NAME})))INCORRECT_ARRAY_BUFFER_NAME&&CONFIGURABLE_FUNCTION_NAME&&createNonEnumerableProperty$1(NativeArrayBuffer$1,"name",ARRAY_BUFFER$1);else{$ArrayBuffer=function(t){return anInstance$1(this,ArrayBufferPrototype$1),new NativeArrayBuffer$1(toIndex$1(t))},$ArrayBuffer[PROTOTYPE]=ArrayBufferPrototype$1;for(var keys=getOwnPropertyNames$1(NativeArrayBuffer$1),j=0,key;keys.length>j;)(key=keys[j++])in $ArrayBuffer||createNonEnumerableProperty$1($ArrayBuffer,key,NativeArrayBuffer$1[key]);ArrayBufferPrototype$1.constructor=$ArrayBuffer}setPrototypeOf$2&&getPrototypeOf(DataViewPrototype)!==ObjectPrototype&&setPrototypeOf$2(DataViewPrototype,ObjectPrototype);var testView=new $DataView(new $ArrayBuffer(2)),$setInt8=uncurryThis$6(DataViewPrototype.setInt8);testView.setInt8(0,2147483648),testView.setInt8(1,2147483649),!testView.getInt8(0)&&testView.getInt8(1)||defineBuiltIns(DataViewPrototype,{setInt8:function(t,e){$setInt8(this,t,e<<24>>24)},setUint8:function(t,e){$setInt8(this,t,e<<24>>24)}},{unsafe:!0})}else $ArrayBuffer=function(t){anInstance$1(this,ArrayBufferPrototype$1);var e=toIndex$1(t);setInternalState$1(this,{type:ARRAY_BUFFER$1,bytes:fill(Array$1(e),0),byteLength:e}),DESCRIPTORS$1||(this.byteLength=e,this.detached=!1)},ArrayBufferPrototype$1=$ArrayBuffer[PROTOTYPE],$DataView=function(t,e,r){anInstance$1(this,DataViewPrototype),anInstance$1(t,ArrayBufferPrototype$1);var n=getInternalArrayBufferState(t),o=n.byteLength,i=toIntegerOrInfinity$2(e);if(i<0||i>o)throw RangeError$3("Wrong offset");if(i+(r=void 0===r?o-i:toLength$2(r))>o)throw RangeError$3(WRONG_LENGTH$1);setInternalState$1(this,{type:DATA_VIEW,buffer:t,byteLength:r,byteOffset:i,bytes:n.bytes}),DESCRIPTORS$1||(this.buffer=t,this.byteLength=r,this.byteOffset=i)},DataViewPrototype=$DataView[PROTOTYPE],DESCRIPTORS$1&&(addGetter$1($ArrayBuffer,"byteLength",getInternalArrayBufferState),addGetter$1($DataView,"buffer",getInternalDataViewState),addGetter$1($DataView,"byteLength",getInternalDataViewState),addGetter$1($DataView,"byteOffset",getInternalDataViewState)),defineBuiltIns(DataViewPrototype,{getInt8:function(t){return get(this,1,t)[0]<<24>>24},getUint8:function(t){return get(this,1,t)[0]},getInt16:function(t){var e=get(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=get(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return unpackInt32(get(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return unpackInt32(get(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return unpackIEEE754(get(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return unpackIEEE754(get(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){set(this,1,t,packInt8,e)},setUint8:function(t,e){set(this,1,t,packInt8,e)},setInt16:function(t,e){set(this,2,t,packInt16,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){set(this,2,t,packInt16,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){set(this,4,t,packInt32,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){set(this,4,t,packInt32,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){set(this,4,t,packFloat32,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){set(this,8,t,packFloat64,e,arguments.length>2?arguments[2]:void 0)}});setToStringTag($ArrayBuffer,ARRAY_BUFFER$1),setToStringTag($DataView,DATA_VIEW);var arrayBuffer={ArrayBuffer:$ArrayBuffer,DataView:$DataView},isObject$3=isObject$g,floor$1=Math.floor,isIntegralNumber$1=Number.isInteger||function(t){return!isObject$3(t)&&isFinite(t)&&floor$1(t)===t},toIntegerOrInfinity$1=toIntegerOrInfinity$8,$RangeError$1=RangeError,toPositiveInteger$1=function(t){var e=toIntegerOrInfinity$1(t);if(e<0)throw $RangeError$1("The argument can't be less than 0");return e},toPositiveInteger=toPositiveInteger$1,$RangeError=RangeError,toOffset$2=function(t,e){var r=toPositiveInteger(t);if(r%e)throw $RangeError("Wrong offset");return r},classof$2=classof$b,isBigIntArray$1=function(t){var e=classof$2(t);return"BigInt64Array"==e||"BigUint64Array"==e},toPrimitive=toPrimitive$2,$TypeError$2=TypeError,toBigInt$2=function(t){var e=toPrimitive(t,"number");if("number"==typeof e)throw $TypeError$2("Can't convert number to bigint");return BigInt(e)},bind=functionBindContext,call$4=functionCall,aConstructor=aConstructor$2,toObject$3=toObject$b,lengthOfArrayLike$6=lengthOfArrayLike$d,getIterator=getIterator$3,getIteratorMethod=getIteratorMethod$4,isArrayIteratorMethod=isArrayIteratorMethod$2,isBigIntArray=isBigIntArray$1,aTypedArrayConstructor$2=arrayBufferViewCore.aTypedArrayConstructor,toBigInt$1=toBigInt$2,typedArrayFrom$1=function(t){var e,r,n,o,i,a,s,c,u=aConstructor(this),l=toObject$3(t),f=arguments.length,p=f>1?arguments[1]:void 0,d=void 0!==p,y=getIteratorMethod(l);if(y&&!isArrayIteratorMethod(y))for(c=(s=getIterator(l,y)).next,l=[];!(a=call$4(c,s)).done;)l.push(a.value);for(d&&f>2&&(p=bind(p,arguments[2])),r=lengthOfArrayLike$6(l),n=new(aTypedArrayConstructor$2(u))(r),o=isBigIntArray(n),e=0;r>e;e++)i=d?p(l[e],e):l[e],n[e]=o?toBigInt$1(i):+i;return n},isCallable=isCallable$p,isObject$2=isObject$g,setPrototypeOf$1=objectSetPrototypeOf,inheritIfRequired$1=function(t,e,r){var n,o;return setPrototypeOf$1&&isCallable(n=e.constructor)&&n!==r&&isObject$2(o=n.prototype)&&o!==r.prototype&&setPrototypeOf$1(t,o),t},$$4=_export,global$7=global$u,call$3=functionCall,DESCRIPTORS=descriptors,TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS=typedArrayConstructorsRequireWrappers,ArrayBufferViewCore$n=arrayBufferViewCore,ArrayBufferModule=arrayBuffer,anInstance=anInstance$4,createPropertyDescriptor=createPropertyDescriptor$6,createNonEnumerableProperty=createNonEnumerableProperty$8,isIntegralNumber=isIntegralNumber$1,toLength$1=toLength$6,toIndex=toIndex$2,toOffset$1=toOffset$2,toPropertyKey=toPropertyKey$4,hasOwn=hasOwnProperty_1,classof$1=classof$b,isObject$1=isObject$g,isSymbol=isSymbol$3,create$2=objectCreate,isPrototypeOf=objectIsPrototypeOf,setPrototypeOf=objectSetPrototypeOf,getOwnPropertyNames=objectGetOwnPropertyNames.f,typedArrayFrom=typedArrayFrom$1,forEach=arrayIteration.forEach,setSpecies$1=setSpecies$3,defineBuiltInAccessor=defineBuiltInAccessor$5,definePropertyModule=objectDefineProperty,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,InternalStateModule=internalState,inheritIfRequired=inheritIfRequired$1,getInternalState=InternalStateModule.get,setInternalState=InternalStateModule.set,enforceInternalState=InternalStateModule.enforce,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,round=Math.round,RangeError$2=global$7.RangeError,ArrayBuffer$2=ArrayBufferModule.ArrayBuffer,ArrayBufferPrototype=ArrayBuffer$2.prototype,DataView$1=ArrayBufferModule.DataView,NATIVE_ARRAY_BUFFER_VIEWS=ArrayBufferViewCore$n.NATIVE_ARRAY_BUFFER_VIEWS,TYPED_ARRAY_TAG=ArrayBufferViewCore$n.TYPED_ARRAY_TAG,TypedArray=ArrayBufferViewCore$n.TypedArray,TypedArrayPrototype$1=ArrayBufferViewCore$n.TypedArrayPrototype,aTypedArrayConstructor$1=ArrayBufferViewCore$n.aTypedArrayConstructor,isTypedArray=ArrayBufferViewCore$n.isTypedArray,BYTES_PER_ELEMENT="BYTES_PER_ELEMENT",WRONG_LENGTH="Wrong length",fromList=function(t,e){aTypedArrayConstructor$1(t);for(var r=0,n=e.length,o=new t(n);n>r;)o[r]=e[r++];return o},addGetter=function(t,e){defineBuiltInAccessor(t,e,{configurable:!0,get:function(){return getInternalState(this)[e]}})},isArrayBuffer=function(t){var e;return isPrototypeOf(ArrayBufferPrototype,t)||"ArrayBuffer"==(e=classof$1(t))||"SharedArrayBuffer"==e},isTypedArrayIndex=function(t,e){return isTypedArray(t)&&!isSymbol(e)&&e in t&&isIntegralNumber(+e)&&e>=0},wrappedGetOwnPropertyDescriptor=function(t,e){return e=toPropertyKey(e),isTypedArrayIndex(t,e)?createPropertyDescriptor(2,t[e]):nativeGetOwnPropertyDescriptor(t,e)},wrappedDefineProperty=function(t,e,r){return e=toPropertyKey(e),!(isTypedArrayIndex(t,e)&&isObject$1(r)&&hasOwn(r,"value"))||hasOwn(r,"get")||hasOwn(r,"set")||r.configurable||hasOwn(r,"writable")&&!r.writable||hasOwn(r,"enumerable")&&!r.enumerable?nativeDefineProperty(t,e,r):(t[e]=r.value,t)};DESCRIPTORS?(NATIVE_ARRAY_BUFFER_VIEWS||(getOwnPropertyDescriptorModule.f=wrappedGetOwnPropertyDescriptor,definePropertyModule.f=wrappedDefineProperty,addGetter(TypedArrayPrototype$1,"buffer"),addGetter(TypedArrayPrototype$1,"byteOffset"),addGetter(TypedArrayPrototype$1,"byteLength"),addGetter(TypedArrayPrototype$1,"length")),$$4({target:"Object",stat:!0,forced:!NATIVE_ARRAY_BUFFER_VIEWS},{getOwnPropertyDescriptor:wrappedGetOwnPropertyDescriptor,defineProperty:wrappedDefineProperty}),typedArrayConstructor.exports=function(t,e,r){var n=t.match(/\d+/)[0]/8,o=t+(r?"Clamped":"")+"Array",i="get"+t,a="set"+t,s=global$7[o],c=s,u=c&&c.prototype,l={},f=function(t,e){nativeDefineProperty(t,e,{get:function(){return function(t,e){var r=getInternalState(t);return r.view[i](e*n+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,o){var i=getInternalState(t);r&&(o=(o=round(o))<0?0:o>255?255:255&o),i.view[a](e*n+i.byteOffset,o,!0)}(this,e,t)},enumerable:!0})};NATIVE_ARRAY_BUFFER_VIEWS?TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS&&(c=e((function(t,e,r,o){return anInstance(t,u),inheritIfRequired(isObject$1(e)?isArrayBuffer(e)?void 0!==o?new s(e,toOffset$1(r,n),o):void 0!==r?new s(e,toOffset$1(r,n)):new s(e):isTypedArray(e)?fromList(c,e):call$3(typedArrayFrom,c,e):new s(toIndex(e)),t,c)})),setPrototypeOf&&setPrototypeOf(c,TypedArray),forEach(getOwnPropertyNames(s),(function(t){t in c||createNonEnumerableProperty(c,t,s[t])})),c.prototype=u):(c=e((function(t,e,r,o){anInstance(t,u);var i,a,s,l=0,p=0;if(isObject$1(e)){if(!isArrayBuffer(e))return isTypedArray(e)?fromList(c,e):call$3(typedArrayFrom,c,e);i=e,p=toOffset$1(r,n);var d=e.byteLength;if(void 0===o){if(d%n)throw RangeError$2(WRONG_LENGTH);if((a=d-p)<0)throw RangeError$2(WRONG_LENGTH)}else if((a=toLength$1(o)*n)+p>d)throw RangeError$2(WRONG_LENGTH);s=a/n}else s=toIndex(e),i=new ArrayBuffer$2(a=s*n);for(setInternalState(t,{buffer:i,byteOffset:p,byteLength:a,length:s,view:new DataView$1(i)});l<s;)f(t,l++)})),setPrototypeOf&&setPrototypeOf(c,TypedArray),u=c.prototype=create$2(TypedArrayPrototype$1)),u.constructor!==c&&createNonEnumerableProperty(u,"constructor",c),enforceInternalState(u).TypedArrayConstructor=c,TYPED_ARRAY_TAG&&createNonEnumerableProperty(u,TYPED_ARRAY_TAG,o);var p=c!=s;l[o]=c,$$4({global:!0,constructor:!0,forced:p,sham:!NATIVE_ARRAY_BUFFER_VIEWS},l),BYTES_PER_ELEMENT in c||createNonEnumerableProperty(c,BYTES_PER_ELEMENT,n),BYTES_PER_ELEMENT in u||createNonEnumerableProperty(u,BYTES_PER_ELEMENT,n),setSpecies$1(o)}):typedArrayConstructor.exports=function(){};var typedArrayConstructorExports=typedArrayConstructor.exports,createTypedArrayConstructor=typedArrayConstructorExports;createTypedArrayConstructor("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var tryToString=tryToString$6,$TypeError$1=TypeError,deletePropertyOrThrow$1=function(t,e){if(!delete t[e])throw $TypeError$1("Cannot delete property "+tryToString(e)+" of "+tryToString(t))},toObject$2=toObject$b,toAbsoluteIndex$2=toAbsoluteIndex$6,lengthOfArrayLike$5=lengthOfArrayLike$d,deletePropertyOrThrow=deletePropertyOrThrow$1,min$1=Math.min,arrayCopyWithin=[].copyWithin||function(t,e){var r=toObject$2(this),n=lengthOfArrayLike$5(r),o=toAbsoluteIndex$2(t,n),i=toAbsoluteIndex$2(e,n),a=arguments.length>2?arguments[2]:void 0,s=min$1((void 0===a?n:toAbsoluteIndex$2(a,n))-i,n-o),c=1;for(i<o&&o<i+s&&(c=-1,i+=s-1,o+=s-1);s-- >0;)i in r?r[o]=r[i]:deletePropertyOrThrow(r,o),o+=c,i+=c;return r},uncurryThis$5=functionUncurryThis,ArrayBufferViewCore$m=arrayBufferViewCore,$ArrayCopyWithin=arrayCopyWithin,u$ArrayCopyWithin=uncurryThis$5($ArrayCopyWithin),aTypedArray$l=ArrayBufferViewCore$m.aTypedArray,exportTypedArrayMethod$m=ArrayBufferViewCore$m.exportTypedArrayMethod;exportTypedArrayMethod$m("copyWithin",(function(t,e){return u$ArrayCopyWithin(aTypedArray$l(this),t,e,arguments.length>2?arguments[2]:void 0)}));var ArrayBufferViewCore$l=arrayBufferViewCore,$every=arrayIteration.every,aTypedArray$k=ArrayBufferViewCore$l.aTypedArray,exportTypedArrayMethod$l=ArrayBufferViewCore$l.exportTypedArrayMethod;exportTypedArrayMethod$l("every",(function(t){return $every(aTypedArray$k(this),t,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$k=arrayBufferViewCore,$fill=arrayFill$1,toBigInt=toBigInt$2,classof=classof$b,call$2=functionCall,uncurryThis$4=functionUncurryThis,fails$7=fails$z,aTypedArray$j=ArrayBufferViewCore$k.aTypedArray,exportTypedArrayMethod$k=ArrayBufferViewCore$k.exportTypedArrayMethod,slice=uncurryThis$4("".slice),CONVERSION_BUG=fails$7((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t}));exportTypedArrayMethod$k("fill",(function(t){var e=arguments.length;aTypedArray$j(this);var r="Big"===slice(classof(this),0,3)?toBigInt(t):+t;return call$2($fill,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),CONVERSION_BUG);var lengthOfArrayLike$4=lengthOfArrayLike$d,arrayFromConstructorAndList$1=function(t,e){for(var r=0,n=lengthOfArrayLike$4(e),o=new t(n);n>r;)o[r]=e[r++];return o},ArrayBufferViewCore$j=arrayBufferViewCore,speciesConstructor=speciesConstructor$2,aTypedArrayConstructor=ArrayBufferViewCore$j.aTypedArrayConstructor,getTypedArrayConstructor=ArrayBufferViewCore$j.getTypedArrayConstructor,typedArraySpeciesConstructor$4=function(t){return aTypedArrayConstructor(speciesConstructor(t,getTypedArrayConstructor(t)))},arrayFromConstructorAndList=arrayFromConstructorAndList$1,typedArraySpeciesConstructor$3=typedArraySpeciesConstructor$4,typedArrayFromSpeciesAndList=function(t,e){return arrayFromConstructorAndList(typedArraySpeciesConstructor$3(t),e)},ArrayBufferViewCore$i=arrayBufferViewCore,$filter=arrayIteration.filter,fromSpeciesAndList=typedArrayFromSpeciesAndList,aTypedArray$i=ArrayBufferViewCore$i.aTypedArray,exportTypedArrayMethod$j=ArrayBufferViewCore$i.exportTypedArrayMethod;exportTypedArrayMethod$j("filter",(function(t){var e=$filter(aTypedArray$i(this),t,arguments.length>1?arguments[1]:void 0);return fromSpeciesAndList(this,e)}));var ArrayBufferViewCore$h=arrayBufferViewCore,$find=arrayIteration.find,aTypedArray$h=ArrayBufferViewCore$h.aTypedArray,exportTypedArrayMethod$i=ArrayBufferViewCore$h.exportTypedArrayMethod;exportTypedArrayMethod$i("find",(function(t){return $find(aTypedArray$h(this),t,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$g=arrayBufferViewCore,$findIndex=arrayIteration.findIndex,aTypedArray$g=ArrayBufferViewCore$g.aTypedArray,exportTypedArrayMethod$h=ArrayBufferViewCore$g.exportTypedArrayMethod;exportTypedArrayMethod$h("findIndex",(function(t){return $findIndex(aTypedArray$g(this),t,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$f=arrayBufferViewCore,$forEach=arrayIteration.forEach,aTypedArray$f=ArrayBufferViewCore$f.aTypedArray,exportTypedArrayMethod$g=ArrayBufferViewCore$f.exportTypedArrayMethod;exportTypedArrayMethod$g("forEach",(function(t){$forEach(aTypedArray$f(this),t,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$e=arrayBufferViewCore,$includes=arrayIncludes.includes,aTypedArray$e=ArrayBufferViewCore$e.aTypedArray,exportTypedArrayMethod$f=ArrayBufferViewCore$e.exportTypedArrayMethod;exportTypedArrayMethod$f("includes",(function(t){return $includes(aTypedArray$e(this),t,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$d=arrayBufferViewCore,$indexOf=arrayIncludes.indexOf,aTypedArray$d=ArrayBufferViewCore$d.aTypedArray,exportTypedArrayMethod$e=ArrayBufferViewCore$d.exportTypedArrayMethod;exportTypedArrayMethod$e("indexOf",(function(t){return $indexOf(aTypedArray$d(this),t,arguments.length>1?arguments[1]:void 0)}));var global$6=global$u,fails$6=fails$z,uncurryThis$3=functionUncurryThis,ArrayBufferViewCore$c=arrayBufferViewCore,ArrayIterators=es_array_iterator,wellKnownSymbol$1=wellKnownSymbol$o,ITERATOR=wellKnownSymbol$1("iterator"),Uint8Array$2=global$6.Uint8Array,arrayValues=uncurryThis$3(ArrayIterators.values),arrayKeys=uncurryThis$3(ArrayIterators.keys),arrayEntries=uncurryThis$3(ArrayIterators.entries),aTypedArray$c=ArrayBufferViewCore$c.aTypedArray,exportTypedArrayMethod$d=ArrayBufferViewCore$c.exportTypedArrayMethod,TypedArrayPrototype=Uint8Array$2&&Uint8Array$2.prototype,GENERIC=!fails$6((function(){TypedArrayPrototype[ITERATOR].call([1])})),ITERATOR_IS_VALUES=!!TypedArrayPrototype&&TypedArrayPrototype.values&&TypedArrayPrototype[ITERATOR]===TypedArrayPrototype.values&&"values"===TypedArrayPrototype.values.name,typedArrayValues=function(){return arrayValues(aTypedArray$c(this))};exportTypedArrayMethod$d("entries",(function(){return arrayEntries(aTypedArray$c(this))}),GENERIC),exportTypedArrayMethod$d("keys",(function(){return arrayKeys(aTypedArray$c(this))}),GENERIC),exportTypedArrayMethod$d("values",typedArrayValues,GENERIC||!ITERATOR_IS_VALUES,{name:"values"}),exportTypedArrayMethod$d(ITERATOR,typedArrayValues,GENERIC||!ITERATOR_IS_VALUES,{name:"values"});var ArrayBufferViewCore$b=arrayBufferViewCore,uncurryThis$2=functionUncurryThis,aTypedArray$b=ArrayBufferViewCore$b.aTypedArray,exportTypedArrayMethod$c=ArrayBufferViewCore$b.exportTypedArrayMethod,$join=uncurryThis$2([].join);exportTypedArrayMethod$c("join",(function(t){return $join(aTypedArray$b(this),t)}));var apply$2=functionApply,toIndexedObject$2=toIndexedObject$9,toIntegerOrInfinity=toIntegerOrInfinity$8,lengthOfArrayLike$3=lengthOfArrayLike$d,arrayMethodIsStrict=arrayMethodIsStrict$2,min=Math.min,$lastIndexOf$1=[].lastIndexOf,NEGATIVE_ZERO=!!$lastIndexOf$1&&1/[1].lastIndexOf(1,-0)<0,STRICT_METHOD=arrayMethodIsStrict("lastIndexOf"),FORCED$2=NEGATIVE_ZERO||!STRICT_METHOD,arrayLastIndexOf=FORCED$2?function(t){if(NEGATIVE_ZERO)return apply$2($lastIndexOf$1,this,arguments)||0;var e=toIndexedObject$2(this),r=lengthOfArrayLike$3(e),n=r-1;for(arguments.length>1&&(n=min(n,toIntegerOrInfinity(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:$lastIndexOf$1,ArrayBufferViewCore$a=arrayBufferViewCore,apply$1=functionApply,$lastIndexOf=arrayLastIndexOf,aTypedArray$a=ArrayBufferViewCore$a.aTypedArray,exportTypedArrayMethod$b=ArrayBufferViewCore$a.exportTypedArrayMethod;exportTypedArrayMethod$b("lastIndexOf",(function(t){var e=arguments.length;return apply$1($lastIndexOf,aTypedArray$a(this),e>1?[t,arguments[1]]:[t])}));var ArrayBufferViewCore$9=arrayBufferViewCore,$map=arrayIteration.map,typedArraySpeciesConstructor$2=typedArraySpeciesConstructor$4,aTypedArray$9=ArrayBufferViewCore$9.aTypedArray,exportTypedArrayMethod$a=ArrayBufferViewCore$9.exportTypedArrayMethod;exportTypedArrayMethod$a("map",(function(t){return $map(aTypedArray$9(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(typedArraySpeciesConstructor$2(t))(e)}))}));var aCallable$1=aCallable$a,toObject$1=toObject$b,IndexedObject=indexedObject,lengthOfArrayLike$2=lengthOfArrayLike$d,$TypeError=TypeError,createMethod=function(t){return function(e,r,n,o){aCallable$1(r);var i=toObject$1(e),a=IndexedObject(i),s=lengthOfArrayLike$2(i),c=t?s-1:0,u=t?-1:1;if(n<2)for(;;){if(c in a){o=a[c],c+=u;break}if(c+=u,t?c<0:s<=c)throw $TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:s>c;c+=u)c in a&&(o=r(o,a[c],c,i));return o}},arrayReduce={left:createMethod(!1),right:createMethod(!0)},ArrayBufferViewCore$8=arrayBufferViewCore,$reduce=arrayReduce.left,aTypedArray$8=ArrayBufferViewCore$8.aTypedArray,exportTypedArrayMethod$9=ArrayBufferViewCore$8.exportTypedArrayMethod;exportTypedArrayMethod$9("reduce",(function(t){var e=arguments.length;return $reduce(aTypedArray$8(this),t,e,e>1?arguments[1]:void 0)}));var ArrayBufferViewCore$7=arrayBufferViewCore,$reduceRight=arrayReduce.right,aTypedArray$7=ArrayBufferViewCore$7.aTypedArray,exportTypedArrayMethod$8=ArrayBufferViewCore$7.exportTypedArrayMethod;exportTypedArrayMethod$8("reduceRight",(function(t){var e=arguments.length;return $reduceRight(aTypedArray$7(this),t,e,e>1?arguments[1]:void 0)}));var ArrayBufferViewCore$6=arrayBufferViewCore,aTypedArray$6=ArrayBufferViewCore$6.aTypedArray,exportTypedArrayMethod$7=ArrayBufferViewCore$6.exportTypedArrayMethod,floor=Math.floor;exportTypedArrayMethod$7("reverse",(function(){for(var t,e=this,r=aTypedArray$6(e).length,n=floor(r/2),o=0;o<n;)t=e[o],e[o++]=e[--r],e[r]=t;return e}));var global$5=global$u,call$1=functionCall,ArrayBufferViewCore$5=arrayBufferViewCore,lengthOfArrayLike$1=lengthOfArrayLike$d,toOffset=toOffset$2,toIndexedObject$1=toObject$b,fails$5=fails$z,RangeError$1=global$5.RangeError,Int8Array$2=global$5.Int8Array,Int8ArrayPrototype=Int8Array$2&&Int8Array$2.prototype,$set=Int8ArrayPrototype&&Int8ArrayPrototype.set,aTypedArray$5=ArrayBufferViewCore$5.aTypedArray,exportTypedArrayMethod$6=ArrayBufferViewCore$5.exportTypedArrayMethod,WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS=!fails$5((function(){var t=new Uint8ClampedArray(2);return call$1($set,t,{length:1,0:3},1),3!==t[1]})),TO_OBJECT_BUG=WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS&&ArrayBufferViewCore$5.NATIVE_ARRAY_BUFFER_VIEWS&&fails$5((function(){var t=new Int8Array$2(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));exportTypedArrayMethod$6("set",(function(t){aTypedArray$5(this);var e=toOffset(arguments.length>1?arguments[1]:void 0,1),r=toIndexedObject$1(t);if(WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS)return call$1($set,this,r,e);var n=this.length,o=lengthOfArrayLike$1(r),i=0;if(o+e>n)throw RangeError$1("Wrong length");for(;i<o;)this[e+i]=r[i++]}),!WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS||TO_OBJECT_BUG);var ArrayBufferViewCore$4=arrayBufferViewCore,typedArraySpeciesConstructor$1=typedArraySpeciesConstructor$4,fails$4=fails$z,arraySlice$1=arraySlice$4,aTypedArray$4=ArrayBufferViewCore$4.aTypedArray,exportTypedArrayMethod$5=ArrayBufferViewCore$4.exportTypedArrayMethod,FORCED$1=fails$4((function(){new Int8Array(1).slice()}));exportTypedArrayMethod$5("slice",(function(t,e){for(var r=arraySlice$1(aTypedArray$4(this),t,e),n=typedArraySpeciesConstructor$1(this),o=0,i=r.length,a=new n(i);i>o;)a[o]=r[o++];return a}),FORCED$1);var ArrayBufferViewCore$3=arrayBufferViewCore,$some=arrayIteration.some,aTypedArray$3=ArrayBufferViewCore$3.aTypedArray,exportTypedArrayMethod$4=ArrayBufferViewCore$3.exportTypedArrayMethod;exportTypedArrayMethod$4("some",(function(t){return $some(aTypedArray$3(this),t,arguments.length>1?arguments[1]:void 0)}));var userAgent$1=engineUserAgent,firefox=userAgent$1.match(/firefox\/(\d+)/i),engineFfVersion=!!firefox&&+firefox[1],UA=engineUserAgent,engineIsIeOrEdge=/MSIE|Trident/.test(UA),userAgent=engineUserAgent,webkit=userAgent.match(/AppleWebKit\/(\d+)\./),engineWebkitVersion=!!webkit&&+webkit[1],global$4=global$u,uncurryThis$1=functionUncurryThisClause,fails$3=fails$z,aCallable=aCallable$a,internalSort=arraySort$1,ArrayBufferViewCore$2=arrayBufferViewCore,FF=engineFfVersion,IE_OR_EDGE=engineIsIeOrEdge,V8=engineV8Version,WEBKIT=engineWebkitVersion,aTypedArray$2=ArrayBufferViewCore$2.aTypedArray,exportTypedArrayMethod$3=ArrayBufferViewCore$2.exportTypedArrayMethod,Uint16Array=global$4.Uint16Array,nativeSort=Uint16Array&&uncurryThis$1(Uint16Array.prototype.sort),ACCEPT_INCORRECT_ARGUMENTS=!(!nativeSort||fails$3((function(){nativeSort(new Uint16Array(2),null)}))&&fails$3((function(){nativeSort(new Uint16Array(2),{})}))),STABLE_SORT=!!nativeSort&&!fails$3((function(){if(V8)return V8<74;if(FF)return FF<67;if(IE_OR_EDGE)return!0;if(WEBKIT)return WEBKIT<602;var t,e,r=new Uint16Array(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(nativeSort(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0})),getSortCompare=function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}};exportTypedArrayMethod$3("sort",(function(t){return void 0!==t&&aCallable(t),STABLE_SORT?nativeSort(this,t):internalSort(aTypedArray$2(this),getSortCompare(t))}),!STABLE_SORT||ACCEPT_INCORRECT_ARGUMENTS);var ArrayBufferViewCore$1=arrayBufferViewCore,toLength=toLength$6,toAbsoluteIndex$1=toAbsoluteIndex$6,typedArraySpeciesConstructor=typedArraySpeciesConstructor$4,aTypedArray$1=ArrayBufferViewCore$1.aTypedArray,exportTypedArrayMethod$2=ArrayBufferViewCore$1.exportTypedArrayMethod;exportTypedArrayMethod$2("subarray",(function(t,e){var r=aTypedArray$1(this),n=r.length,o=toAbsoluteIndex$1(t,n);return new(typedArraySpeciesConstructor(r))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,toLength((void 0===e?n:toAbsoluteIndex$1(e,n))-o))}));var global$3=global$u,apply=functionApply,ArrayBufferViewCore=arrayBufferViewCore,fails$2=fails$z,arraySlice=arraySlice$4,Int8Array$1=global$3.Int8Array,aTypedArray=ArrayBufferViewCore.aTypedArray,exportTypedArrayMethod$1=ArrayBufferViewCore.exportTypedArrayMethod,$toLocaleString=[].toLocaleString,TO_LOCALE_STRING_BUG=!!Int8Array$1&&fails$2((function(){$toLocaleString.call(new Int8Array$1(1))})),FORCED=fails$2((function(){return[1,2].toLocaleString()!=new Int8Array$1([1,2]).toLocaleString()}))||!fails$2((function(){Int8Array$1.prototype.toLocaleString.call([1,2])}));exportTypedArrayMethod$1("toLocaleString",(function(){return apply($toLocaleString,TO_LOCALE_STRING_BUG?arraySlice(aTypedArray(this)):aTypedArray(this),arraySlice(arguments))}),FORCED);var exportTypedArrayMethod=arrayBufferViewCore.exportTypedArrayMethod,fails$1=fails$z,global$2=global$u,uncurryThis=functionUncurryThis,Uint8Array$1=global$2.Uint8Array,Uint8ArrayPrototype=Uint8Array$1&&Uint8Array$1.prototype||{},arrayToString=[].toString,join=uncurryThis([].join);fails$1((function(){arrayToString.call({})}))&&(arrayToString=function(){return join(this)});var IS_NOT_ARRAY_METHOD=Uint8ArrayPrototype.toString!=arrayToString;exportTypedArrayMethod("toString",arrayToString,IS_NOT_ARRAY_METHOD);var $$3=_export,global$1=global$u,arrayBufferModule=arrayBuffer,setSpecies=setSpecies$3,ARRAY_BUFFER="ArrayBuffer",ArrayBuffer$1=arrayBufferModule[ARRAY_BUFFER],NativeArrayBuffer=global$1[ARRAY_BUFFER];$$3({global:!0,constructor:!0,forced:NativeArrayBuffer!==ArrayBuffer$1},{ArrayBuffer:ArrayBuffer$1}),setSpecies(ARRAY_BUFFER);var $$2=_export,isArray=isArray$4,isConstructor=isConstructor$3,isObject=isObject$g,toAbsoluteIndex=toAbsoluteIndex$6,lengthOfArrayLike=lengthOfArrayLike$d,toIndexedObject=toIndexedObject$9,createProperty=createProperty$3,wellKnownSymbol=wellKnownSymbol$o,arrayMethodHasSpeciesSupport=arrayMethodHasSpeciesSupport$4,nativeSlice=arraySlice$4,HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("slice"),SPECIES=wellKnownSymbol("species"),$Array=Array,max=Math.max;$$2({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT},{slice:function(t,e){var r,n,o,i=toIndexedObject(this),a=lengthOfArrayLike(i),s=toAbsoluteIndex(t,a),c=toAbsoluteIndex(void 0===e?a:e,a);if(isArray(i)&&(r=i.constructor,(isConstructor(r)&&(r===$Array||isArray(r.prototype))||isObject(r)&&null===(r=r[SPECIES]))&&(r=void 0),r===$Array||void 0===r))return nativeSlice(i,s,c);for(n=new(void 0===r?$Array:r)(max(c-s,0)),o=0;s<c;s++,o++)s in i&&createProperty(n,o,i[s]);return n.length=o,n}});var $$1=_export,toObject=toObject$b,nativeKeys=objectKeys$2,fails=fails$z,FAILS_ON_PRIMITIVES=fails((function(){nativeKeys(1)}));$$1({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES},{keys:function(t){return nativeKeys(toObject(t))}});var $=_export,call=functionCall;$({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return call(URL.prototype.toString,this)}});var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(t,e){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,a){r[n]=function(t){if(i)if(i=!1,t)a(t);else{for(var e=new Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];o.apply(null,e)}};try{t.apply(e||null,r)}catch(t){i&&(i=!1,a(t))}}))}var base64$2={};!function(t){var e=t;e.length=function(t){var e=t.length;if(!e)return 0;for(var r=0;--e%4>1&&"="===t.charAt(e);)++r;return Math.ceil(3*t.length)/4-r};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(t,e,n){for(var o,i=null,a=[],s=0,c=0;e<n;){var u=t[e++];switch(c){case 0:a[s++]=r[u>>2],o=(3&u)<<4,c=1;break;case 1:a[s++]=r[o|u>>4],o=(15&u)<<2,c=2;break;case 2:a[s++]=r[o|u>>6],a[s++]=r[63&u],c=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=r[o],a[s++]=61,1===c&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var i="invalid encoding";e.decode=function(t,e,r){for(var o,a=r,s=0,c=0;c<t.length;){var u=t.charCodeAt(c++);if(61===u&&s>1)break;if(void 0===(u=n[u]))throw Error(i);switch(s){case 0:o=u,s=1;break;case 1:e[r++]=o<<2|(48&u)>>4,o=u,s=2;break;case 2:e[r++]=(15&o)<<4|(60&u)>>2,o=u,s=3;break;case 3:e[r++]=(3&o)<<6|u,s=0}}if(1===s)throw Error(i);return r-a},e.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}}(base64$2);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(t,e,r){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:r||this}),this},EventEmitter.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var r=this._listeners[t],n=0;n<r.length;)r[n].fn===e?r.splice(n,1):++n;return this},EventEmitter.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,r)}return this};var float=factory(factory);function factory(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=128===r[3];function o(t,n,o){e[0]=t,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(t,n,o){e[0]=t,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],e[0]}function s(t,n){return r[3]=t[n],r[2]=t[n+1],r[1]=t[n+2],r[0]=t[n+3],e[0]}t.writeFloatLE=n?o:i,t.writeFloatBE=n?i:o,t.readFloatLE=n?a:s,t.readFloatBE=n?s:a}():function(){function e(t,e,r,n){var o=e<0?1:0;if(o&&(e=-e),0===e)t(1/e>0?0:2147483648,r,n);else if(isNaN(e))t(2143289344,r,n);else if(e>34028234663852886e22)t((o<<31|2139095040)>>>0,r,n);else if(e<11754943508222875e-54)t((o<<31|Math.round(e/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(e)/Math.LN2);t((o<<31|i+127<<23|8388607&Math.round(e*Math.pow(2,-i)*8388608))>>>0,r,n)}}function r(t,e,r){var n=t(e,r),o=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}t.writeFloatLE=e.bind(null,writeUintLE),t.writeFloatBE=e.bind(null,writeUintBE),t.readFloatLE=r.bind(null,readUintLE),t.readFloatBE=r.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=128===r[7];function o(t,n,o){e[0]=t,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(t,n,o){e[0]=t,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],r[4]=t[n+4],r[5]=t[n+5],r[6]=t[n+6],r[7]=t[n+7],e[0]}function s(t,n){return r[7]=t[n],r[6]=t[n+1],r[5]=t[n+2],r[4]=t[n+3],r[3]=t[n+4],r[2]=t[n+5],r[1]=t[n+6],r[0]=t[n+7],e[0]}t.writeDoubleLE=n?o:i,t.writeDoubleBE=n?i:o,t.readDoubleLE=n?a:s,t.readDoubleBE=n?s:a}():function(){function e(t,e,r,n,o,i){var a=n<0?1:0;if(a&&(n=-n),0===n)t(0,o,i+e),t(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))t(0,o,i+e),t(2146959360,o,i+r);else if(n>17976931348623157e292)t(0,o,i+e),t((a<<31|2146435072)>>>0,o,i+r);else{var s;if(n<22250738585072014e-324)t((s=n/5e-324)>>>0,o,i+e),t((a<<31|s/4294967296)>>>0,o,i+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),t(4503599627370496*(s=n*Math.pow(2,-c))>>>0,o,i+e),t((a<<31|c+1023<<20|1048576*s&1048575)>>>0,o,i+r)}}}function r(t,e,r,n,o){var i=t(n,o+e),a=t(n,o+r),s=2*(a>>31)+1,c=a>>>20&2047,u=4294967296*(1048575&a)+i;return 2047===c?u?NaN:s*(1/0):0===c?5e-324*s*u:s*Math.pow(2,c-1075)*(u+4503599627370496)}t.writeDoubleLE=e.bind(null,writeUintLE,0,4),t.writeDoubleBE=e.bind(null,writeUintBE,4,0),t.readDoubleLE=r.bind(null,readUintLE,0,4),t.readDoubleBE=r.bind(null,readUintBE,4,0)}(),t}function writeUintLE(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function writeUintBE(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function readUintLE(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}var utf8$2={};!function(t){var e=t;e.length=function(t){for(var e=0,r=0,n=0;n<t.length;++n)(r=t.charCodeAt(n))<128?e+=1:r<2048?e+=2:55296==(64512&r)&&56320==(64512&t.charCodeAt(n+1))?(++n,e+=4):e+=3;return e},e.read=function(t,e,r){if(r-e<1)return"";for(var n,o=null,i=[],a=0;e<r;)(n=t[e++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},e.write=function(t,e,r){for(var n,o,i=r,a=0;a<t.length;++a)(n=t.charCodeAt(a))<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=t.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128);return r-i}}(utf8$2);var pool_1=pool,longbits,hasRequiredLongbits,hasRequiredMinimal;function pool(t,e,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return t(r);a+r>n&&(i=t(n),a=0);var s=e.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),s}}function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var t=requireMinimal();function e(t,e){this.lo=t>>>0,this.hi=e>>>0}var r=e.zero=new e(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var n=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(t){if(0===t)return r;var n=t<0;n&&(t=-t);var o=t>>>0,i=(t-o)/4294967296>>>0;return n&&(i=~i>>>0,o=~o>>>0,++o>4294967295&&(o=0,++i>4294967295&&(i=0))),new e(o,i)},e.from=function(n){if("number"==typeof n)return e.fromNumber(n);if(t.isString(n)){if(!t.Long)return e.fromNumber(parseInt(n,10));n=t.Long.fromString(n)}return n.low||n.high?new e(n.low>>>0,n.high>>>0):r},e.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},e.prototype.toLong=function(e){return t.Long?new t.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;return e.fromHash=function(t){return t===n?r:new e((o.call(t,0)|o.call(t,1)<<8|o.call(t,2)<<16|o.call(t,3)<<24)>>>0,(o.call(t,4)|o.call(t,5)<<8|o.call(t,6)<<16|o.call(t,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},e.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},e.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10},longbits}function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(t){var e=t;function r(t,e,r){for(var n=Object.keys(e),o=0;o<n.length;++o)void 0!==t[n[o]]&&r||(t[n[o]]=e[n[o]]);return t}function n(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}e.asPromise=aspromise,e.base64=base64$2,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},e.isString=function(t){return"string"==typeof t||t instanceof String},e.isObject=function(t){return t&&"object"==typeof t},e.isset=e.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},e.Buffer=function(){try{var t=e.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(t){return"number"==typeof t?e.Buffer?e._Buffer_allocUnsafe(t):new e.Array(t):e.Buffer?e._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},e.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(t){return t?e.LongBits.from(t).toHash():e.LongBits.zeroHash},e.longFromHash=function(t,r){var n=e.LongBits.fromHash(t);return e.Long?e.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},e.merge=r,e.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},e.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var t=e.Buffer;t?(e._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},e._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):e._Buffer_from=e._Buffer_allocUnsafe=null}}(minimal$1)),minimal$1}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64$1=util$4.base64,utf8$1=util$4.utf8;function Op(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function noop(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(t,e,r){e[r]=255&t}function writeVarint32(t,e,r){for(;t>127;)e[r++]=127&t|128,t>>>=7;e[r]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}function writeVarint64(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function writeFixed32(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}Writer$1.create=create$1(),Writer$1.alloc=function(t){return new util$4.Array(t)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function(t,e,r){return this.tail=this.tail.next=new Op(t,e,r),this.len+=e,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new VarintOp((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},Writer$1.prototype.int32=function(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)},Writer$1.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},Writer$1.prototype.uint64=function(t){var e=LongBits$1.from(t);return this._push(writeVarint64,e.length(),e)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(t){var e=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,e.length(),e)},Writer$1.prototype.bool=function(t){return this._push(writeByte,1,t?1:0)},Writer$1.prototype.fixed32=function(t){return this._push(writeFixed32,4,t>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(t){var e=LongBits$1.from(t);return this._push(writeFixed32,4,e.lo)._push(writeFixed32,4,e.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(t){return this._push(util$4.float.writeFloatLE,4,t)},Writer$1.prototype.double=function(t){return this._push(util$4.float.writeDoubleLE,8,t)};var writeBytes=util$4.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};Writer$1.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(writeByte,1,0);if(util$4.isString(t)){var r=Writer$1.alloc(e=base64$1.length(t));base64$1.decode(t,r,0),t=r}return this.uint32(e)._push(writeBytes,e,t)},Writer$1.prototype.string=function(t){var e=utf8$1.length(t);return e?this.uint32(e)._push(utf8$1.write,e,t):this._push(writeByte,1,0)},Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer$1.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},Writer$1.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},Writer$1._configure=function(t){BufferWriter$1=t,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}function writeStringBuffer(t,e,r){t.length<40?util$3.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&"set"===util$3.Buffer.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]}},BufferWriter.prototype.bytes=function(t){util$3.isString(t)&&(t=util$3._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(BufferWriter.writeBytesBuffer,e,t),this},BufferWriter.prototype.string=function(t){var e=util$3.Buffer.byteLength(t);return this.uint32(e),e&&this._push(writeStringBuffer,e,t),this},BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader$1(t){this.buf=t,this.pos=0,this.len=t.length}var create_array="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")},create=function(){return util$2.Buffer?function(t){return(Reader$1.create=function(t){return util$2.Buffer.isBuffer(t)?new BufferReader$1(t):create_array(t)})(t)}:create_array},value;function readLongVarint(){var t=new LongBits(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.create=create(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}),Reader$1.prototype.int32=function(){return 0|this.uint32()},Reader$1.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)},Reader$1.prototype.bool=function(){return 0!==this.uint32()},Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},Reader$1.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw indexOutOfRange(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(e,r);if(e===r){var n=util$2.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,e,r)},Reader$1.prototype.string=function(){var t=this.bytes();return utf8.read(t,0,t.length)},Reader$1.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader$1.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},Reader$1._configure=function(t){BufferReader$1=t,Reader$1.create=create(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(t){Reader.call(this,t)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},BufferReader._configure();var rpc={},service=Service,util=requireMinimal();function Service(t,e,r){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function t(e,r,n,o,i){if(!o)throw TypeError("request must be specified");var a=this;if(!i)return util.asPromise(t,a,e,r,n,o);if(a.rpcImpl)try{return a.rpcImpl(e,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(t,r){if(t)return a.emit("error",t,e),i(t);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(t){return a.emit("error",t,e),i(t)}return a.emit("data",r,e),i(null,r)}a.end(!0)}))}catch(t){return a.emit("error",t,e),void setTimeout((function(){i(t)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},Service.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},function(t){t.Service=service}(rpc);var roots={};!function(t){var e=t;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=r,r()}(indexMinimal);var minimal=indexMinimal;const $Reader=minimal.Reader,$Writer=minimal.Writer,$util=minimal.util,$root=minimal.roots.default||(minimal.roots.default={}),msgproto=$root.msgproto=(()=>{const t={};return t.HeartBeat=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.token="",t.prototype.version="",t.prototype.businessTypeId="",t.prototype.period=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.token&&Object.hasOwnProperty.call(t,"token")&&e.uint32(10).string(t.token),null!=t.version&&Object.hasOwnProperty.call(t,"version")&&e.uint32(18).string(t.version),null!=t.period&&Object.hasOwnProperty.call(t,"period")&&e.uint32(24).int32(t.period),null!=t.businessTypeId&&Object.hasOwnProperty.call(t,"businessTypeId")&&e.uint32(34).string(t.businessTypeId),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.HeartBeat;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.token=t.string();break;case 2:n.version=t.string();break;case 4:n.businessTypeId=t.string();break;case 3:n.period=t.int32();break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.token&&t.hasOwnProperty("token")&&!$util.isString(t.token)?"token: string expected":null!=t.version&&t.hasOwnProperty("version")&&!$util.isString(t.version)?"version: string expected":null!=t.businessTypeId&&t.hasOwnProperty("businessTypeId")&&!$util.isString(t.businessTypeId)?"businessTypeId: string expected":null!=t.period&&t.hasOwnProperty("period")&&!$util.isInteger(t.period)?"period: integer expected":null},t.fromObject=function(t){if(t instanceof $root.msgproto.HeartBeat)return t;let e=new $root.msgproto.HeartBeat;return null!=t.token&&(e.token=String(t.token)),null!=t.version&&(e.version=String(t.version)),null!=t.businessTypeId&&(e.businessTypeId=String(t.businessTypeId)),null!=t.period&&(e.period=0|t.period),e},t.toObject=function(t,e){e||(e={});let r={};return e.defaults&&(r.token="",r.version="",r.period=0,r.businessTypeId=""),null!=t.token&&t.hasOwnProperty("token")&&(r.token=t.token),null!=t.version&&t.hasOwnProperty("version")&&(r.version=t.version),null!=t.period&&t.hasOwnProperty("period")&&(r.period=t.period),null!=t.businessTypeId&&t.hasOwnProperty("businessTypeId")&&(r.businessTypeId=t.businessTypeId),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t}(),t.KickOff=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.fromIp="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.fromIp&&Object.hasOwnProperty.call(t,"fromIp")&&e.uint32(10).string(t.fromIp),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.KickOff;for(;t.pos<r;){let e=t.uint32();if(e>>>3==1)n.fromIp=t.string();else t.skipType(7&e)}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.fromIp&&t.hasOwnProperty("fromIp")&&!$util.isString(t.fromIp)?"fromIp: string expected":null},t.fromObject=function(t){if(t instanceof $root.msgproto.KickOff)return t;let e=new $root.msgproto.KickOff;return null!=t.fromIp&&(e.fromIp=String(t.fromIp)),e},t.toObject=function(t,e){e||(e={});let r={};return e.defaults&&(r.fromIp=""),null!=t.fromIp&&t.hasOwnProperty("fromIp")&&(r.fromIp=t.fromIp),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t}(),t.RemindAFK=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.RemindAFK;for(;t.pos<r;){let e=t.uint32();t.skipType(7&e)}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null},t.fromObject=function(t){return t instanceof $root.msgproto.RemindAFK?t:new $root.msgproto.RemindAFK},t.toObject=function(){return{}},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t}(),t.S2CCmdReport=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.S2CCmdReport;for(;t.pos<r;){let e=t.uint32();t.skipType(7&e)}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null},t.fromObject=function(t){return t instanceof $root.msgproto.S2CCmdReport?t:new $root.msgproto.S2CCmdReport},t.toObject=function(){return{}},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t}(),t.PushEvents=function(){function t(t){if(this.events=[],t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.businessTypeId="",t.prototype.events=$util.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=$Writer.create()),null!=t.businessTypeId&&Object.hasOwnProperty.call(t,"businessTypeId")&&e.uint32(10).string(t.businessTypeId),null!=t.events&&t.events.length)for(let r=0;r<t.events.length;++r)$root.msgproto.Event.encode(t.events[r],e.uint32(18).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.PushEvents;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.businessTypeId=t.string();break;case 2:n.events&&n.events.length||(n.events=[]),n.events.push($root.msgproto.Event.decode(t,t.uint32()));break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.businessTypeId&&t.hasOwnProperty("businessTypeId")&&!$util.isString(t.businessTypeId))return"businessTypeId: string expected";if(null!=t.events&&t.hasOwnProperty("events")){if(!Array.isArray(t.events))return"events: array expected";for(let e=0;e<t.events.length;++e){let r=$root.msgproto.Event.verify(t.events[e]);if(r)return"events."+r}}return null},t.fromObject=function(t){if(t instanceof $root.msgproto.PushEvents)return t;let e=new $root.msgproto.PushEvents;if(null!=t.businessTypeId&&(e.businessTypeId=String(t.businessTypeId)),t.events){if(!Array.isArray(t.events))throw TypeError(".msgproto.PushEvents.events: array expected");e.events=[];for(let r=0;r<t.events.length;++r){if("object"!=typeof t.events[r])throw TypeError(".msgproto.PushEvents.events: object expected");e.events[r]=$root.msgproto.Event.fromObject(t.events[r])}}return e},t.toObject=function(t,e){e||(e={});let r={};if((e.arrays||e.defaults)&&(r.events=[]),e.defaults&&(r.businessTypeId=""),null!=t.businessTypeId&&t.hasOwnProperty("businessTypeId")&&(r.businessTypeId=t.businessTypeId),t.events&&t.events.length){r.events=[];for(let n=0;n<t.events.length;++n)r.events[n]=$root.msgproto.Event.toObject(t.events[n],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t}(),t.Event=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.url="",t.prototype.unreadCount=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.url&&Object.hasOwnProperty.call(t,"url")&&e.uint32(10).string(t.url),null!=t.unreadCount&&Object.hasOwnProperty.call(t,"unreadCount")&&e.uint32(16).int32(t.unreadCount),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.Event;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.url=t.string();break;case 2:n.unreadCount=t.int32();break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.url&&t.hasOwnProperty("url")&&!$util.isString(t.url)?"url: string expected":null!=t.unreadCount&&t.hasOwnProperty("unreadCount")&&!$util.isInteger(t.unreadCount)?"unreadCount: integer expected":null},t.fromObject=function(t){if(t instanceof $root.msgproto.Event)return t;let e=new $root.msgproto.Event;return null!=t.url&&(e.url=String(t.url)),null!=t.unreadCount&&(e.unreadCount=0|t.unreadCount),e},t.toObject=function(t,e){e||(e={});let r={};return e.defaults&&(r.url="",r.unreadCount=0),null!=t.url&&t.hasOwnProperty("url")&&(r.url=t.url),null!=t.unreadCount&&t.hasOwnProperty("unreadCount")&&(r.unreadCount=t.unreadCount),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t}(),t.OnlineDetailNotify=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.userId="",t.prototype.businessTypeId="",t.prototype.status=0,t.prototype.statusDuration=0,t.prototype.subStatus="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&e.uint32(10).string(t.userId),null!=t.businessTypeId&&Object.hasOwnProperty.call(t,"businessTypeId")&&e.uint32(18).string(t.businessTypeId),null!=t.status&&Object.hasOwnProperty.call(t,"status")&&e.uint32(24).int32(t.status),null!=t.statusDuration&&Object.hasOwnProperty.call(t,"statusDuration")&&e.uint32(32).int32(t.statusDuration),null!=t.subStatus&&Object.hasOwnProperty.call(t,"subStatus")&&e.uint32(42).string(t.subStatus),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.OnlineDetailNotify;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.userId=t.string();break;case 2:n.businessTypeId=t.string();break;case 3:n.status=t.int32();break;case 4:n.statusDuration=t.int32();break;case 5:n.subStatus=t.string();break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.userId&&t.hasOwnProperty("userId")&&!$util.isString(t.userId))return"userId: string expected";if(null!=t.businessTypeId&&t.hasOwnProperty("businessTypeId")&&!$util.isString(t.businessTypeId))return"businessTypeId: string expected";if(null!=t.status&&t.hasOwnProperty("status"))switch(t.status){default:return"status: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:}return null!=t.statusDuration&&t.hasOwnProperty("statusDuration")&&!$util.isInteger(t.statusDuration)?"statusDuration: integer expected":null!=t.subStatus&&t.hasOwnProperty("subStatus")&&!$util.isString(t.subStatus)?"subStatus: string expected":null},t.fromObject=function(t){if(t instanceof $root.msgproto.OnlineDetailNotify)return t;let e=new $root.msgproto.OnlineDetailNotify;switch(null!=t.userId&&(e.userId=String(t.userId)),null!=t.businessTypeId&&(e.businessTypeId=String(t.businessTypeId)),t.status){case"UNKNOWN":case 0:e.status=0;break;case"OFFLINE":case 1:e.status=1;break;case"ONLINE":case 2:e.status=2;break;case"CALLING":case 3:e.status=3;break;case"NONWORKING":case 4:e.status=4;break;case"RINGING":case 5:e.status=5;break;case"BREAK":case 6:e.status=6;break;case"WORK":case 7:e.status=7;break;case"IDLE":case 8:e.status=8}return null!=t.statusDuration&&(e.statusDuration=0|t.statusDuration),null!=t.subStatus&&(e.subStatus=String(t.subStatus)),e},t.toObject=function(t,e){e||(e={});let r={};return e.defaults&&(r.userId="",r.businessTypeId="",r.status=e.enums===String?"UNKNOWN":0,r.statusDuration=0,r.subStatus=""),null!=t.userId&&t.hasOwnProperty("userId")&&(r.userId=t.userId),null!=t.businessTypeId&&t.hasOwnProperty("businessTypeId")&&(r.businessTypeId=t.businessTypeId),null!=t.status&&t.hasOwnProperty("status")&&(r.status=e.enums===String?$root.msgproto.OnlineDetailNotify.Status[t.status]:t.status),null!=t.statusDuration&&t.hasOwnProperty("statusDuration")&&(r.statusDuration=t.statusDuration),null!=t.subStatus&&t.hasOwnProperty("subStatus")&&(r.subStatus=t.subStatus),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t.Status=function(){const t={},e=Object.create(t);return e[t[0]="UNKNOWN"]=0,e[t[1]="OFFLINE"]=1,e[t[2]="ONLINE"]=2,e[t[3]="CALLING"]=3,e[t[4]="NONWORKING"]=4,e[t[5]="RINGING"]=5,e[t[6]="BREAK"]=6,e[t[7]="WORK"]=7,e[t[8]="IDLE"]=8,e}(),t}(),t.PushMessages=function(){function t(t){if(this.messages=[],t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.messages=$util.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=$Writer.create()),null!=t.messages&&t.messages.length)for(let r=0;r<t.messages.length;++r)e.uint32(10).string(t.messages[r]);return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.PushMessages;for(;t.pos<r;){let e=t.uint32();if(e>>>3==1)n.messages&&n.messages.length||(n.messages=[]),n.messages.push(t.string());else t.skipType(7&e)}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.messages&&t.hasOwnProperty("messages")){if(!Array.isArray(t.messages))return"messages: array expected";for(let e=0;e<t.messages.length;++e)if(!$util.isString(t.messages[e]))return"messages: string[] expected"}return null},t.fromObject=function(t){if(t instanceof $root.msgproto.PushMessages)return t;let e=new $root.msgproto.PushMessages;if(t.messages){if(!Array.isArray(t.messages))throw TypeError(".msgproto.PushMessages.messages: array expected");e.messages=[];for(let r=0;r<t.messages.length;++r)e.messages[r]=String(t.messages[r])}return e},t.toObject=function(t,e){e||(e={});let r={};if((e.arrays||e.defaults)&&(r.messages=[]),t.messages&&t.messages.length){r.messages=[];for(let e=0;e<t.messages.length;++e)r.messages[e]=t.messages[e]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t}(),t.CallEvent=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.type="",t.prototype.userId="",t.prototype.callId="",t.prototype.customerInfo="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(10).string(t.type),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&e.uint32(18).string(t.userId),null!=t.callId&&Object.hasOwnProperty.call(t,"callId")&&e.uint32(26).string(t.callId),null!=t.customerInfo&&Object.hasOwnProperty.call(t,"customerInfo")&&e.uint32(34).string(t.customerInfo),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.CallEvent;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.type=t.string();break;case 2:n.userId=t.string();break;case 3:n.callId=t.string();break;case 4:n.customerInfo=t.string();break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.type&&t.hasOwnProperty("type")&&!$util.isString(t.type)?"type: string expected":null!=t.userId&&t.hasOwnProperty("userId")&&!$util.isString(t.userId)?"userId: string expected":null!=t.callId&&t.hasOwnProperty("callId")&&!$util.isString(t.callId)?"callId: string expected":null!=t.customerInfo&&t.hasOwnProperty("customerInfo")&&!$util.isString(t.customerInfo)?"customerInfo: string expected":null},t.fromObject=function(t){if(t instanceof $root.msgproto.CallEvent)return t;let e=new $root.msgproto.CallEvent;return null!=t.type&&(e.type=String(t.type)),null!=t.userId&&(e.userId=String(t.userId)),null!=t.callId&&(e.callId=String(t.callId)),null!=t.customerInfo&&(e.customerInfo=String(t.customerInfo)),e},t.toObject=function(t,e){e||(e={});let r={};return e.defaults&&(r.type="",r.userId="",r.callId="",r.customerInfo=""),null!=t.type&&t.hasOwnProperty("type")&&(r.type=t.type),null!=t.userId&&t.hasOwnProperty("userId")&&(r.userId=t.userId),null!=t.callId&&t.hasOwnProperty("callId")&&(r.callId=t.callId),null!=t.customerInfo&&t.hasOwnProperty("customerInfo")&&(r.customerInfo=t.customerInfo),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t}(),t.S2CCmdSeatMonitor=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.type=0,t.prototype.period=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(8).int32(t.type),null!=t.period&&Object.hasOwnProperty.call(t,"period")&&e.uint32(16).int32(t.period),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.S2CCmdSeatMonitor;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.type=t.int32();break;case 2:n.period=t.int32();break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:}return null!=t.period&&t.hasOwnProperty("period")&&!$util.isInteger(t.period)?"period: integer expected":null},t.fromObject=function(t){if(t instanceof $root.msgproto.S2CCmdSeatMonitor)return t;let e=new $root.msgproto.S2CCmdSeatMonitor;switch(t.type){case"START":case 0:e.type=0;break;case"STOP":case 1:e.type=1}return null!=t.period&&(e.period=0|t.period),e},t.toObject=function(t,e){e||(e={});let r={};return e.defaults&&(r.type=e.enums===String?"START":0,r.period=0),null!=t.type&&t.hasOwnProperty("type")&&(r.type=e.enums===String?$root.msgproto.S2CCmdSeatMonitor.Type[t.type]:t.type),null!=t.period&&t.hasOwnProperty("period")&&(r.period=t.period),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t.Type=function(){const t={},e=Object.create(t);return e[t[0]="START"]=0,e[t[1]="STOP"]=1,e}(),t}(),t.S2CCmdMasterMonitor=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.type=0,t.prototype.period=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(8).int32(t.type),null!=t.period&&Object.hasOwnProperty.call(t,"period")&&e.uint32(16).int32(t.period),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.S2CCmdMasterMonitor;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.type=t.int32();break;case 2:n.period=t.int32();break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:}return null!=t.period&&t.hasOwnProperty("period")&&!$util.isInteger(t.period)?"period: integer expected":null},t.fromObject=function(t){if(t instanceof $root.msgproto.S2CCmdMasterMonitor)return t;let e=new $root.msgproto.S2CCmdMasterMonitor;switch(t.type){case"START":case 0:e.type=0;break;case"STOP":case 1:e.type=1}return null!=t.period&&(e.period=0|t.period),e},t.toObject=function(t,e){e||(e={});let r={};return e.defaults&&(r.type=e.enums===String?"START":0,r.period=0),null!=t.type&&t.hasOwnProperty("type")&&(r.type=e.enums===String?$root.msgproto.S2CCmdMasterMonitor.Type[t.type]:t.type),null!=t.period&&t.hasOwnProperty("period")&&(r.period=t.period),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t.Type=function(){const t={},e=Object.create(t);return e[t[0]="START"]=0,e[t[1]="STOP"]=1,e}(),t}(),t.S2CNotifySeatStatus=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.status=0,t.prototype.userId="",t.prototype.version="",t.prototype.statusDuration=0,t.prototype.subStatus="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.status&&Object.hasOwnProperty.call(t,"status")&&e.uint32(8).int32(t.status),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&e.uint32(18).string(t.userId),null!=t.version&&Object.hasOwnProperty.call(t,"version")&&e.uint32(26).string(t.version),null!=t.statusDuration&&Object.hasOwnProperty.call(t,"statusDuration")&&e.uint32(32).int32(t.statusDuration),null!=t.subStatus&&Object.hasOwnProperty.call(t,"subStatus")&&e.uint32(42).string(t.subStatus),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.S2CNotifySeatStatus;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.status=t.int32();break;case 2:n.userId=t.string();break;case 3:n.version=t.string();break;case 4:n.statusDuration=t.int32();break;case 5:n.subStatus=t.string();break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.status&&t.hasOwnProperty("status"))switch(t.status){default:return"status: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:}return null!=t.userId&&t.hasOwnProperty("userId")&&!$util.isString(t.userId)?"userId: string expected":null!=t.version&&t.hasOwnProperty("version")&&!$util.isString(t.version)?"version: string expected":null!=t.statusDuration&&t.hasOwnProperty("statusDuration")&&!$util.isInteger(t.statusDuration)?"statusDuration: integer expected":null!=t.subStatus&&t.hasOwnProperty("subStatus")&&!$util.isString(t.subStatus)?"subStatus: string expected":null},t.fromObject=function(t){if(t instanceof $root.msgproto.S2CNotifySeatStatus)return t;let e=new $root.msgproto.S2CNotifySeatStatus;switch(t.status){case"UNKNOWN":case 0:e.status=0;break;case"OFFLINE":case 1:e.status=1;break;case"ONLINE":case 2:e.status=2;break;case"CALLING":case 3:e.status=3;break;case"NONWORKING":case 4:e.status=4;break;case"RINGING":case 5:e.status=5;break;case"BREAK":case 6:e.status=6;break;case"WORK":case 7:e.status=7;break;case"IDLE":case 8:e.status=8}return null!=t.userId&&(e.userId=String(t.userId)),null!=t.version&&(e.version=String(t.version)),null!=t.statusDuration&&(e.statusDuration=0|t.statusDuration),null!=t.subStatus&&(e.subStatus=String(t.subStatus)),e},t.toObject=function(t,e){e||(e={});let r={};return e.defaults&&(r.status=e.enums===String?"UNKNOWN":0,r.userId="",r.version="",r.statusDuration=0,r.subStatus=""),null!=t.status&&t.hasOwnProperty("status")&&(r.status=e.enums===String?$root.msgproto.S2CNotifySeatStatus.Status[t.status]:t.status),null!=t.userId&&t.hasOwnProperty("userId")&&(r.userId=t.userId),null!=t.version&&t.hasOwnProperty("version")&&(r.version=t.version),null!=t.statusDuration&&t.hasOwnProperty("statusDuration")&&(r.statusDuration=t.statusDuration),null!=t.subStatus&&t.hasOwnProperty("subStatus")&&(r.subStatus=t.subStatus),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t.Status=function(){const t={},e=Object.create(t);return e[t[0]="UNKNOWN"]=0,e[t[1]="OFFLINE"]=1,e[t[2]="ONLINE"]=2,e[t[3]="CALLING"]=3,e[t[4]="NONWORKING"]=4,e[t[5]="RINGING"]=5,e[t[6]="BREAK"]=6,e[t[7]="WORK"]=7,e[t[8]="IDLE"]=8,e}(),t}(),t.S2CNotifyMasterStatus=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.status=0,t.prototype.userId="",t.prototype.version="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.status&&Object.hasOwnProperty.call(t,"status")&&e.uint32(8).int32(t.status),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&e.uint32(18).string(t.userId),null!=t.version&&Object.hasOwnProperty.call(t,"version")&&e.uint32(26).string(t.version),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.S2CNotifyMasterStatus;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.status=t.int32();break;case 2:n.userId=t.string();break;case 3:n.version=t.string();break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.status&&t.hasOwnProperty("status"))switch(t.status){default:return"status: enum value expected";case 0:case 1:case 2:}return null!=t.userId&&t.hasOwnProperty("userId")&&!$util.isString(t.userId)?"userId: string expected":null!=t.version&&t.hasOwnProperty("version")&&!$util.isString(t.version)?"version: string expected":null},t.fromObject=function(t){if(t instanceof $root.msgproto.S2CNotifyMasterStatus)return t;let e=new $root.msgproto.S2CNotifyMasterStatus;switch(t.status){case"UNKNOWN":case 0:e.status=0;break;case"OFFLINE":case 1:e.status=1;break;case"ONLINE":case 2:e.status=2}return null!=t.userId&&(e.userId=String(t.userId)),null!=t.version&&(e.version=String(t.version)),e},t.toObject=function(t,e){e||(e={});let r={};return e.defaults&&(r.status=e.enums===String?"UNKNOWN":0,r.userId="",r.version=""),null!=t.status&&t.hasOwnProperty("status")&&(r.status=e.enums===String?$root.msgproto.S2CNotifyMasterStatus.Status[t.status]:t.status),null!=t.userId&&t.hasOwnProperty("userId")&&(r.userId=t.userId),null!=t.version&&t.hasOwnProperty("version")&&(r.version=t.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t.Status=function(){const t={},e=Object.create(t);return e[t[0]="UNKNOWN"]=0,e[t[1]="OFFLINE"]=1,e[t[2]="ONLINE"]=2,e}(),t}(),t.C2CMsg=function(){function t(t){if(this.dstUserId=[],t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.type=0,t.prototype.srcUserId="",t.prototype.dstUserId=$util.emptyArray,t.prototype.data=$util.newBuffer([]),t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=$Writer.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(8).int32(t.type),null!=t.srcUserId&&Object.hasOwnProperty.call(t,"srcUserId")&&e.uint32(18).string(t.srcUserId),null!=t.dstUserId&&t.dstUserId.length)for(let r=0;r<t.dstUserId.length;++r)e.uint32(26).string(t.dstUserId[r]);return null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(82).bytes(t.data),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.C2CMsg;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.type=t.int32();break;case 2:n.srcUserId=t.string();break;case 3:n.dstUserId&&n.dstUserId.length||(n.dstUserId=[]),n.dstUserId.push(t.string());break;case 10:n.data=t.bytes();break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.type&&t.hasOwnProperty("type")&&0!==t.type)return"type: enum value expected";if(null!=t.srcUserId&&t.hasOwnProperty("srcUserId")&&!$util.isString(t.srcUserId))return"srcUserId: string expected";if(null!=t.dstUserId&&t.hasOwnProperty("dstUserId")){if(!Array.isArray(t.dstUserId))return"dstUserId: array expected";for(let e=0;e<t.dstUserId.length;++e)if(!$util.isString(t.dstUserId[e]))return"dstUserId: string[] expected"}return null!=t.data&&t.hasOwnProperty("data")&&!(t.data&&"number"==typeof t.data.length||$util.isString(t.data))?"data: buffer expected":null},t.fromObject=function(t){if(t instanceof $root.msgproto.C2CMsg)return t;let e=new $root.msgproto.C2CMsg;switch(t.type){case"UNICAST":case 0:e.type=0}if(null!=t.srcUserId&&(e.srcUserId=String(t.srcUserId)),t.dstUserId){if(!Array.isArray(t.dstUserId))throw TypeError(".msgproto.C2CMsg.dstUserId: array expected");e.dstUserId=[];for(let r=0;r<t.dstUserId.length;++r)e.dstUserId[r]=String(t.dstUserId[r])}return null!=t.data&&("string"==typeof t.data?$util.base64.decode(t.data,e.data=$util.newBuffer($util.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),e},t.toObject=function(t,e){e||(e={});let r={};if((e.arrays||e.defaults)&&(r.dstUserId=[]),e.defaults&&(r.type=e.enums===String?"UNICAST":0,r.srcUserId="",e.bytes===String?r.data="":(r.data=[],e.bytes!==Array&&(r.data=$util.newBuffer(r.data)))),null!=t.type&&t.hasOwnProperty("type")&&(r.type=e.enums===String?$root.msgproto.C2CMsg.Type[t.type]:t.type),null!=t.srcUserId&&t.hasOwnProperty("srcUserId")&&(r.srcUserId=t.srcUserId),t.dstUserId&&t.dstUserId.length){r.dstUserId=[];for(let e=0;e<t.dstUserId.length;++e)r.dstUserId[e]=t.dstUserId[e]}return null!=t.data&&t.hasOwnProperty("data")&&(r.data=e.bytes===String?$util.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t.Type=function(){const t={},e=Object.create(t);return e[t[0]="UNICAST"]=0,e}(),t}(),t.C2SRoomEvent=function(){function t(t){if(t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.type=0,t.prototype.roomId=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(8).int32(t.type),null!=t.roomId&&Object.hasOwnProperty.call(t,"roomId")&&e.uint32(16).uint32(t.roomId),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.C2SRoomEvent;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.type=t.int32();break;case 2:n.roomId=t.uint32();break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:case 2:}return null!=t.roomId&&t.hasOwnProperty("roomId")&&!$util.isInteger(t.roomId)?"roomId: integer expected":null},t.fromObject=function(t){if(t instanceof $root.msgproto.C2SRoomEvent)return t;let e=new $root.msgproto.C2SRoomEvent;switch(t.type){case"NONE":case 0:e.type=0;break;case"ENTER_ROOM":case 1:e.type=1;break;case"EXIT_ROOM":case 2:e.type=2}return null!=t.roomId&&(e.roomId=t.roomId>>>0),e},t.toObject=function(t,e){e||(e={});let r={};return e.defaults&&(r.type=e.enums===String?"NONE":0,r.roomId=0),null!=t.type&&t.hasOwnProperty("type")&&(r.type=e.enums===String?$root.msgproto.C2SRoomEvent.Type[t.type]:t.type),null!=t.roomId&&t.hasOwnProperty("roomId")&&(r.roomId=t.roomId),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t.Type=function(){const t={},e=Object.create(t);return e[t[0]="NONE"]=0,e[t[1]="ENTER_ROOM"]=1,e[t[2]="EXIT_ROOM"]=2,e}(),t}(),t.S2CNotifyRoomStatus=function(){function t(t){if(this.userIdList=[],t)for(let e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.type=0,t.prototype.roomId=0,t.prototype.userIdList=$util.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=$Writer.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(8).int32(t.type),null!=t.roomId&&Object.hasOwnProperty.call(t,"roomId")&&e.uint32(16).uint32(t.roomId),null!=t.userIdList&&t.userIdList.length)for(let r=0;r<t.userIdList.length;++r)e.uint32(26).string(t.userIdList[r]);return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));let r=void 0===e?t.len:t.pos+e,n=new $root.msgproto.S2CNotifyRoomStatus;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:n.type=t.int32();break;case 2:n.roomId=t.uint32();break;case 3:n.userIdList&&n.userIdList.length||(n.userIdList=[]),n.userIdList.push(t.string());break;default:t.skipType(7&e)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:}if(null!=t.roomId&&t.hasOwnProperty("roomId")&&!$util.isInteger(t.roomId))return"roomId: integer expected";if(null!=t.userIdList&&t.hasOwnProperty("userIdList")){if(!Array.isArray(t.userIdList))return"userIdList: array expected";for(let e=0;e<t.userIdList.length;++e)if(!$util.isString(t.userIdList[e]))return"userIdList: string[] expected"}return null},t.fromObject=function(t){if(t instanceof $root.msgproto.S2CNotifyRoomStatus)return t;let e=new $root.msgproto.S2CNotifyRoomStatus;switch(t.type){case"NONE":case 0:e.type=0;break;case"SOMEONE_ENTER_ROOM":case 1:e.type=1;break;case"ONESELF_ENTER_ROOM":case 2:e.type=2;break;case"SOMEONE_EXIT_ROOM":case 3:e.type=3;break;case"ONESELF_EXIT_ROOM":case 4:e.type=4;break;case"SOMEONE_KICK_OFF":case 5:e.type=5}if(null!=t.roomId&&(e.roomId=t.roomId>>>0),t.userIdList){if(!Array.isArray(t.userIdList))throw TypeError(".msgproto.S2CNotifyRoomStatus.userIdList: array expected");e.userIdList=[];for(let r=0;r<t.userIdList.length;++r)e.userIdList[r]=String(t.userIdList[r])}return e},t.toObject=function(t,e){e||(e={});let r={};if((e.arrays||e.defaults)&&(r.userIdList=[]),e.defaults&&(r.type=e.enums===String?"NONE":0,r.roomId=0),null!=t.type&&t.hasOwnProperty("type")&&(r.type=e.enums===String?$root.msgproto.S2CNotifyRoomStatus.Type[t.type]:t.type),null!=t.roomId&&t.hasOwnProperty("roomId")&&(r.roomId=t.roomId),t.userIdList&&t.userIdList.length){r.userIdList=[];for(let e=0;e<t.userIdList.length;++e)r.userIdList[e]=t.userIdList[e]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},t.Type=function(){const t={},e=Object.create(t);return e[t[0]="NONE"]=0,e[t[1]="SOMEONE_ENTER_ROOM"]=1,e[t[2]="ONESELF_ENTER_ROOM"]=2,e[t[3]="SOMEONE_EXIT_ROOM"]=3,e[t[4]="ONESELF_EXIT_ROOM"]=4,e[t[5]="SOMEONE_KICK_OFF"]=5,e}(),t}(),t})();var packageLibrary={MSG_PROTO:"msgproto"},protoLibrary={HeartBeat:{protoType:256,protoPackage:packageLibrary.MSG_PROTO,protoModule:"HeartBeat"},KickOff:{protoType:257,protoPackage:packageLibrary.MSG_PROTO,protoModule:"KickOff"},RemindAFK:{protoType:258,protoPackage:packageLibrary.MSG_PROTO,protoModule:"RemindAFK"},S2CCmdReport:{protoType:259,protoPackage:packageLibrary.MSG_PROTO,protoModule:"S2CCmdReport"},PushEvents:{protoType:512,protoPackage:packageLibrary.MSG_PROTO,protoModule:"PushEvents"},OnlineDetailNotify:{protoType:513,protoPackage:packageLibrary.MSG_PROTO,protoModule:"OnlineDetailNotify"},PushMessages:{protoType:514,protoPackage:packageLibrary.MSG_PROTO,protoModule:"PushMessages"},CallEvent:{protoType:515,protoPackage:packageLibrary.MSG_PROTO,protoModule:"CallEvent"},S2CCmdSeatMonitor:{protoType:768,protoPackage:packageLibrary.MSG_PROTO,protoModule:"S2CCmdSeatMonitor"},S2CCmdMasterMonitor:{protoType:769,protoPackage:packageLibrary.MSG_PROTO,protoModule:"S2CCmdMasterMonitor"},S2CNotifySeatStatus:{protoType:770,protoPackage:packageLibrary.MSG_PROTO,protoModule:"S2CNotifySeatStatus"},S2CNotifyMasterStatus:{protoType:771,protoPackage:packageLibrary.MSG_PROTO,protoModule:"S2CNotifyMasterStatus"},C2CMsg:{protoType:1024,protoPackage:packageLibrary.MSG_PROTO,protoModule:"C2CMsg"},C2SRoomEvent:{protoType:1280,protoPackage:packageLibrary.MSG_PROTO,protoModule:"C2SRoomEvent"},S2CNotifyRoomStatus:{protoType:1281,protoPackage:packageLibrary.MSG_PROTO,protoModule:"S2CNotifyRoomStatus"}},_this=void 0;!function(){function t(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,r){var n=this.byteLength,o=t(e,n),i=n;if(void 0!==r&&(i=t(r,n)),o>i)return new ArrayBuffer(0);var a=i-o,s=new ArrayBuffer(a),c=new Uint8Array(s),u=new Uint8Array(this,o,a);return c.set(u),s})}();var protoHeaderLength={dataLength:4,protoTypeLength:4},messageToProto=function(t,e){_newArrowCheck(this,_this);var r=e.protoType,n=e.protoPackage,o=e.protoModule,i=protoHeaderLength.dataLength,a=protoHeaderLength.protoTypeLength,s=$root[n][o],c=s.create(t),u=s.verify(t);u&&console.log(u);var l=s.encode(c).finish(),f=i+a,p=i+a+l.byteLength,d=new DataView(new ArrayBuffer(p));d.setInt32(0,p),d.setInt32(4,r);for(var y=0;y<l.byteLength;y++)d.setInt8(f+y,l[y]);return d.buffer}.bind(void 0),protoToMessage=function(t){var e=this;_newArrowCheck(this,_this);var r=protoHeaderLength.dataLength,n=protoHeaderLength.protoTypeLength;try{if(t.data){var o=t.data,i=new DataView(o.slice(0,r)).getInt32(0),a=new DataView(o.slice(r,r+n)).getInt32(0),s=o.slice(r+n,i),c=Object.keys(protoLibrary).filter(function(t){return _newArrowCheck(this,e),protoLibrary[t].protoType===a}.bind(this)),u=c=protoLibrary[c[0]],l=u.protoPackage,f=u.protoModule;return{message:$root[l][f].decode(new Uint8Array(s)).toJSON(),type:c}}console.log("message is empty")}catch(t){console.log(t)}}.bind(void 0),base64={exports:{}};!function(t,e){!function(e){t.exports=function(e){e=e||{};var r,n=e.Base64,o="2.6.4",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=function(t){for(var e={},r=0,n=t.length;r<n;r++)e[t.charAt(r)]=r;return e}(i),s=String.fromCharCode,c=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?s(192|e>>>6)+s(128|63&e):s(224|e>>>12&15)+s(128|e>>>6&63)+s(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return s(240|e>>>18&7)+s(128|e>>>12&63)+s(128|e>>>6&63)+s(128|63&e)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,l=function(t){return t.replace(u,c)},f=function(t){var e=[0,2,1][t.length%3],r=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[i.charAt(r>>>18),i.charAt(r>>>12&63),e>=2?"=":i.charAt(r>>>6&63),e>=1?"=":i.charAt(63&r)].join("")},p=e.btoa&&"function"==typeof e.btoa?function(t){return e.btoa(t)}:function(t){if(t.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return t.replace(/[\s\S]{1,3}/g,f)},d=function(t){return p(l(String(t)))},y=function(t){return t.replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,"")},h=function(t,e){return e?y(d(t)):d(t)},$=function(t){return h(t,!0)};e.Uint8Array&&(r=function(t,e){for(var r="",n=0,o=t.length;n<o;n+=3){var a=t[n],s=t[n+1],c=t[n+2],u=a<<16|s<<8|c;r+=i.charAt(u>>>18)+i.charAt(u>>>12&63)+(void 0!==s?i.charAt(u>>>6&63):"=")+(void 0!==c?i.charAt(63&u):"=")}return e?y(r):r});var g,v=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,b=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return s(55296+(e>>>10))+s(56320+(1023&e));case 3:return s((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return s((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},S=function(t){return t.replace(v,b)},O=function(t){var e=t.length,r=e%4,n=(e>0?a[t.charAt(0)]<<18:0)|(e>1?a[t.charAt(1)]<<12:0)|(e>2?a[t.charAt(2)]<<6:0)|(e>3?a[t.charAt(3)]:0),o=[s(n>>>16),s(n>>>8&255),s(255&n)];return o.length-=[0,0,2,1][r],o.join("")},I=e.atob&&"function"==typeof e.atob?function(t){return e.atob(t)}:function(t){return t.replace(/\S{1,4}/g,O)},m=function(t){return I(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},A=function(t){return S(I(t))},T=function(t){return String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},_=function(t){return A(T(t))};e.Uint8Array&&(g=function(t){return Uint8Array.from(m(T(t)),(function(t){return t.charCodeAt(0)}))});var E=function(){var t=e.Base64;return e.Base64=n,t};if(e.Base64={VERSION:o,atob:m,btoa:p,fromBase64:_,toBase64:h,utob:l,encode:h,encodeURI:$,btou:S,decode:_,noConflict:E,fromUint8Array:r,toUint8Array:g},"function"==typeof Object.defineProperty){var w=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};e.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",w((function(){return _(this)}))),Object.defineProperty(String.prototype,"toBase64",w((function(t){return h(this,t)}))),Object.defineProperty(String.prototype,"toBase64URI",w((function(){return h(this,!0)})))}}e.Meteor&&(Base64=e.Base64);t.exports&&(t.exports.Base64=e.Base64);return{Base64:e.Base64}}(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:commonjsGlobal)}(base64);var base64Exports=base64.exports,AccessSocket=function(t){_inherits(r,t);var e=_createSuper(r);function r(){var t;return _classCallCheck(this,r),(t=e.call(this)).reconnectCount=1,t}return _createClass(r,[{key:"connect",value:function(t){var e=this;return new Promise(function(r,n){var o=this;_newArrowCheck(this,e),this.ws=new WebSocket(t.url),this.ws.binaryType="arraybuffer",this.ws.onopen=function(){var e=this;_newArrowCheck(this,o),this.send({type:"HeartBeat",payload:{businessTypeId:t.bizId,token:t.token,version:t.version}}),this.heartBeatId=setInterval(function(){_newArrowCheck(this,e),this.send({type:"HeartBeat",payload:{}})}.bind(this),1e4),r(!0)}.bind(this),this.ws.onmessage=function(t){_newArrowCheck(this,o);var e=protoToMessage(t),r={type:null==e?void 0:e.type,payload:null==e?void 0:e.message};if("C2CMsg"===r.type&&r.payload.data){var n=JSON.parse(base64Exports.Base64.decode(r.payload.data));r.payload.dataObject=n}this.emit("message",r),"KickOff"===r.type&&this.disconnect()}.bind(this),this.ws.onclose=function(){return _newArrowCheck(this,o),__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.heartBeatId&&clearInterval(this.heartBeatId),!(this.reconnectCount>=5)){e.next=4;break}return n(new Error("Connection failed after 5 attempts.")),e.abrupt("return");case 4:return this.reconnectCount++,e.prev=5,e.next=8,this.connect(t);case 8:r(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),n(e.t0);case 14:case"end":return e.stop()}}),e,this,[[5,11]])})))}.bind(this)}.bind(this))}},{key:"send",value:function(t){"C2CMsg"===t.type?this.sendC2C(t.payload):this.sendMsg(t)}},{key:"sendMsg",value:function(t){var e,r=messageToProto(t.payload,protoLibrary[t.type]);null===(e=this.ws)||void 0===e||e.send(r)}},{key:"sendC2C",value:function(t){console.log("Method send received(c2c) with payload",t);var e=Object.assign({},t);t.dataObject&&(e.data=r.stringToUint8Array(JSON.stringify(t.dataObject)),delete e.dataObject,e.type=msgproto.C2CMsg.Type.UNICAST),this.sendMsg({type:"C2CMsg",payload:e})}},{key:"reconnect",value:function(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.options||this.ws.readyState!==WebSocket.CLOSED){t.next=3;break}return t.next=3,this.connect(this.options);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"disconnect",value:function(){var t;this.heartBeatId&&clearInterval(this.heartBeatId),this.removeAllListeners(),this.reconnectCount=1,this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.onerror=null),null===(t=this.ws)||void 0===t||t.close()}}],[{key:"stringToUint8Array",value:function(t){for(var e=[],r=0,n=t.length;r<n;++r)e.push(t.charCodeAt(r));return new Uint8Array(e)}}]),r}(EventEmitter$1),Assistant=function(t){_inherits(r,t);var e=_createSuper(r);function r(t){var n,o=this;return _classCallCheck(this,r),(n=e.call(this)).options=t,n.products=[],n.clientCnt=new ClientCnt,n.aiSocket=new AISocket,n.accessSocket=new AccessSocket,n.login=function(t){return _newArrowCheck(this,o),__awaiter(_assertThisInitialized(n),void 0,void 0,regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.token){e.next=2;break}throw new Error("[login]: token is required");case 2:if(t.bizID){e.next=4;break}throw new Error("[login]: bizID is required");case 4:return this.api=new API({origin:this.options.origin,token:t.token,bizID:t.bizID}),e.next=7,this.api.getUser();case 7:if(0===(r=e.sent).code){e.next=10;break}throw new Error("[login]: get user info failed:"+r.errorMsg);case 10:return this.userInfo=r.data,this.passport=t,e.next=14,this.createAccessSocket(t);case 14:return e.abrupt("return",r.data);case 15:case"end":return e.stop()}}),e,this)})))}.bind(this),n}return _createClass(r,[{key:"origin",get:function(){return this.options.origin}},{key:"start",value:function(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.passport&&this.userInfo){t.next=2;break}throw new Error("[start]: please init first");case 2:return t.next=4,this.api.getProducts();case 4:if(0===(e=t.sent).code){t.next=9;break}throw new Error("[login]: get product info failed:"+e.msg);case 9:if(0!==e.data.length){t.next=11;break}throw new Error("[login]: no product found");case 11:this.products=e.data,this.setProductID(e.data[0].sceneId);case 13:return t.prev=13,t.next=16,this.clientCnt.connect();case 16:this.clientCnt.send({cmd:"login",param:{businessID:this.passport.bizID,version:LIB_VERSION,aiServerType:"0",aiServerURL:join$1(http2ws(this.options.origin),"/ai/v1"),token:this.passport.token,userID:this.userInfo.userId,userName:this.userInfo.username}}),this.clientCnt.send({cmd:"onProductUpdate",data:JSON.stringify({productId:this.productID}),param:{}}),t.next=23;break;case 20:throw t.prev=20,t.t0=t.catch(13),new Error("[start]: Connect to client failed. Ensure it's installed and running.");case 23:return t.next=25,this.createAIWebsocket(this.passport);case 25:return this.startCallService(),t.abrupt("return",{products:e.data});case 27:case"end":return t.stop()}}),t,this,[[13,20]])})))}},{key:"setProductID",value:function(t){var e=this;if(!t)throw new Error("[setProductID]: productID is required");if(!this.products.find(function(r){return _newArrowCheck(this,e),r.sceneId===t}.bind(this)))throw new Error("[setProductID]: product not found with id:"+t);this.productID=t}},{key:"startCallService",value:function(){var t=this;this.callService=_default(),this.callService.onTransition(function(e,r){if(_newArrowCheck(this,t),e.changed){this.emit("callTransition",e,r);var n=null==r?void 0:r.customerInfo;switch(this.api.postCallEvent({event:{eventName:r.type,occurredAt:Math.round(Date.now()/1e3)},sessionId:e.context.chatId,source:0,extend:{customerInfo:"string"!=typeof n?JSON.stringify(n):n,crmCallId:null==r?void 0:r.callId,phoneId:null==r?void 0:r.phoneId,hangup:null==r?void 0:r.hangup,rawData:JSON.stringify(r)}}),r.type){case"onCall":this.clientCnt.send({cmd:"onCall",param:{sessionID:r.chatId,productID:this.productID.toString(),customerID:"",customerName:"",crmCallID:r.chatId},data:r.customerInfo});break;case"onTalkBegin":case"onClosed":this.clientCnt.send({cmd:r.type,param:{}})}}}.bind(this)),this.callService.start()}},{key:"createAccessSocket",value:function(t){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=join$1(http2ws(this.options.origin),"/access-server"),e.prev=1,e.next=4,this.accessSocket.connect({url:r,bizId:t.bizID,token:t.token,version:LIB_VERSION});case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),new Error("[login]: connect to access-server failed");case 9:case"end":return e.stop()}}),e,this,[[1,6]])})))}},{key:"createAIWebsocket",value:function(t){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=join$1(http2ws(this.options.origin),"/subscribe/v1?token=".concat(t.token,"&bizId=").concat(t.bizID)),e.next=3,this.aiSocket.connect(r);case 3:this.aiSocket.on("message",function(t){_newArrowCheck(this,n),this.emit("aiMessage",t)}.bind(this));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"send",value:function(t){var e,r;if(!["onCall","onTalkBegin","onClosed"].includes(t.type))throw new Error("[send]: invalid event type, only onCall, onTalkBegin, onClosed are allowed");if("onCall"===t.type&&t.customerInfo&&"object"!==_typeof(t.customerInfo))throw new Error("[send]: customerInfo should be an object");if("onCall"===t.type){var n=Object.assign(Object.assign({},t),{chatId:uuid(),type:"onCall",customerInfo:t.customerInfo?JSON.stringify(Object.assign(Object.assign({},t.customerInfo),{productID:this.productID.toString()})):JSON.stringify({productID:this.productID.toString()})});return null===(e=this.callService)||void 0===e?void 0:e.send(n)}return null===(r=this.callService)||void 0===r?void 0:r.send(t)}},{key:"stop",value:function(){var t;null===(t=this.callService)||void 0===t||t.stop(),this.callService=void 0,this.clientCnt.disconnect(),this.aiSocket.disconnect()}},{key:"logout",value:function(){this.userInfo=void 0,this.passport=void 0,this.products=[],this.accessSocket.disconnect(),this.stop()}}]),r}(EventEmitter$1),SentenceSource;exports.SentenceSource=void 0,SentenceSource=exports.SentenceSource||(exports.SentenceSource={}),SentenceSource.Unknown="unknown",SentenceSource.Input="input",SentenceSource.Output="output",exports.default=Assistant,Object.defineProperty(exports,"__esModule",{value:!0})}));
//# sourceMappingURL=helport-assistant.umd.js.map
